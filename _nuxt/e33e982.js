(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{295:function(e,t,n){"use strict";var r=n(318);e.exports={USER_AGENT:"".concat(r.title," ").concat(r.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},296:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=n(314),o="JsSIP";e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?(this._debug=l.default("".concat(o,":").concat(t)),this._warn=l.default("".concat(o,":WARN:").concat(t)),this._error=l.default("".concat(o,":ERROR:").concat(t))):(this._debug=l.default(o),this._warn=l.default("".concat(o,":WARN")),this._error=l.default("".concat(o,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}var t,n,c;return t=e,(n=[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])&&r(t.prototype,n),c&&r(t,c),e}()},297:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,l=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw l}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var c=n(295),d=n(305),h=n(300);t.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length};var f=t.isFunction=function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)};t.isString=function(e){return void 0!==e&&"[object String]"===Object.prototype.toString.call(e)},t.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},t.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)},t.hasMethods=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var l=0,o=n;l<o.length;l++){var c=o[l];if(f(e[c]))return!1}return!0};var _=t.createRandomToken=function(e){var i,base=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,t="";for(i=0;i<e;i++)t+=(Math.random()*base|0).toString(base);return t};t.newTag=function(){return _(10)},t.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.hostType=function(e){if(e)return-1!==(e=h.parse(e,"host"))?e.host_type:void 0};var m=t.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")};t.normalizeTarget=function(e,t){if(e){if(e instanceof d)return e;if("string"==typeof e){var n,r,l,o=e.split("@");switch(o.length){case 1:if(!t)return;n=e,r=t;break;case 2:n=o[0],r=o[1];break;default:n=o.slice(0,o.length-1).join("@"),r=o[o.length-1]}return n=n.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(n)&&(n=n.replace(/[-.()]/g,"")),e="".concat(c.SIP,":").concat(m(n),"@").concat(r),(l=d.parse(e))?l:void 0}}else;},t.headerize=function(e){var t,n={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),l="",o=r.length;for(t=0;t<o;t++)0!==t&&(l+="-"),l+=r[t].charAt(0).toUpperCase()+r[t].substring(1);return n[l]&&(l=n[l]),l},t.sipErrorCause=function(e){for(var t in c.SIP_ERROR_CAUSES)if(-1!==c.SIP_ERROR_CAUSES[t].indexOf(e))return c.causes[t];return c.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=function(){return"192.0.2.".concat((e=1,t=254,Math.floor(Math.random()*(t-e+1)+e)));var e,t},t.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,l=1073741824&e,o=1073741824&t,c=(1073741823&e)+(1073741823&t);return l&o?2147483648^c^n^r:l|o?1073741824&c?3221225472^c^n^r:1073741824^c^n^r:c^n^r}function r(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return e&t|~e&n}(b,e,r),l),o)),n(t(a,s),b)}function l(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return e&n|t&~n}(b,e,r),l),o)),n(t(a,s),b)}function o(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return e^t^n}(b,e,r),l),o)),n(t(a,s),b)}function c(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return t^(e|~n)}(b,e,r),l),o)),n(t(a,s),b)}function d(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0".concat((e>>>8*t&255).toString(16))).substr(r.length-2,2);return n}var h,f,_,m,v,T,a,b,$,y;for(h=function(e){for(var t,n=e.length,r=n+8,l=16*((r-r%64)/64+1),o=new Array(l-1),c=0,d=0;d<n;)c=d%4*8,o[t=(d-d%4)/4]=o[t]|e.charCodeAt(d)<<c,d++;return c=d%4*8,o[t=(d-d%4)/4]=o[t]|128<<c,o[l-2]=n<<3,o[l-1]=n>>>29,o}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),a=1732584193,b=4023233417,$=2562383102,y=271733878,f=0;f<h.length;f+=16)_=a,m=b,v=$,T=y,a=r(a,b,$,y,h[f+0],7,3614090360),y=r(y,a,b,$,h[f+1],12,3905402710),$=r($,y,a,b,h[f+2],17,606105819),b=r(b,$,y,a,h[f+3],22,3250441966),a=r(a,b,$,y,h[f+4],7,4118548399),y=r(y,a,b,$,h[f+5],12,1200080426),$=r($,y,a,b,h[f+6],17,2821735955),b=r(b,$,y,a,h[f+7],22,4249261313),a=r(a,b,$,y,h[f+8],7,1770035416),y=r(y,a,b,$,h[f+9],12,2336552879),$=r($,y,a,b,h[f+10],17,4294925233),b=r(b,$,y,a,h[f+11],22,2304563134),a=r(a,b,$,y,h[f+12],7,1804603682),y=r(y,a,b,$,h[f+13],12,4254626195),$=r($,y,a,b,h[f+14],17,2792965006),a=l(a,b=r(b,$,y,a,h[f+15],22,1236535329),$,y,h[f+1],5,4129170786),y=l(y,a,b,$,h[f+6],9,3225465664),$=l($,y,a,b,h[f+11],14,643717713),b=l(b,$,y,a,h[f+0],20,3921069994),a=l(a,b,$,y,h[f+5],5,3593408605),y=l(y,a,b,$,h[f+10],9,38016083),$=l($,y,a,b,h[f+15],14,3634488961),b=l(b,$,y,a,h[f+4],20,3889429448),a=l(a,b,$,y,h[f+9],5,568446438),y=l(y,a,b,$,h[f+14],9,3275163606),$=l($,y,a,b,h[f+3],14,4107603335),b=l(b,$,y,a,h[f+8],20,1163531501),a=l(a,b,$,y,h[f+13],5,2850285829),y=l(y,a,b,$,h[f+2],9,4243563512),$=l($,y,a,b,h[f+7],14,1735328473),a=o(a,b=l(b,$,y,a,h[f+12],20,2368359562),$,y,h[f+5],4,4294588738),y=o(y,a,b,$,h[f+8],11,2272392833),$=o($,y,a,b,h[f+11],16,1839030562),b=o(b,$,y,a,h[f+14],23,4259657740),a=o(a,b,$,y,h[f+1],4,2763975236),y=o(y,a,b,$,h[f+4],11,1272893353),$=o($,y,a,b,h[f+7],16,4139469664),b=o(b,$,y,a,h[f+10],23,3200236656),a=o(a,b,$,y,h[f+13],4,681279174),y=o(y,a,b,$,h[f+0],11,3936430074),$=o($,y,a,b,h[f+3],16,3572445317),b=o(b,$,y,a,h[f+6],23,76029189),a=o(a,b,$,y,h[f+9],4,3654602809),y=o(y,a,b,$,h[f+12],11,3873151461),$=o($,y,a,b,h[f+15],16,530742520),a=c(a,b=o(b,$,y,a,h[f+2],23,3299628645),$,y,h[f+0],6,4096336452),y=c(y,a,b,$,h[f+7],10,1126891415),$=c($,y,a,b,h[f+14],15,2878612391),b=c(b,$,y,a,h[f+5],21,4237533241),a=c(a,b,$,y,h[f+12],6,1700485571),y=c(y,a,b,$,h[f+3],10,2399980690),$=c($,y,a,b,h[f+10],15,4293915773),b=c(b,$,y,a,h[f+1],21,2240044497),a=c(a,b,$,y,h[f+8],6,1873313359),y=c(y,a,b,$,h[f+15],10,4264355552),$=c($,y,a,b,h[f+6],15,2734768916),b=c(b,$,y,a,h[f+13],21,1309151649),a=c(a,b,$,y,h[f+4],6,4149444226),y=c(y,a,b,$,h[f+11],10,3174756917),$=c($,y,a,b,h[f+2],15,718787259),b=c(b,$,y,a,h[f+9],21,3951481745),a=n(a,_),b=n(b,m),$=n($,v),y=n(y,T);return(d(a)+d(b)+d($)+d(y)).toLowerCase()},t.closeMediaStream=function(e){if(e)try{if(e.getTracks){var t,n=l(e.getTracks());try{for(n.s();!(t=n.n()).done;){t.value.stop()}}catch(e){n.e(e)}finally{n.f()}}else{var o,c=l(e.getAudioTracks());try{for(c.s();!(o=c.n()).done;){o.value.stop()}}catch(e){c.e(e)}finally{c.f()}var d,h=l(e.getVideoTracks());try{for(h.s();!(d=h.n()).done;){d.value.stop()}}catch(e){h.e(e)}finally{h.f()}}}catch(t){"function"!=typeof e.stop&&"object"!==r(e.stop)||e.stop()}},t.cloneArray=function(e){return e&&e.slice()||[]},t.cloneObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.assign({},e)||t}},298:function(e,t,n){"use strict";var r,l="object"==typeof Reflect?Reflect:null,o=l&&"function"==typeof l.apply?l.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=l&&"function"==typeof l.ownKeys?l.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var c=Number.isNaN||function(e){return e!=e};function d(){d.init.call(this)}e.exports=d,e.exports.once=function(e,t){return new Promise((function(n,r){function l(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",l),n([].slice.call(arguments))}A(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&A(e,"error",t,n)}(e,l,{once:!0})}))},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var h=10;function f(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _(e){return void 0===e._maxListeners?d.defaultMaxListeners:e._maxListeners}function m(e,t,n,r){var l,o,c,d;if(f(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),c=o[t]),void 0===c)c=o[t]=n,++e._eventsCount;else if("function"==typeof c?c=o[t]=r?[n,c]:[c,n]:r?c.unshift(n):c.push(n),(l=_(e))>0&&c.length>l&&!c.warned){c.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=c.length,d=h,console&&console.warn&&console.warn(d)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},l=v.bind(r);return l.listener=n,r.wrapFn=l,l}function $(e,t,n){var r=e._events;if(void 0===r)return[];var l=r[t];return void 0===l?[]:"function"==typeof l?n?[l.listener||l]:[l]:n?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(l):C(l,l.length)}function y(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function C(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function A(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function l(o){r.once&&e.removeEventListener(t,l),n(o)}))}}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e||e<0||c(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");h=e}}),d.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||c(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},d.prototype.getMaxListeners=function(){return _(this)},d.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var c=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw c.context=l,c}var d=r[e];if(void 0===d)return!1;if("function"==typeof d)o(d,this,t);else{var h=d.length,f=C(d,h);for(i=0;i<h;++i)o(f[i],this,t)}return!0},d.prototype.addListener=function(e,t){return m(this,e,t,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(e,t){return m(this,e,t,!0)},d.prototype.once=function(e,t){return f(t),this.on(e,T(this,e,t)),this},d.prototype.prependOnceListener=function(e,t){return f(t),this.prependListener(e,T(this,e,t)),this},d.prototype.removeListener=function(e,t){var n,r,l,i,o;if(f(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(l=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,l=i;break}if(l<0)return this;0===l?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,l),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,l=Object.keys(n);for(i=0;i<l.length;++i)"removeListener"!==(r=l[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},d.prototype.listeners=function(e){return $(this,e,!0)},d.prototype.rawListeners=function(e){return $(this,e,!1)},d.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},d.prototype.listenerCount=y,d.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},299:function(e,t,n){const r=n(318);e.exports={USER_AGENT:`${r.title} ${r.version}`,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},300:function(e,t,n){"use strict";e.exports=function(){function e(s){return'"'+s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(input,t){var r={CRLF:h,DIGIT:f,ALPHA:_,HEXDIG:m,WSP:v,OCTET:T,DQUOTE:$,SP:y,HTAB:C,alphanum:A,reserved:E,unreserved:S,mark:R,escaped:I,LWS:w,SWS:O,HCOLON:N,TEXT_UTF8_TRIM:D,TEXT_UTF8char:P,UTF8_NONASCII:x,UTF8_CONT:U,LHEX:function(){var e;null===(e=f())&&(/^[a-f]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[a-f]")));return e},token:M,token_nodot:k,separators:function(){var e;40===input.charCodeAt(l)?(e="(",l++):(e=null,d('"("'));null===e&&(41===input.charCodeAt(l)?(e=")",l++):(e=null,d('")"')),null===e&&(60===input.charCodeAt(l)?(e="<",l++):(e=null,d('"<"')),null===e&&(62===input.charCodeAt(l)?(e=">",l++):(e=null,d('">"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","')),null===e&&(59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(92===input.charCodeAt(l)?(e="\\",l++):(e=null,d('"\\\\"')),null===e&&null===(e=$())&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null===e&&(93===input.charCodeAt(l)?(e="]",l++):(e=null,d('"]"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(123===input.charCodeAt(l)?(e="{",l++):(e=null,d('"{"')),null===e&&(125===input.charCodeAt(l)?(e="}",l++):(e=null,d('"}"')),null===e&&null===(e=y())&&(e=C()))))))))))))))));return e},word:L,STAR:H,SLASH:F,EQUAL:j,LPAREN:G,RPAREN:B,RAQUOT:V,LAQUOT:W,COMMA:K,SEMI:Y,COLON:z,LDQUOT:X,RDQUOT:J,comment:function e(){var t,n,r,o;if(o=l,null!==(t=G())){for(n=[],null===(r=Q())&&null===(r=ne())&&(r=e());null!==r;)n.push(r),null===(r=Q())&&null===(r=ne())&&(r=e());null!==n&&null!==(r=B())?t=[t,n,r]:(t=null,l=o)}else t=null,l=o;return t},ctext:Q,quoted_string:Z,quoted_string_clean:ee,qdtext:te,quoted_pair:ne,SIP_URI_noparams:re,SIP_URI:le,uri_scheme:se,uri_scheme_sips:ie,uri_scheme_sip:oe,userinfo:ue,user:ae,user_unreserved:ce,password:de,hostport:he,host:fe,hostname:_e,domainlabel:pe,toplabel:me,IPv6reference:ge,IPv6address:ve,h16:Te,ls32:$e,IPv4address:ye,dec_octet:Ce,port:Ae,uri_parameters:Ee,uri_parameter:Se,transport_param:be,user_param:Re,method_param:Ie,ttl_param:we,maddr_param:Oe,lr_param:Ne,other_param:De,pname:Pe,pvalue:xe,paramchar:Ue,param_unreserved:Me,headers:ke,header:Le,hname:qe,hvalue:He,hnv_unreserved:Fe,Request_Response:function(){var e;null===(e=Tt())&&(e=je());return e},Request_Line:je,Request_URI:Ge,absoluteURI:Be,hier_part:Ve,net_path:We,abs_path:Ke,opaque_part:Ye,uric:ze,uric_no_slash:Xe,path_segments:Je,segment:Qe,param:Ze,pchar:et,scheme:tt,authority:nt,srvr:lt,reg_name:st,query:it,SIP_Version:ot,INVITEm:ut,ACKm:at,OPTIONSm:ct,BYEm:ht,CANCELm:ft,REGISTERm:_t,SUBSCRIBEm:pt,NOTIFYm:mt,REFERm:gt,Method:vt,Status_Line:Tt,Status_Code:$t,extension_code:yt,Reason_Phrase:Ct,Allow_Events:function(){var e,t,n,r,o,c;if(o=l,null!==(e=Wt())){for(t=[],c=l,null!==(n=K())&&null!==(r=Wt())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=Wt())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Call_ID:function(){var e,t,n,r,o,c;r=l,o=l,null!==(e=L())?(c=l,64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null!==t&&null!==(n=L())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o);null!==e&&(e=function(e){data=input.substring(l,e)}(r));null===e&&(l=r);return e},Contact:function(){var e,t,n,r,o,c,d;if(o=l,null===(e=H()))if(c=l,null!==(e=At())){for(t=[],d=l,null!==(n=K())&&null!==(r=At())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=K())&&null!==(r=At())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t,n;for(n=data.multi_header.length,t=0;t<n;t++)if(null===data.multi_header[t].parsed){data=null;break}data=null!==data?data.multi_header:-1}());null===e&&(l=o);return e},contact_param:At,name_addr:Et,display_name:St,contact_params:bt,c_p_q:Rt,c_p_expires:It,delta_seconds:wt,qvalue:Ot,generic_param:Nt,gen_value:Dt,Content_Disposition:function(){var e,t,n,r,o,c;if(o=l,null!==(e=Pt())){for(t=[],c=l,null!==(n=Y())&&null!==(r=xt())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=xt())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},disp_type:Pt,disp_param:xt,handling_param:Ut,Content_Encoding:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Content_Length:function(){var e,t,n;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;null!==e&&(e=void(data=parseInt(e.join(""))));null===e&&(l=n);return e},Content_Type:function(){var e,t;t=l,null!==(e=Mt())&&(e=function(e){data=input.substring(l,e)}(t));null===e&&(l=t);return e},media_type:Mt,m_type:kt,discrete_type:Lt,composite_type:qt,extension_token:Ht,x_token:Ft,m_subtype:jt,m_parameter:Gt,m_value:Bt,CSeq:function(){var e,t,n,r;r=l,null!==(e=Vt())&&null!==(t=w())&&null!==(n=vt())?e=[e,t,n]:(e=null,l=r);return e},CSeq_value:Vt,Expires:function(){var e,t;t=l,null!==(e=wt())&&(e=void(data=e));null===e&&(l=t);return e},Event:function(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(e=Wt())){for(t=[],d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(h=e[0],e=void(data.event=h.join("").toLowerCase()));var h;null===e&&(l=o);return e},event_type:Wt,From:function(){var e,t,n,r,o,c,d;o=l,c=l,null===(e=re())&&(e=Et());if(null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=Kt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Kt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t=data.tag;try{data=new Yn(data.uri,data.display_name,data.params),t&&data.setParam("tag",t)}catch(e){data=-1}}());null===e&&(l=o);return e},from_param:Kt,tag_param:Yt,Max_Forwards:function(){var e,t,n;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;null!==e&&(e=void(data=parseInt(e.join(""))));null===e&&(l=n);return e},Min_Expires:function(){var e,t;t=l,null!==(e=wt())&&(e=void(data=e));null===e&&(l=t);return e},Name_Addr_Header:function(){var e,t,n,r,o,c,d,h,f,_;h=l,f=l,e=[],t=St();for(;null!==t;)e.push(t),t=St();if(null!==e)if(null!==(t=W()))if(null!==(n=le()))if(null!==(r=V())){for(o=[],_=l,null!==(c=Y())&&null!==(d=Nt())?c=[c,d]:(c=null,l=_);null!==c;)o.push(c),_=l,null!==(c=Y())&&null!==(d=Nt())?c=[c,d]:(c=null,l=_);null!==o?e=[e,t,n,r,o]:(e=null,l=f)}else e=null,l=f;else e=null,l=f;else e=null,l=f;else e=null,l=f;null!==e&&(e=function(e){try{data=new Yn(data.uri,data.display_name,data.params)}catch(e){data=-1}}());null===e&&(l=h);return e},Proxy_Authenticate:function(){return zt()},challenge:zt,other_challenge:Xt,auth_param:Jt,digest_cln:Qt,realm:Zt,realm_value:en,domain:tn,URI:nn,nonce:rn,nonce_value:ln,opaque:sn,stale:on,algorithm:un,qop_options:an,qop_value:cn,Proxy_Require:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Record_Route:function(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(e=dn())){for(t=[],d=l,null!==(n=K())&&null!==(r=dn())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=K())&&null!==(r=dn())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t,n;for(n=data.multi_header.length,t=0;t<n;t++)if(null===data.multi_header[t].parsed){data=null;break}data=null!==data?data.multi_header:-1}());null===e&&(l=o);return e},rec_route:dn,Reason:function(){var e,t,n,r,o,c,h;o=l,c=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"SIP"'));null===e&&(e=M());if(null!==e){for(t=[],h=l,null!==(n=Y())&&null!==(r=hn())?n=[n,r]:(n=null,l=h);null!==n;)t.push(n),h=l,null!==(n=Y())&&null!==(r=hn())?n=[n,r]:(n=null,l=h);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e,t){if(data.protocol=t.toLowerCase(),data.params||(data.params={}),data.params.text&&'"'===data.params.text[0]){var text=data.params.text;data.text=text.substring(1,text.length-1),delete data.params.text}}(0,e[0]));null===e&&(l=o);return e},reason_param:hn,reason_cause:fn,Require:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Route:function(){var e,t,n,r,o,c;if(o=l,null!==(e=_n())){for(t=[],c=l,null!==(n=K())&&null!==(r=_n())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=_n())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},route_param:_n,Subscription_State:function(){var e,t,n,r,o,c;if(o=l,null!==(e=pn())){for(t=[],c=l,null!==(n=Y())&&null!==(r=mn())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=mn())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},substate_value:pn,subexp_params:mn,event_reason_value:gn,Subject:function(){var e;return e=null!==(e=D())?e:""},Supported:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e=null!==e?e:""},To:function(){var e,t,n,r,o,c,d;o=l,c=l,null===(e=re())&&(e=Et());if(null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=vn())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=vn())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t=data.tag;try{data=new Yn(data.uri,data.display_name,data.params),t&&data.setParam("tag",t)}catch(e){data=-1}}());null===e&&(l=o);return e},to_param:vn,Via:function(){var e,t,n,r,o,c;if(o=l,null!==(e=Tn())){for(t=[],c=l,null!==(n=K())&&null!==(r=Tn())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=Tn())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},via_param:Tn,via_params:$n,via_ttl:yn,via_maddr:Cn,via_received:An,via_branch:En,response_port:Sn,rport:bn,sent_protocol:Rn,protocol_name:In,transport:wn,sent_by:On,via_host:Nn,via_port:Dn,ttl:Pn,WWW_Authenticate:function(){return zt()},Session_Expires:function(){var e,t,n,r,o,c;if(o=l,null!==(e=xn())){for(t=[],c=l,null!==(n=Y())&&null!==(r=Un())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=Un())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},s_e_expires:xn,s_e_params:Un,s_e_refresher:Mn,extension_header:function(){var e,t,n,r;r=l,null!==(e=M())&&null!==(t=N())&&null!==(n=kn())?e=[e,t,n]:(e=null,l=r);return e},header_value:kn,message_body:function(){var e,t;e=[],t=T();for(;null!==t;)e.push(t),t=T();return e},uuid_URI:function(){var e,t,n;n=l,"uuid:"===input.substr(l,5)?(e="uuid:",l+=5):(e=null,d('"uuid:"'));null!==e&&null!==(t=Ln())?e=[e,t]:(e=null,l=n);return e},uuid:Ln,hex4:qn,hex8:Hn,hex12:Fn,Refer_To:function(){var e,t,n,r,o,c,d;o=l,c=l,null===(e=re())&&(e=Et());if(null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){try{data=new Yn(data.uri,data.display_name,data.params)}catch(e){data=-1}}());null===e&&(l=o);return e},Replaces:function(){var e,t,n,r,o,c;if(o=l,null!==(e=jn())){for(t=[],c=l,null!==(n=Y())&&null!==(r=Gn())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=Gn())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},call_id:jn,replaces_param:Gn,to_tag:Bn,from_tag:Vn,early_flag:Wn};if(void 0!==t){if(void 0===r[t])throw new Error("Invalid rule name: "+e(t)+".")}else t="CRLF";var l=0,o=0,c=[];function d(e){l<o||(l>o&&(o=l,c=[]),c.push(e))}function h(){var e;return"\r\n"===input.substr(l,2)?(e="\r\n",l+=2):(e=null,d('"\\r\\n"')),e}function f(){var e;return/^[0-9]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[0-9]")),e}function _(){var e;return/^[a-zA-Z]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[a-zA-Z]")),e}function m(){var e;return/^[0-9a-fA-F]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[0-9a-fA-F]")),e}function v(){var e;return null===(e=y())&&(e=C()),e}function T(){var e;return/^[\0-\xFF]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\0-\\xFF]")),e}function $(){var e;return/^["]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d('["]')),e}function y(){var e;return 32===input.charCodeAt(l)?(e=" ",l++):(e=null,d('" "')),e}function C(){var e;return 9===input.charCodeAt(l)?(e="\t",l++):(e=null,d('"\\t"')),e}function A(){var e;return/^[a-zA-Z0-9]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[a-zA-Z0-9]")),e}function E(){var e;return 59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","'))))))))))),e}function S(){var e;return null===(e=A())&&(e=R()),e}function R(){var e;return 45===input.charCodeAt(l)?(e="-",l++):(e=null,d('"-"')),null===e&&(95===input.charCodeAt(l)?(e="_",l++):(e=null,d('"_"')),null===e&&(46===input.charCodeAt(l)?(e=".",l++):(e=null,d('"."')),null===e&&(33===input.charCodeAt(l)?(e="!",l++):(e=null,d('"!"')),null===e&&(126===input.charCodeAt(l)?(e="~",l++):(e=null,d('"~"')),null===e&&(42===input.charCodeAt(l)?(e="*",l++):(e=null,d('"*"')),null===e&&(39===input.charCodeAt(l)?(e="'",l++):(e=null,d('"\'"')),null===e&&(40===input.charCodeAt(l)?(e="(",l++):(e=null,d('"("')),null===e&&(41===input.charCodeAt(l)?(e=")",l++):(e=null,d('")"')))))))))),e}function I(){var e,t,n,r,o;return r=l,o=l,37===input.charCodeAt(l)?(e="%",l++):(e=null,d('"%"')),null!==e&&null!==(t=m())&&null!==(n=m())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=e.join("")),null===e&&(l=r),e}function w(){var e,t,n,r,o,c;for(r=l,o=l,c=l,e=[],t=v();null!==t;)e.push(t),t=v();if(null!==e&&null!==(t=h())?e=[e,t]:(e=null,l=c),null!==(e=null!==e?e:"")){if(null!==(n=v()))for(t=[];null!==n;)t.push(n),n=v();else t=null;null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return null!==e&&(e=" "),null===e&&(l=r),e}function O(){var e;return e=null!==(e=w())?e:""}function N(){var e,t,n,r,o;for(r=l,o=l,e=[],null===(t=y())&&(t=C());null!==t;)e.push(t),null===(t=y())&&(t=C());return null!==e?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=":"),null===e&&(l=r),e}function D(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(t=P()))for(e=[];null!==t;)e.push(t),t=P();else e=null;if(null!==e){for(t=[],d=l,n=[],r=w();null!==r;)n.push(r),r=w();for(null!==n&&null!==(r=P())?n=[n,r]:(n=null,l=d);null!==n;){for(t.push(n),d=l,n=[],r=w();null!==r;)n.push(r),r=w();null!==n&&null!==(r=P())?n=[n,r]:(n=null,l=d)}null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null!==e&&(e=function(e){return input.substring(l,e)}(o)),null===e&&(l=o),e}function P(){var e;return/^[!-~]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[!-~]")),null===e&&(e=x()),e}function x(){var e;return/^[\x80-\uFFFF]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\x80-\\uFFFF]")),e}function U(){var e;return/^[\x80-\xBF]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\x80-\\xBF]")),e}function M(){var e,t,n;if(n=l,null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')))))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"'))))))))))));else e=null;return null!==e&&(e=function(e){return input.substring(l,e)}(n)),null===e&&(l=n),e}function k(){var e,t,n;if(n=l,null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')))))))))));else e=null;return null!==e&&(e=function(e){return input.substring(l,e)}(n)),null===e&&(l=n),e}function L(){var e,t,n;if(n=l,null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')),null===t&&(40===input.charCodeAt(l)?(t="(",l++):(t=null,d('"("')),null===t&&(41===input.charCodeAt(l)?(t=")",l++):(t=null,d('")"')),null===t&&(60===input.charCodeAt(l)?(t="<",l++):(t=null,d('"<"')),null===t&&(62===input.charCodeAt(l)?(t=">",l++):(t=null,d('">"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(92===input.charCodeAt(l)?(t="\\",l++):(t=null,d('"\\\\"')),null===t&&null===(t=$())&&(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null===t&&(91===input.charCodeAt(l)?(t="[",l++):(t=null,d('"["')),null===t&&(93===input.charCodeAt(l)?(t="]",l++):(t=null,d('"]"')),null===t&&(63===input.charCodeAt(l)?(t="?",l++):(t=null,d('"?"')),null===t&&(123===input.charCodeAt(l)?(t="{",l++):(t=null,d('"{"')),null===t&&(125===input.charCodeAt(l)?(t="}",l++):(t=null,d('"}"')))))))))))))))))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')),null===t&&(40===input.charCodeAt(l)?(t="(",l++):(t=null,d('"("')),null===t&&(41===input.charCodeAt(l)?(t=")",l++):(t=null,d('")"')),null===t&&(60===input.charCodeAt(l)?(t="<",l++):(t=null,d('"<"')),null===t&&(62===input.charCodeAt(l)?(t=">",l++):(t=null,d('">"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(92===input.charCodeAt(l)?(t="\\",l++):(t=null,d('"\\\\"')),null===t&&null===(t=$())&&(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null===t&&(91===input.charCodeAt(l)?(t="[",l++):(t=null,d('"["')),null===t&&(93===input.charCodeAt(l)?(t="]",l++):(t=null,d('"]"')),null===t&&(63===input.charCodeAt(l)?(t="?",l++):(t=null,d('"?"')),null===t&&(123===input.charCodeAt(l)?(t="{",l++):(t=null,d('"{"')),null===t&&(125===input.charCodeAt(l)?(t="}",l++):(t=null,d('"}"'))))))))))))))))))))))));else e=null;return null!==e&&(e=function(e){return input.substring(l,e)}(n)),null===e&&(l=n),e}function H(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="*"),null===e&&(l=r),e}function F(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="/"),null===e&&(l=r),e}function j(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="="),null===e&&(l=r),e}function G(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(40===input.charCodeAt(l)?(t="(",l++):(t=null,d('"("')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="("),null===e&&(l=r),e}function B(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(41===input.charCodeAt(l)?(t=")",l++):(t=null,d('")"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=")"),null===e&&(l=r),e}function V(){var e,t,n,r;return n=l,r=l,62===input.charCodeAt(l)?(e=">",l++):(e=null,d('">"')),null!==e&&null!==(t=O())?e=[e,t]:(e=null,l=r),null!==e&&(e=">"),null===e&&(l=n),e}function W(){var e,t,n,r;return n=l,r=l,null!==(e=O())?(60===input.charCodeAt(l)?(t="<",l++):(t=null,d('"<"')),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==e&&(e="<"),null===e&&(l=n),e}function K(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=","),null===e&&(l=r),e}function Y(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=";"),null===e&&(l=r),e}function z(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=":"),null===e&&(l=r),e}function X(){var e,t,n,r;return n=l,r=l,null!==(e=O())&&null!==(t=$())?e=[e,t]:(e=null,l=r),null!==e&&(e='"'),null===e&&(l=n),e}function J(){var e,t,n,r;return n=l,r=l,null!==(e=$())&&null!==(t=O())?e=[e,t]:(e=null,l=r),null!==e&&(e='"'),null===e&&(l=n),e}function Q(){var e;return/^[!-']/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[!-']")),null===e&&(/^[*-[]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[*-[]")),null===e&&(/^[\]-~]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\]-~]")),null===e&&null===(e=x())&&(e=w()))),e}function Z(){var e,t,n,r,o,c;if(o=l,c=l,null!==(e=O()))if(null!==(t=$())){for(n=[],null===(r=te())&&(r=ne());null!==r;)n.push(r),null===(r=te())&&(r=ne());null!==n&&null!==(r=$())?e=[e,t,n,r]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return null!==e&&(e=function(e){return input.substring(l,e)}(o)),null===e&&(l=o),e}function ee(){var e,t,n,r,o,c;if(o=l,c=l,null!==(e=O()))if(null!==(t=$())){for(n=[],null===(r=te())&&(r=ne());null!==r;)n.push(r),null===(r=te())&&(r=ne());null!==n&&null!==(r=$())?e=[e,t,n,r]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return null!==e&&(e=function(e){var t=input.substring(l,e).trim();return t.substring(1,t.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(o)),null===e&&(l=o),e}function te(){var e;return null===(e=w())&&(33===input.charCodeAt(l)?(e="!",l++):(e=null,d('"!"')),null===e&&(/^[#-[]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[#-[]")),null===e&&(/^[\]-~]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\]-~]")),null===e&&(e=x())))),e}function ne(){var e,t,n;return n=l,92===input.charCodeAt(l)?(e="\\",l++):(e=null,d('"\\\\"')),null!==e?(/^[\0-\t]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[\\0-\\t]")),null===t&&(/^[\x0B-\f]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[\\x0B-\\f]")),null===t&&(/^[\x0E-]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[\\x0E-]")))),null!==t?e=[e,t]:(e=null,l=n)):(e=null,l=n),e}function re(){var e,t,n,r,o,c;return o=l,c=l,null!==(e=se())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=null!==(n=ue())?n:"")&&null!==(r=he())?e=[e,t,n,r]:(e=null,l=c)):(e=null,l=c),null!==e&&(e=function(e){try{data.uri=new Kn(data.scheme,data.user,data.host,data.port),delete data.scheme,delete data.user,delete data.host,delete data.host_type,delete data.port}catch(e){data=-1}}()),null===e&&(l=o),e}function le(){var e,n,r,o,c,h,f,_;return f=l,_=l,null!==(e=se())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=null!==(r=ue())?r:"")&&null!==(o=he())&&null!==(c=Ee())&&null!==(h=null!==(h=ke())?h:"")?e=[e,n,r,o,c,h]:(e=null,l=_)):(e=null,l=_),null!==e&&(e=function(e){try{data.uri=new Kn(data.scheme,data.user,data.host,data.port,data.uri_params,data.uri_headers),delete data.scheme,delete data.user,delete data.host,delete data.host_type,delete data.port,delete data.uri_params,"SIP_URI"===t&&(data=data.uri)}catch(e){data=-1}}()),null===e&&(l=f),e}function se(){var e;return null===(e=ie())&&(e=oe()),e}function ie(){var e,t,n;return t=l,"sips"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"sips"')),null!==e&&(n=e,e=void(data.scheme=n.toLowerCase())),null===e&&(l=t),e}function oe(){var e,t,n;return t=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"sip"')),null!==e&&(n=e,e=void(data.scheme=n.toLowerCase())),null===e&&(l=t),e}function ue(){var e,t,n,r,o,c;return r=l,o=l,null!==(e=ae())?(c=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=de())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?(64===input.charCodeAt(l)?(n="@",l++):(n=null,d('"@"')),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){data.user=decodeURIComponent(input.substring(l-1,e))}(r)),null===e&&(l=r),e}function ae(){var e,t;if(null===(t=S())&&null===(t=I())&&(t=ce()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=S())&&null===(t=I())&&(t=ce());else e=null;return e}function ce(){var e;return 38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","')),null===e&&(59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"'))))))))),e}function de(){var e,t,n;for(n=l,e=[],null===(t=S())&&null===(t=I())&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')))))));null!==t;)e.push(t),null===(t=S())&&null===(t=I())&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')))))));return null!==e&&(e=function(e){data.password=input.substring(l,e)}(n)),null===e&&(l=n),e}function he(){var e,t,n,r,o;return r=l,null!==(e=fe())?(o=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Ae())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function fe(){var e,t;return t=l,null===(e=_e())&&null===(e=ye())&&(e=ge()),null!==e&&(e=function(e){return data.host=input.substring(l,e).toLowerCase(),data.host}(t)),null===e&&(l=t),e}function _e(){var e,t,n,r,o,c;for(r=l,o=l,e=[],c=l,null!==(t=pe())?(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n?t=[t,n]:(t=null,l=c)):(t=null,l=c);null!==t;)e.push(t),c=l,null!==(t=pe())?(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n?t=[t,n]:(t=null,l=c)):(t=null,l=c);return null!==e&&null!==(t=me())?(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==(n=null!==n?n:"")?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){return data.host_type="domain",input.substring(l,e)}(r)),null===e&&(l=r),e}function pe(){var e,t,n,r;if(r=l,null!==(e=A())){for(t=[],null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==n;)t.push(n),null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==t?e=[e,t]:(e=null,l=r)}else e=null,l=r;return e}function me(){var e,t,n,r;if(r=l,null!==(e=_())){for(t=[],null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==n;)t.push(n),null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==t?e=[e,t]:(e=null,l=r)}else e=null,l=r;return e}function ge(){var e,t,n,r,o;return r=l,o=l,91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null!==e&&null!==(t=ve())?(93===input.charCodeAt(l)?(n="]",l++):(n=null,d('"]"')),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){return data.host_type="IPv6",input.substring(l,e)}(r)),null===e&&(l=r),e}function ve(){var e,t,n,r,o,c,h,f,_,m,v,T,$,y,C,A;return y=l,C=l,null!==(e=Te())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?(58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?(58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?(58===input.charCodeAt(l)?(f=":",l++):(f=null,d('":"')),null!==f&&null!==(_=Te())?(58===input.charCodeAt(l)?(m=":",l++):(m=null,d('":"')),null!==m&&null!==(v=Te())?(58===input.charCodeAt(l)?(T=":",l++):(T=null,d('":"')),null!==T&&null!==($=$e())?e=[e,t,n,r,o,c,h,f,_,m,v,T,$]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?(58===input.charCodeAt(l)?(_=":",l++):(_=null,d('":"')),null!==_&&null!==(m=Te())?(58===input.charCodeAt(l)?(v=":",l++):(v=null,d('":"')),null!==v&&null!==(T=$e())?e=[e,t,n,r,o,c,h,f,_,m,v,T]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?(58===input.charCodeAt(l)?(_=":",l++):(_=null,d('":"')),null!==_&&null!==(m=$e())?e=[e,t,n,r,o,c,h,f,_,m]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=$e())?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=$e())?e=[e,t,n,r,o,c]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=$e())?e=[e,t,n,r]:(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=$e())?e=[e,t]:(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?e=[e,t]:(e=null,l=C),null===e&&(C=l,null!==(e=Te())?("::"===input.substr(l,2)?(t="::",l+=2):(t=null,d('"::"')),null!==t&&null!==(n=Te())?(58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?(58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?(58===input.charCodeAt(l)?(f=":",l++):(f=null,d('":"')),null!==f&&null!==(_=Te())?(58===input.charCodeAt(l)?(m=":",l++):(m=null,d('":"')),null!==m&&null!==(v=$e())?e=[e,t,n,r,o,c,h,f,_,m,v]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?("::"===input.substr(l,2)?(n="::",l+=2):(n=null,d('"::"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?(58===input.charCodeAt(l)?(_=":",l++):(_=null,d('":"')),null!==_&&null!==(m=$e())?e=[e,t,n,r,o,c,h,f,_,m]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?("::"===input.substr(l,2)?(r="::",l+=2):(r=null,d('"::"')),null!==r&&null!==(o=Te())?(58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?(58===input.charCodeAt(l)?(f=":",l++):(f=null,d('":"')),null!==f&&null!==(_=$e())?e=[e,t,n,r,o,c,h,f,_]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?("::"===input.substr(l,2)?(o="::",l+=2):(o=null,d('"::"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=$e())?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?(A=l,58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?o=[o,c]:(o=null,l=A),null!==(o=null!==o?o:"")?("::"===input.substr(l,2)?(c="::",l+=2):(c=null,d('"::"')),null!==c&&null!==(h=$e())?e=[e,t,n,r,o,c,h]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?(A=l,58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?o=[o,c]:(o=null,l=A),null!==(o=null!==o?o:"")?(A=l,58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?c=[c,h]:(c=null,l=A),null!==(c=null!==c?c:"")?("::"===input.substr(l,2)?(h="::",l+=2):(h=null,d('"::"')),null!==h&&null!==(f=Te())?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?(A=l,58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?o=[o,c]:(o=null,l=A),null!==(o=null!==o?o:"")?(A=l,58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?c=[c,h]:(c=null,l=A),null!==(c=null!==c?c:"")?(A=l,58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?h=[h,f]:(h=null,l=A),null!==(h=null!==h?h:"")?("::"===input.substr(l,2)?(f="::",l+=2):(f=null,d('"::"')),null!==f?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C))))))))))))))),null!==e&&(e=function(e){return data.host_type="IPv6",input.substring(l,e)}(y)),null===e&&(l=y),e}function Te(){var e,t,n,r,o;return o=l,null!==(e=m())&&null!==(t=null!==(t=m())?t:"")&&null!==(n=null!==(n=m())?n:"")&&null!==(r=null!==(r=m())?r:"")?e=[e,t,n,r]:(e=null,l=o),e}function $e(){var e,t,n,r;return r=l,null!==(e=Te())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),null===e&&(e=ye()),e}function ye(){var e,t,n,r,o,c,h,f,_;return f=l,_=l,null!==(e=Ce())?(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null!==t&&null!==(n=Ce())?(46===input.charCodeAt(l)?(r=".",l++):(r=null,d('"."')),null!==r&&null!==(o=Ce())?(46===input.charCodeAt(l)?(c=".",l++):(c=null,d('"."')),null!==c&&null!==(h=Ce())?e=[e,t,n,r,o,c,h]:(e=null,l=_)):(e=null,l=_)):(e=null,l=_)):(e=null,l=_),null!==e&&(e=function(e){return data.host_type="IPv4",input.substring(l,e)}(f)),null===e&&(l=f),e}function Ce(){var e,t,n,r;return r=l,"25"===input.substr(l,2)?(e="25",l+=2):(e=null,d('"25"')),null!==e?(/^[0-5]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[0-5]")),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null===e&&(r=l,50===input.charCodeAt(l)?(e="2",l++):(e=null,d('"2"')),null!==e?(/^[0-4]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[0-4]")),null!==t&&null!==(n=f())?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),null===e&&(r=l,49===input.charCodeAt(l)?(e="1",l++):(e=null,d('"1"')),null!==e&&null!==(t=f())&&null!==(n=f())?e=[e,t,n]:(e=null,l=r),null===e&&(r=l,/^[1-9]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[1-9]")),null!==e&&null!==(t=f())?e=[e,t]:(e=null,l=r),null===e&&(e=f())))),e}function Ae(){var e,t,n,r,o,c,d,h;return c=l,d=l,null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?e=[e,t,n,r,o]:(e=null,l=d),null!==e&&(h=e,h=parseInt(h.join("")),data.port=h,e=h),null===e&&(l=c),e}function Ee(){var e,t,n,r;for(e=[],r=l,59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null!==t&&null!==(n=Se())?t=[t,n]:(t=null,l=r);null!==t;)e.push(t),r=l,59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null!==t&&null!==(n=Se())?t=[t,n]:(t=null,l=r);return e}function Se(){var e;return null===(e=be())&&null===(e=Re())&&null===(e=Ie())&&null===(e=we())&&null===(e=Oe())&&null===(e=Ne())&&(e=De()),e}function be(){var e,t,n,r,o;return n=l,r=l,"transport="===input.substr(l,10).toLowerCase()?(e=input.substr(l,10),l+=10):(e=null,d('"transport="')),null!==e?("udp"===input.substr(l,3).toLowerCase()?(t=input.substr(l,3),l+=3):(t=null,d('"udp"')),null===t&&("tcp"===input.substr(l,3).toLowerCase()?(t=input.substr(l,3),l+=3):(t=null,d('"tcp"')),null===t&&("sctp"===input.substr(l,4).toLowerCase()?(t=input.substr(l,4),l+=4):(t=null,d('"sctp"')),null===t&&("tls"===input.substr(l,3).toLowerCase()?(t=input.substr(l,3),l+=3):(t=null,d('"tls"')),null===t&&(t=M())))),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.transport=o.toLowerCase())),null===e&&(l=n),e}function Re(){var e,t,n,r,o;return n=l,r=l,"user="===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"user="')),null!==e?("phone"===input.substr(l,5).toLowerCase()?(t=input.substr(l,5),l+=5):(t=null,d('"phone"')),null===t&&("ip"===input.substr(l,2).toLowerCase()?(t=input.substr(l,2),l+=2):(t=null,d('"ip"')),null===t&&(t=M())),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.user=o.toLowerCase())),null===e&&(l=n),e}function Ie(){var e,t,n,r,o;return n=l,r=l,"method="===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"method="')),null!==e&&null!==(t=vt())?e=[e,t]:(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.method=o)),null===e&&(l=n),e}function we(){var e,t,n,r,o;return n=l,r=l,"ttl="===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"ttl="')),null!==e&&null!==(t=Pn())?e=[e,t]:(e=null,l=r),null!==e&&(o=e[1],data.params||(data.params={}),e=void(data.params.ttl=o)),null===e&&(l=n),e}function Oe(){var e,t,n,r,o;return n=l,r=l,"maddr="===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"maddr="')),null!==e&&null!==(t=fe())?e=[e,t]:(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.maddr=o)),null===e&&(l=n),e}function Ne(){var e,t,n,r,o,c;return r=l,o=l,"lr"===input.substr(l,2).toLowerCase()?(e=input.substr(l,2),l+=2):(e=null,d('"lr"')),null!==e?(c=l,61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=M())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(data.uri_params||(data.uri_params={}),e=void(data.uri_params.lr=void 0)),null===e&&(l=r),e}function De(){var e,t,n,r,o,c,param,h;return r=l,o=l,null!==(e=Pe())?(c=l,61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=xe())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(param=e[0],h=e[1],data.uri_params||(data.uri_params={}),h=void 0===h?void 0:h[1],e=void(data.uri_params[param.toLowerCase()]=h)),null===e&&(l=r),e}function Pe(){var e,t,n;if(n=l,null!==(t=Ue()))for(e=[];null!==t;)e.push(t),t=Ue();else e=null;return null!==e&&(e=e.join("")),null===e&&(l=n),e}function xe(){var e,t,n;if(n=l,null!==(t=Ue()))for(e=[];null!==t;)e.push(t),t=Ue();else e=null;return null!==e&&(e=e.join("")),null===e&&(l=n),e}function Ue(){var e;return null===(e=Me())&&null===(e=S())&&(e=I()),e}function Me(){var e;return 91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null===e&&(93===input.charCodeAt(l)?(e="]",l++):(e=null,d('"]"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')))))))),e}function ke(){var e,t,n,r,o,c,h;if(c=l,63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null!==e)if(null!==(t=Le())){for(n=[],h=l,38===input.charCodeAt(l)?(r="&",l++):(r=null,d('"&"')),null!==r&&null!==(o=Le())?r=[r,o]:(r=null,l=h);null!==r;)n.push(r),h=l,38===input.charCodeAt(l)?(r="&",l++):(r=null,d('"&"')),null!==r&&null!==(o=Le())?r=[r,o]:(r=null,l=h);null!==n?e=[e,t,n]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return e}function Le(){var e,t,n,r,o,c,h;return r=l,o=l,null!==(e=qe())?(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=He())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[0],h=e[2],c=c.join("").toLowerCase(),h=h.join(""),data.uri_headers||(data.uri_headers={}),e=void(data.uri_headers[c]?data.uri_headers[c].push(h):data.uri_headers[c]=[h])),null===e&&(l=r),e}function qe(){var e,t;if(null===(t=Fe())&&null===(t=S())&&(t=I()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=Fe())&&null===(t=S())&&(t=I());else e=null;return e}function He(){var e,t;for(e=[],null===(t=Fe())&&null===(t=S())&&(t=I());null!==t;)e.push(t),null===(t=Fe())&&null===(t=S())&&(t=I());return e}function Fe(){var e;return 91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null===e&&(93===input.charCodeAt(l)?(e="]",l++):(e=null,d('"]"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')))))))),e}function je(){var e,t,n,r,o,c;return c=l,null!==(e=vt())&&null!==(t=y())&&null!==(n=Ge())&&null!==(r=y())&&null!==(o=ot())?e=[e,t,n,r,o]:(e=null,l=c),e}function Ge(){var e;return null===(e=le())&&(e=Be()),e}function Be(){var e,t,n,r;return r=l,null!==(e=tt())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t?(null===(n=Ve())&&(n=Ye()),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r)):(e=null,l=r),e}function Ve(){var e,t,n,r,o;return r=l,null===(e=We())&&(e=Ke()),null!==e?(o=l,63===input.charCodeAt(l)?(t="?",l++):(t=null,d('"?"')),null!==t&&null!==(n=it())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function We(){var e,t,n,r;return r=l,"//"===input.substr(l,2)?(e="//",l+=2):(e=null,d('"//"')),null!==e&&null!==(t=nt())&&null!==(n=null!==(n=Ke())?n:"")?e=[e,t,n]:(e=null,l=r),e}function Ke(){var e,t,n;return n=l,47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null!==e&&null!==(t=Je())?e=[e,t]:(e=null,l=n),e}function Ye(){var e,t,n,r;if(r=l,null!==(e=Xe())){for(t=[],n=ze();null!==n;)t.push(n),n=ze();null!==t?e=[e,t]:(e=null,l=r)}else e=null,l=r;return e}function ze(){var e;return null===(e=E())&&null===(e=S())&&(e=I()),e}function Xe(){var e;return null===(e=S())&&null===(e=I())&&(59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","'))))))))))),e}function Je(){var e,t,n,r,o,c;if(o=l,null!==(e=Qe())){for(t=[],c=l,47===input.charCodeAt(l)?(n="/",l++):(n=null,d('"/"')),null!==n&&null!==(r=Qe())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,47===input.charCodeAt(l)?(n="/",l++):(n=null,d('"/"')),null!==n&&null!==(r=Qe())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function Qe(){var e,t,n,r,o,c;for(o=l,e=[],t=et();null!==t;)e.push(t),t=et();if(null!==e){for(t=[],c=l,59===input.charCodeAt(l)?(n=";",l++):(n=null,d('";"')),null!==n&&null!==(r=Ze())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,59===input.charCodeAt(l)?(n=";",l++):(n=null,d('";"')),null!==n&&null!==(r=Ze())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function Ze(){var e,t;for(e=[],t=et();null!==t;)e.push(t),t=et();return e}function et(){var e;return null===(e=S())&&null===(e=I())&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","'))))))))),e}function tt(){var e,t,n,r,o;if(r=l,o=l,null!==(e=_())){for(t=[],null===(n=_())&&null===(n=f())&&(43===input.charCodeAt(l)?(n="+",l++):(n=null,d('"+"')),null===n&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')))));null!==n;)t.push(n),null===(n=_())&&null===(n=f())&&(43===input.charCodeAt(l)?(n="+",l++):(n=null,d('"+"')),null===n&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')))));null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return null!==e&&(e=function(e){data.scheme=input.substring(l,e)}(r)),null===e&&(l=r),e}function nt(){var e;return null===(e=lt())&&(e=st()),e}function lt(){var e,t,n,r;return n=l,r=l,null!==(e=ue())?(64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==(e=null!==e?e:"")&&null!==(t=he())?e=[e,t]:(e=null,l=n),e=null!==e?e:""}function st(){var e,t;if(null===(t=S())&&null===(t=I())&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')),null===t&&(59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null===t&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=S())&&null===(t=I())&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')),null===t&&(59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null===t&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"'))))))))));else e=null;return e}function it(){var e,t;for(e=[],t=ze();null!==t;)e.push(t),t=ze();return e}function ot(){var e,t,n,r,o,c,h,_;if(h=l,_=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"SIP"')),null!==e)if(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null!==t){if(null!==(r=f()))for(n=[];null!==r;)n.push(r),r=f();else n=null;if(null!==n)if(46===input.charCodeAt(l)?(r=".",l++):(r=null,d('"."')),null!==r){if(null!==(c=f()))for(o=[];null!==c;)o.push(c),c=f();else o=null;null!==o?e=[e,t,n,r,o]:(e=null,l=_)}else e=null,l=_;else e=null,l=_}else e=null,l=_;else e=null,l=_;return null!==e&&(e=function(e){data.sip_version=input.substring(l,e)}(h)),null===e&&(l=h),e}function ut(){var e;return"INVITE"===input.substr(l,6)?(e="INVITE",l+=6):(e=null,d('"INVITE"')),e}function at(){var e;return"ACK"===input.substr(l,3)?(e="ACK",l+=3):(e=null,d('"ACK"')),e}function ct(){var e;return"OPTIONS"===input.substr(l,7)?(e="OPTIONS",l+=7):(e=null,d('"OPTIONS"')),e}function ht(){var e;return"BYE"===input.substr(l,3)?(e="BYE",l+=3):(e=null,d('"BYE"')),e}function ft(){var e;return"CANCEL"===input.substr(l,6)?(e="CANCEL",l+=6):(e=null,d('"CANCEL"')),e}function _t(){var e;return"REGISTER"===input.substr(l,8)?(e="REGISTER",l+=8):(e=null,d('"REGISTER"')),e}function pt(){var e;return"SUBSCRIBE"===input.substr(l,9)?(e="SUBSCRIBE",l+=9):(e=null,d('"SUBSCRIBE"')),e}function mt(){var e;return"NOTIFY"===input.substr(l,6)?(e="NOTIFY",l+=6):(e=null,d('"NOTIFY"')),e}function gt(){var e;return"REFER"===input.substr(l,5)?(e="REFER",l+=5):(e=null,d('"REFER"')),e}function vt(){var e,t;return t=l,null===(e=ut())&&null===(e=at())&&null===(e=ct())&&null===(e=ht())&&null===(e=ft())&&null===(e=_t())&&null===(e=pt())&&null===(e=mt())&&null===(e=gt())&&(e=M()),null!==e&&(e=function(e){return data.method=input.substring(l,e),data.method}(t)),null===e&&(l=t),e}function Tt(){var e,t,n,r,o,c;return c=l,null!==(e=ot())&&null!==(t=y())&&null!==(n=$t())&&null!==(r=y())&&null!==(o=Ct())?e=[e,t,n,r,o]:(e=null,l=c),e}function $t(){var e,t,n;return t=l,null!==(e=yt())&&(n=e,e=void(data.status_code=parseInt(n.join("")))),null===e&&(l=t),e}function yt(){var e,t,n,r;return r=l,null!==(e=f())&&null!==(t=f())&&null!==(n=f())?e=[e,t,n]:(e=null,l=r),e}function Ct(){var e,t,n;for(n=l,e=[],null===(t=E())&&null===(t=S())&&null===(t=I())&&null===(t=x())&&null===(t=U())&&null===(t=y())&&(t=C());null!==t;)e.push(t),null===(t=E())&&null===(t=S())&&null===(t=I())&&null===(t=x())&&null===(t=U())&&null===(t=y())&&(t=C());return null!==e&&(e=function(e){data.reason_phrase=input.substring(l,e)}(n)),null===e&&(l=n),e}function At(){var e,t,n,r,o,c,d;if(o=l,c=l,null===(e=re())&&(e=Et()),null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=bt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=bt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null!==e&&(e=function(e){var header;data.multi_header||(data.multi_header=[]);try{header=new Yn(data.uri,data.display_name,data.params),delete data.uri,delete data.display_name,delete data.params}catch(e){header=null}data.multi_header.push({possition:l,offset:e,parsed:header})}(o)),null===e&&(l=o),e}function Et(){var e,t,n,r,o;return o=l,null!==(e=null!==(e=St())?e:"")&&null!==(t=W())&&null!==(n=le())&&null!==(r=V())?e=[e,t,n,r]:(e=null,l=o),e}function St(){var e,t,n,r,o,c,d,h;if(o=l,c=l,null!==(e=M())){for(t=[],d=l,null!==(n=w())&&null!==(r=M())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=w())&&null!==(r=M())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null===e&&(e=ee()),null!==e&&(h=e,e=void(data.display_name="string"==typeof h?h:h[1].reduce((function(e,t){return e+t[0]+t[1]}),h[0]))),null===e&&(l=o),e}function bt(){var e;return null===(e=Rt())&&null===(e=It())&&(e=Nt()),e}function Rt(){var e,t,n,r,o,q;return r=l,o=l,"q"===input.substr(l,1).toLowerCase()?(e=input.substr(l,1),l++):(e=null,d('"q"')),null!==e&&null!==(t=j())&&null!==(n=Ot())?e=[e,t,n]:(e=null,l=o),null!==e&&(q=e[2],data.params||(data.params={}),e=void(data.params.q=q)),null===e&&(l=r),e}function It(){var e,t,n,r,o,c;return r=l,o=l,"expires"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"expires"')),null!==e&&null!==(t=j())&&null!==(n=wt())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],data.params||(data.params={}),e=void(data.params.expires=c)),null===e&&(l=r),e}function wt(){var e,t,n;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=parseInt(e.join(""))),null===e&&(l=n),e}function Ot(){var e,t,n,r,o,c,h,_;return c=l,h=l,48===input.charCodeAt(l)?(e="0",l++):(e=null,d('"0"')),null!==e?(_=l,46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null!==t&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?t=[t,n,r,o]:(t=null,l=_),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=h)):(e=null,l=h),null!==e&&(e=function(e){return parseFloat(input.substring(l,e))}(c)),null===e&&(l=c),e}function Nt(){var e,t,n,r,o,c,param,d;return r=l,o=l,null!==(e=M())?(c=l,null!==(t=j())&&null!==(n=Dt())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(param=e[0],d=e[1],data.params||(data.params={}),d=void 0===d?void 0:d[1],e=void(data.params[param.toLowerCase()]=d)),null===e&&(l=r),e}function Dt(){var e;return null===(e=M())&&null===(e=fe())&&(e=Z()),e}function Pt(){var e;return"render"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"render"')),null===e&&("session"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"session"')),null===e&&("icon"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"icon"')),null===e&&("alert"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"alert"')),null===e&&(e=M())))),e}function xt(){var e;return null===(e=Ut())&&(e=Nt()),e}function Ut(){var e,t,n,r;return r=l,"handling"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"handling"')),null!==e&&null!==(t=j())?("optional"===input.substr(l,8).toLowerCase()?(n=input.substr(l,8),l+=8):(n=null,d('"optional"')),null===n&&("required"===input.substr(l,8).toLowerCase()?(n=input.substr(l,8),l+=8):(n=null,d('"required"')),null===n&&(n=M())),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),e}function Mt(){var e,t,n,r,o,c,d,h;if(d=l,null!==(e=kt()))if(null!==(t=F()))if(null!==(n=jt())){for(r=[],h=l,null!==(o=Y())&&null!==(c=Gt())?o=[o,c]:(o=null,l=h);null!==o;)r.push(o),h=l,null!==(o=Y())&&null!==(c=Gt())?o=[o,c]:(o=null,l=h);null!==r?e=[e,t,n,r]:(e=null,l=d)}else e=null,l=d;else e=null,l=d;else e=null,l=d;return e}function kt(){var e;return null===(e=Lt())&&(e=qt()),e}function Lt(){var e;return"text"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"text"')),null===e&&("image"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"image"')),null===e&&("audio"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"audio"')),null===e&&("video"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"video"')),null===e&&("application"===input.substr(l,11).toLowerCase()?(e=input.substr(l,11),l+=11):(e=null,d('"application"')),null===e&&(e=Ht()))))),e}function qt(){var e;return"message"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"message"')),null===e&&("multipart"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"multipart"')),null===e&&(e=Ht())),e}function Ht(){var e;return null===(e=M())&&(e=Ft()),e}function Ft(){var e,t,n;return n=l,"x-"===input.substr(l,2).toLowerCase()?(e=input.substr(l,2),l+=2):(e=null,d('"x-"')),null!==e&&null!==(t=M())?e=[e,t]:(e=null,l=n),e}function jt(){var e;return null===(e=Ht())&&(e=M()),e}function Gt(){var e,t,n,r;return r=l,null!==(e=M())&&null!==(t=j())&&null!==(n=Bt())?e=[e,t,n]:(e=null,l=r),e}function Bt(){var e;return null===(e=M())&&(e=Z()),e}function Vt(){var e,t,n,r;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(r=e,e=void(data.value=parseInt(r.join("")))),null===e&&(l=n),e}function Wt(){var e,t,n,r,o,c;if(o=l,null!==(e=k())){for(t=[],c=l,46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n&&null!==(r=k())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n&&null!==(r=k())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function Kt(){var e;return null===(e=Yt())&&(e=Nt()),e}function Yt(){var e,t,n,r,o,c;return r=l,o=l,"tag"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"tag"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.tag=c)),null===e&&(l=r),e}function zt(){var e,t,n,r,o,c,h,f;if(h=l,"digest"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"Digest"')),null!==e)if(null!==(t=w()))if(null!==(n=Qt())){for(r=[],f=l,null!==(o=K())&&null!==(c=Qt())?o=[o,c]:(o=null,l=f);null!==o;)r.push(o),f=l,null!==(o=K())&&null!==(c=Qt())?o=[o,c]:(o=null,l=f);null!==r?e=[e,t,n,r]:(e=null,l=h)}else e=null,l=h;else e=null,l=h;else e=null,l=h;return null===e&&(e=Xt()),e}function Xt(){var e,t,n,r,o,c,d,h;if(d=l,null!==(e=M()))if(null!==(t=w()))if(null!==(n=Jt())){for(r=[],h=l,null!==(o=K())&&null!==(c=Jt())?o=[o,c]:(o=null,l=h);null!==o;)r.push(o),h=l,null!==(o=K())&&null!==(c=Jt())?o=[o,c]:(o=null,l=h);null!==r?e=[e,t,n,r]:(e=null,l=d)}else e=null,l=d;else e=null,l=d;else e=null,l=d;return e}function Jt(){var e,t,n,r;return r=l,null!==(e=M())&&null!==(t=j())?(null===(n=M())&&(n=Z()),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),e}function Qt(){var e;return null===(e=Zt())&&null===(e=tn())&&null===(e=rn())&&null===(e=sn())&&null===(e=on())&&null===(e=un())&&null===(e=an())&&(e=Jt()),e}function Zt(){var e,t,n,r;return r=l,"realm"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"realm"')),null!==e&&null!==(t=j())&&null!==(n=en())?e=[e,t,n]:(e=null,l=r),e}function en(){var e,t,n;return t=l,null!==(e=ee())&&(n=e,e=void(data.realm=n)),null===e&&(l=t),e}function tn(){var e,t,n,r,o,c,h,f,_;if(f=l,"domain"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"domain"')),null!==e)if(null!==(t=j()))if(null!==(n=X()))if(null!==(r=nn())){if(o=[],_=l,null!==(h=y()))for(c=[];null!==h;)c.push(h),h=y();else c=null;for(null!==c&&null!==(h=nn())?c=[c,h]:(c=null,l=_);null!==c;){if(o.push(c),_=l,null!==(h=y()))for(c=[];null!==h;)c.push(h),h=y();else c=null;null!==c&&null!==(h=nn())?c=[c,h]:(c=null,l=_)}null!==o&&null!==(c=J())?e=[e,t,n,r,o,c]:(e=null,l=f)}else e=null,l=f;else e=null,l=f;else e=null,l=f;else e=null,l=f;return e}function nn(){var e;return null===(e=Be())&&(e=Ke()),e}function rn(){var e,t,n,r;return r=l,"nonce"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"nonce"')),null!==e&&null!==(t=j())&&null!==(n=ln())?e=[e,t,n]:(e=null,l=r),e}function ln(){var e,t,n;return t=l,null!==(e=ee())&&(n=e,e=void(data.nonce=n)),null===e&&(l=t),e}function sn(){var e,t,n,r,o,c;return r=l,o=l,"opaque"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"opaque"')),null!==e&&null!==(t=j())&&null!==(n=ee())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.opaque=c)),null===e&&(l=r),e}function on(){var e,t,n,r,o;return r=l,"stale"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"stale"')),null!==e&&null!==(t=j())?(o=l,"true"===input.substr(l,4).toLowerCase()?(n=input.substr(l,4),l+=4):(n=null,d('"true"')),null!==n&&(n=void(data.stale=!0)),null===n&&(l=o),null===n&&(o=l,"false"===input.substr(l,5).toLowerCase()?(n=input.substr(l,5),l+=5):(n=null,d('"false"')),null!==n&&(n=void(data.stale=!1)),null===n&&(l=o)),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),e}function un(){var e,t,n,r,o,c;return r=l,o=l,"algorithm"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"algorithm"')),null!==e&&null!==(t=j())?("md5"===input.substr(l,3).toLowerCase()?(n=input.substr(l,3),l+=3):(n=null,d('"MD5"')),null===n&&("md5-sess"===input.substr(l,8).toLowerCase()?(n=input.substr(l,8),l+=8):(n=null,d('"MD5-sess"')),null===n&&(n=M())),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[2],e=void(data.algorithm=c.toUpperCase())),null===e&&(l=r),e}function an(){var e,t,n,r,o,c,h,f,_,m;if(f=l,"qop"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"qop"')),null!==e)if(null!==(t=j()))if(null!==(n=X())){if(_=l,null!==(r=cn())){for(o=[],m=l,44===input.charCodeAt(l)?(c=",",l++):(c=null,d('","')),null!==c&&null!==(h=cn())?c=[c,h]:(c=null,l=m);null!==c;)o.push(c),m=l,44===input.charCodeAt(l)?(c=",",l++):(c=null,d('","')),null!==c&&null!==(h=cn())?c=[c,h]:(c=null,l=m);null!==o?r=[r,o]:(r=null,l=_)}else r=null,l=_;null!==r&&null!==(o=J())?e=[e,t,n,r,o]:(e=null,l=f)}else e=null,l=f;else e=null,l=f;else e=null,l=f;return e}function cn(){var e,t,n;return t=l,"auth-int"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"auth-int"')),null===e&&("auth"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"auth"')),null===e&&(e=M())),null!==e&&(n=e,data.qop||(data.qop=[]),e=void data.qop.push(n.toLowerCase())),null===e&&(l=t),e}function dn(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(e=Et())){for(t=[],d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null!==e&&(e=function(e){var header;data.multi_header||(data.multi_header=[]);try{header=new Yn(data.uri,data.display_name,data.params),delete data.uri,delete data.display_name,delete data.params}catch(e){header=null}data.multi_header.push({possition:l,offset:e,parsed:header})}(o)),null===e&&(l=o),e}function hn(){var e;return null===(e=fn())&&(e=Nt()),e}function fn(){var e,t,n,r,o,c,h;if(o=l,c=l,"cause"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"cause"')),null!==e)if(null!==(t=j())){if(null!==(r=f()))for(n=[];null!==r;)n.push(r),r=f();else n=null;null!==n?e=[e,t,n]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return null!==e&&(h=e[2],e=void(data.cause=parseInt(h.join("")))),null===e&&(l=o),e}function _n(){var e,t,n,r,o,c;if(o=l,null!==(e=Et())){for(t=[],c=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function pn(){var e,t;return t=l,"active"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"active"')),null===e&&("pending"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"pending"')),null===e&&("terminated"===input.substr(l,10).toLowerCase()?(e=input.substr(l,10),l+=10):(e=null,d('"terminated"')),null===e&&(e=M()))),null!==e&&(e=function(e){data.state=input.substring(l,e)}(t)),null===e&&(l=t),e}function mn(){var e,t,n,r,o,c,h,f;return r=l,o=l,"reason"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"reason"')),null!==e&&null!==(t=j())&&null!==(n=gn())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=void(void 0!==(c=e[2])&&(data.reason=c))),null===e&&(l=r),null===e&&(r=l,o=l,"expires"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"expires"')),null!==e&&null!==(t=j())&&null!==(n=wt())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=void(void 0!==(f=e[2])&&(data.expires=f))),null===e&&(l=r),null===e&&(r=l,o=l,"retry_after"===input.substr(l,11).toLowerCase()?(e=input.substr(l,11),l+=11):(e=null,d('"retry_after"')),null!==e&&null!==(t=j())&&null!==(n=wt())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=void(void 0!==(h=e[2])&&(data.retry_after=h))),null===e&&(l=r),null===e&&(e=Nt()))),e}function gn(){var e;return"deactivated"===input.substr(l,11).toLowerCase()?(e=input.substr(l,11),l+=11):(e=null,d('"deactivated"')),null===e&&("probation"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"probation"')),null===e&&("rejected"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"rejected"')),null===e&&("timeout"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"timeout"')),null===e&&("giveup"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"giveup"')),null===e&&("noresource"===input.substr(l,10).toLowerCase()?(e=input.substr(l,10),l+=10):(e=null,d('"noresource"')),null===e&&("invariant"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"invariant"')),null===e&&(e=M()))))))),e}function vn(){var e;return null===(e=Yt())&&(e=Nt()),e}function Tn(){var e,t,n,r,o,c,d,h;if(d=l,null!==(e=Rn()))if(null!==(t=w()))if(null!==(n=On())){for(r=[],h=l,null!==(o=Y())&&null!==(c=$n())?o=[o,c]:(o=null,l=h);null!==o;)r.push(o),h=l,null!==(o=Y())&&null!==(c=$n())?o=[o,c]:(o=null,l=h);null!==r?e=[e,t,n,r]:(e=null,l=d)}else e=null,l=d;else e=null,l=d;else e=null,l=d;return e}function $n(){var e;return null===(e=yn())&&null===(e=Cn())&&null===(e=An())&&null===(e=En())&&null===(e=Sn())&&(e=Nt()),e}function yn(){var e,t,n,r,o,c;return r=l,o=l,"ttl"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"ttl"')),null!==e&&null!==(t=j())&&null!==(n=Pn())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.ttl=c)),null===e&&(l=r),e}function Cn(){var e,t,n,r,o,c;return r=l,o=l,"maddr"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"maddr"')),null!==e&&null!==(t=j())&&null!==(n=fe())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.maddr=c)),null===e&&(l=r),e}function An(){var e,t,n,r,o,c;return r=l,o=l,"received"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"received"')),null!==e&&null!==(t=j())?(null===(n=ye())&&(n=ve()),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[2],e=void(data.received=c)),null===e&&(l=r),e}function En(){var e,t,n,r,o,c;return r=l,o=l,"branch"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"branch"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.branch=c)),null===e&&(l=r),e}function Sn(){var e,t,n,r,o;return r=l,"rport"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"rport"')),null!==e?(o=l,null!==(t=j())&&null!==(n=bn())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function bn(){var e,t,n,r,o,c,d,h;return c=l,d=l,null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?e=[e,t,n,r,o]:(e=null,l=d),null!==e&&(h=e,e=void(data.rport=parseInt(h.join("")))),null===e&&(l=c),e}function Rn(){var e,t,n,r,o,c;return c=l,null!==(e=In())&&null!==(t=F())&&null!==(n=M())&&null!==(r=F())&&null!==(o=wn())?e=[e,t,n,r,o]:(e=null,l=c),e}function In(){var e,t,n;return t=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"SIP"')),null===e&&(e=M()),null!==e&&(n=e,e=void(data.protocol=n)),null===e&&(l=t),e}function wn(){var e,t,n;return t=l,"udp"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"UDP"')),null===e&&("tcp"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"TCP"')),null===e&&("tls"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"TLS"')),null===e&&("sctp"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"SCTP"')),null===e&&(e=M())))),null!==e&&(n=e,e=void(data.transport=n)),null===e&&(l=t),e}function On(){var e,t,n,r,o;return r=l,null!==(e=Nn())?(o=l,null!==(t=z())&&null!==(n=Dn())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function Nn(){var e,t;return t=l,null===(e=ye())&&null===(e=ge())&&(e=_e()),null!==e&&(e=function(e){data.host=input.substring(l,e)}(t)),null===e&&(l=t),e}function Dn(){var e,t,n,r,o,c,d,h;return c=l,d=l,null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?e=[e,t,n,r,o]:(e=null,l=d),null!==e&&(h=e,e=void(data.port=parseInt(h.join("")))),null===e&&(l=c),e}function Pn(){var e,t,n,r,o;return r=l,o=l,null!==(e=f())&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?e=[e,t,n]:(e=null,l=o),null!==e&&(e=parseInt(e.join(""))),null===e&&(l=r),e}function xn(){var e,t,n;return t=l,null!==(e=wt())&&(n=e,e=void(data.expires=n)),null===e&&(l=t),e}function Un(){var e;return null===(e=Mn())&&(e=Nt()),e}function Mn(){var e,t,n,r,o,c;return r=l,o=l,"refresher"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"refresher"')),null!==e&&null!==(t=j())?("uac"===input.substr(l,3).toLowerCase()?(n=input.substr(l,3),l+=3):(n=null,d('"uac"')),null===n&&("uas"===input.substr(l,3).toLowerCase()?(n=input.substr(l,3),l+=3):(n=null,d('"uas"'))),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[2],e=void(data.refresher=c.toLowerCase())),null===e&&(l=r),e}function kn(){var e,t;for(e=[],null===(t=P())&&null===(t=U())&&(t=w());null!==t;)e.push(t),null===(t=P())&&null===(t=U())&&(t=w());return e}function Ln(){var e,t,n,r,o,c,h,f,_,m,v;return m=l,v=l,null!==(e=Hn())?(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null!==t&&null!==(n=qn())?(45===input.charCodeAt(l)?(r="-",l++):(r=null,d('"-"')),null!==r&&null!==(o=qn())?(45===input.charCodeAt(l)?(c="-",l++):(c=null,d('"-"')),null!==c&&null!==(h=qn())?(45===input.charCodeAt(l)?(f="-",l++):(f=null,d('"-"')),null!==f&&null!==(_=Fn())?e=[e,t,n,r,o,c,h,f,_]:(e=null,l=v)):(e=null,l=v)):(e=null,l=v)):(e=null,l=v)):(e=null,l=v),null!==e&&(e=function(e,t){data=input.substring(l+5,e)}(m,e[0])),null===e&&(l=m),e}function qn(){var e,t,n,r,o;return o=l,null!==(e=m())&&null!==(t=m())&&null!==(n=m())&&null!==(r=m())?e=[e,t,n,r]:(e=null,l=o),e}function Hn(){var e,t,n;return n=l,null!==(e=qn())&&null!==(t=qn())?e=[e,t]:(e=null,l=n),e}function Fn(){var e,t,n,r;return r=l,null!==(e=qn())&&null!==(t=qn())&&null!==(n=qn())?e=[e,t,n]:(e=null,l=r),e}function jn(){var e,t,n,r,o,c;return r=l,o=l,null!==(e=L())?(c=l,64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null!==t&&null!==(n=L())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){data.call_id=input.substring(l,e)}(r)),null===e&&(l=r),e}function Gn(){var e;return null===(e=Bn())&&null===(e=Vn())&&null===(e=Wn())&&(e=Nt()),e}function Bn(){var e,t,n,r,o,c;return r=l,o=l,"to-tag"===input.substr(l,6)?(e="to-tag",l+=6):(e=null,d('"to-tag"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.to_tag=c)),null===e&&(l=r),e}function Vn(){var e,t,n,r,o,c;return r=l,o=l,"from-tag"===input.substr(l,8)?(e="from-tag",l+=8):(e=null,d('"from-tag"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.from_tag=c)),null===e&&(l=r),e}function Wn(){var e,t;return t=l,"early-only"===input.substr(l,10)?(e="early-only",l+=10):(e=null,d('"early-only"')),null!==e&&(e=void(data.early_only=!0)),null===e&&(l=t),e}var Kn=n(305),Yn=n(319),data={};if(null===r[t]()||l!==input.length){var zn=Math.max(l,o),Xn=zn<input.length?input.charAt(zn):null,Jn=function(){for(var line=1,e=1,t=!1,i=0;i<Math.max(l,o);i++){var n=input.charAt(i);"\n"===n?(t||line++,e=1,t=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(line++,e=1,t=!0):(e++,t=!1)}return{line:line,column:e}}();return new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],i=0;i<e.length;i++)e[i]!==t&&(n.push(e[i]),t=e[i]);return n}(c),Xn,zn,Jn.line,Jn.column),-1}return data},toSource:function(){return this._source},SyntaxError:function(t,n,r,line,l){this.name="SyntaxError",this.expected=t,this.found=n,this.message=function(t,n){var r;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return"Expected "+r+" but "+(n?e(n):"end of input")+" found."}(t,n),this.offset=r,this.line=line,this.column=l}};return t.SyntaxError.prototype=Error.prototype,t}()},302:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,p){return o=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},o(e,p)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var l=h(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw l}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}var $=n(315),y=n(296),C=n(295),A=n(297),E=n(319),S=n(300),R=new y("SIPMessage"),I=function(){function e(t,n,r,l,o,body){if(m(this,e),!t||!n||!r)return null;l=l||{},this.ua=r,this.headers={},this.method=t,this.ruri=n,this.body=body,this.extraHeaders=A.cloneArray(o),l.route_set?this.setHeader("route",l.route_set):r.configuration.use_preloaded_route&&this.setHeader("route","<".concat(r.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",C.MAX_FORWARDS);var c=l.to_uri||n,d=l.to_tag?{tag:l.to_tag}:null,h=void 0!==l.to_display_name?l.to_display_name:null;this.to=new E(c,h,d),this.setHeader("to",this.to.toString());var f,_=l.from_uri||r.configuration.uri,v={tag:l.from_tag||A.newTag()};f=void 0!==l.from_display_name?l.from_display_name:r.configuration.display_name?r.configuration.display_name:null,this.from=new E(_,f,v),this.setHeader("from",this.from.toString());var T=l.call_id||r.configuration.jssip_id+A.createRandomToken(15);this.call_id=T,this.setHeader("call-id",T);var $=l.cseq||Math.floor(1e4*Math.random());this.cseq=$,this.setHeader("cseq","".concat($," ").concat(t))}return T(e,[{key:"setHeader",value:function(e,t){for(var n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[A.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){var t=this.headers[A.headerize(e)];if(t){if(t[0])return t[0]}else{var n,r=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),l=f(this.extraHeaders);try{for(l.s();!(n=l.n()).done;){var header=n.value;if(r.test(header))return header.substring(header.indexOf(":")+1).trim()}}catch(e){l.e(e)}finally{l.f()}}}},{key:"getHeaders",value:function(e){var t=this.headers[A.headerize(e)],n=[];if(t){var r,l=f(t);try{for(l.s();!(r=l.n()).done;){var header=r.value;n.push(header)}}catch(e){l.e(e)}finally{l.f()}return n}var o,c=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),d=f(this.extraHeaders);try{for(d.s();!(o=d.n()).done;){var h=o.value;c.test(h)&&n.push(h.substring(h.indexOf(":")+1).trim())}}catch(e){d.e(e)}finally{d.f()}return n}},{key:"hasHeader",value:function(e){if(this.headers[A.headerize(e)])return!0;var t,n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=f(this.extraHeaders);try{for(r.s();!(t=r.n()).done;){var header=t.value;if(n.test(header))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=$.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){var e="".concat(this.method," ").concat(this.ruri," SIP/2.0\r\n");for(var t in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,t)){var n,r=f(this.headers[t]);try{for(r.s();!(n=r.n()).done;){var l=n.value;e+="".concat(t,": ").concat(l,"\r\n")}}catch(e){r.e(e)}finally{r.f()}}var o,c=f(this.extraHeaders);try{for(c.s();!(o=c.n()).done;){var header=o.value;e+="".concat(header.trim(),"\r\n")}}catch(e){c.e(e)}finally{c.f()}var d=[];switch(this.method){case C.REGISTER:d.push("path","gruu");break;case C.INVITE:this.ua.configuration.session_timers&&d.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&d.push("gruu"),d.push("ice","replaces");break;case C.UPDATE:this.ua.configuration.session_timers&&d.push("timer"),d.push("ice")}d.push("outbound");var h=this.ua.configuration.user_agent||C.USER_AGENT;if(e+="Allow: ".concat(C.ALLOWED_METHODS,"\r\n"),e+="Supported: ".concat(d,"\r\n"),e+="User-Agent: ".concat(h,"\r\n"),this.body){var _=A.str_utf8_length(this.body);e+="Content-Length: ".concat(_,"\r\n\r\n"),e+=this.body}else e+="Content-Length: 0\r\n\r\n";return e}},{key:"clone",value:function(){var t=new e(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach((function(e){t.headers[e]=this.headers[e].slice()}),this),t.body=this.body,t.extraHeaders=A.cloneArray(this.extraHeaders),t.to=this.to,t.from=this.from,t.call_id=this.call_id,t.cseq=this.cseq,t}}]),e}(),w=function(e){l(n,e);var t=c(n);function n(e,r,l,o,body){var c;return m(this,n),(c=t.call(this,C.INVITE,e,r,l,o,body)).transaction=null,c}return T(n,[{key:"cancel",value:function(e){this.transaction.cancel(e)}},{key:"clone",value:function(){var e=new n(this.ruri,this.ua);return Object.keys(this.headers).forEach((function(t){e.headers[t]=this.headers[t].slice()}),this),e.body=this.body,e.extraHeaders=A.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e.transaction=this.transaction,e}}]),n}(I),O=function(){function e(){m(this,e),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return T(e,[{key:"addHeader",value:function(e,t){var header={raw:t};e=A.headerize(e),this.headers[e]?this.headers[e].push(header):this.headers[e]=[header]}},{key:"getHeader",value:function(e){var header=this.headers[A.headerize(e)];if(header)return header[0]?header[0].raw:void 0}},{key:"getHeaders",value:function(e){var t=this.headers[A.headerize(e)],n=[];if(!t)return[];var r,l=f(t);try{for(l.s();!(r=l.n()).done;){var header=r.value;n.push(header.raw)}}catch(e){l.e(e)}finally{l.f()}return n}},{key:"hasHeader",value:function(e){return!!this.headers[A.headerize(e)]}},{key:"parseHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e=A.headerize(e),this.headers[e]){if(!(t>=this.headers[e].length)){var header=this.headers[e][t],n=header.raw;if(header.parsed)return header.parsed;var r=S.parse(n,e.replace(/-/g,"_"));return-1===r?(this.headers[e].splice(t,1),void R.debug('error parsing "'.concat(e,'" header field with value "').concat(n,'"'))):(header.parsed=r,r)}R.debug('not so many "'.concat(e,'" headers present'))}else R.debug('header "'.concat(e,'" not present'))}},{key:"s",value:function(e,t){return this.parseHeader(e,t)}},{key:"setHeader",value:function(e,t){var header={raw:t};this.headers[A.headerize(e)]=[header]}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=$.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){return this.data}}]),e}(),N=function(e){l(n,e);var t=c(n);function n(e){var r;return m(this,n),(r=t.call(this)).ua=e,r.headers={},r.ruri=null,r.transport=null,r.server_transaction=null,r}return T(n,[{key:"reply",value:function(code,e,t,body,n,r){var l=[],o=this.getHeader("To");if(e=e||null,!(code=code||null)||code<100||code>699)throw new TypeError("Invalid status_code: ".concat(code));if(e&&"string"!=typeof e&&!(e instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(e));e=e||C.REASON_PHRASE[code]||"",t=A.cloneArray(t);var c="SIP/2.0 ".concat(code," ").concat(e,"\r\n");if(this.method===C.INVITE&&code>100&&code<=200){var d,h=f(this.getHeaders("record-route"));try{for(h.s();!(d=h.n()).done;){var header=d.value;c+="Record-Route: ".concat(header,"\r\n")}}catch(e){h.e(e)}finally{h.f()}}var _,m=f(this.getHeaders("via"));try{for(m.s();!(_=m.n()).done;){var v=_.value;c+="Via: ".concat(v,"\r\n")}}catch(e){m.e(e)}finally{m.f()}!this.to_tag&&code>100?o+=";tag=".concat(A.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(o+=";tag=".concat(this.to_tag)),c+="To: ".concat(o,"\r\n"),c+="From: ".concat(this.getHeader("From"),"\r\n"),c+="Call-ID: ".concat(this.call_id,"\r\n"),c+="CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n");var T,$=f(t);try{for($.s();!(T=$.n()).done;){var y=T.value;c+="".concat(y.trim(),"\r\n")}}catch(e){$.e(e)}finally{$.f()}switch(this.method){case C.INVITE:this.ua.configuration.session_timers&&l.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&l.push("gruu"),l.push("ice","replaces");break;case C.UPDATE:this.ua.configuration.session_timers&&l.push("timer"),body&&l.push("ice"),l.push("replaces")}if(l.push("outbound"),this.method===C.OPTIONS?(c+="Allow: ".concat(C.ALLOWED_METHODS,"\r\n"),c+="Accept: ".concat(C.ACCEPTED_BODY_TYPES,"\r\n")):405===code?c+="Allow: ".concat(C.ALLOWED_METHODS,"\r\n"):415===code&&(c+="Accept: ".concat(C.ACCEPTED_BODY_TYPES,"\r\n")),c+="Supported: ".concat(l,"\r\n"),body){var E=A.str_utf8_length(body);c+="Content-Type: application/sdp\r\n",c+="Content-Length: ".concat(E,"\r\n\r\n"),c+=body}else c+="Content-Length: ".concat(0,"\r\n\r\n");this.server_transaction.receiveResponse(code,c,n,r)}},{key:"reply_sl",value:function(){var code=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.getHeaders("via");if(!code||code<100||code>699)throw new TypeError("Invalid status_code: ".concat(code));if(e&&"string"!=typeof e&&!(e instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(e));e=e||C.REASON_PHRASE[code]||"";var n,r="SIP/2.0 ".concat(code," ").concat(e,"\r\n"),l=f(t);try{for(l.s();!(n=l.n()).done;){var o=n.value;r+="Via: ".concat(o,"\r\n")}}catch(e){l.e(e)}finally{l.f()}var c=this.getHeader("To");!this.to_tag&&code>100?c+=";tag=".concat(A.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(c+=";tag=".concat(this.to_tag)),r+="To: ".concat(c,"\r\n"),r+="From: ".concat(this.getHeader("From"),"\r\n"),r+="Call-ID: ".concat(this.call_id,"\r\n"),r+="CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n"),r+="Content-Length: ".concat(0,"\r\n\r\n"),this.transport.send(r)}}]),n}(O),D=function(e){l(n,e);var t=c(n);function n(){var e;return m(this,n),(e=t.call(this)).headers={},e.status_code=null,e.reason_phrase=null,e}return n}(O);e.exports={OutgoingRequest:I,InitialOutgoingInviteRequest:w,IncomingRequest:N,IncomingResponse:D}},303:function(e,t,n){const r=n(314),l="JsSIP";e.exports=class{constructor(e){e?(this._debug=r.default(`JsSIP:${e}`),this._warn=r.default(`JsSIP:WARN:${e}`),this._error=r.default(`JsSIP:ERROR:${e}`)):(this._debug=r.default(l),this._warn=r.default("JsSIP:WARN"),this._error=r.default("JsSIP:ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},304:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function c(e){var t=_();return function(){var n,r=v(e);if(t){var l=v(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)},h(e)}function f(e,t,n){return f=_()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&m(r,n.prototype),r},f.apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e,p){return m=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},m(e,p)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var T=function(e){o(n,e);var t=c(n);function n(e,r){var o;return l(this,n),(o=t.call(this)).code=1,o.name="CONFIGURATION_ERROR",o.parameter=e,o.value=r,o.message=o.value?"Invalid value ".concat(JSON.stringify(o.value),' for parameter "').concat(o.parameter,'"'):"Missing parameter: ".concat(o.parameter),o}return n}(h(Error)),$=function(e){o(n,e);var t=c(n);function n(e){var r;return l(this,n),(r=t.call(this)).code=2,r.name="INVALID_STATE_ERROR",r.status=e,r.message="Invalid status: ".concat(e),r}return n}(h(Error)),y=function(e){o(n,e);var t=c(n);function n(e){var r;return l(this,n),(r=t.call(this)).code=3,r.name="NOT_SUPPORTED_ERROR",r.message=e,r}return n}(h(Error)),C=function(e){o(n,e);var t=c(n);function n(e){var r;return l(this,n),(r=t.call(this)).code=4,r.name="NOT_READY_ERROR",r.message=e,r}return n}(h(Error));e.exports={ConfigurationError:T,InvalidStateError:$,NotSupportedError:y,NotReadyError:C}},305:function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var h=n(295),f=n(297),_=n(300);e.exports=function(){function e(t,n,r,l){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(o(this,e),!r)throw new TypeError('missing or invalid "host" parameter');for(var param in this._parameters={},this._headers={},this._scheme=t||h.SIP,this._user=n,this._host=r,this._port=l,c)Object.prototype.hasOwnProperty.call(c,param)&&this.setParam(param,c[param]);for(var header in d)Object.prototype.hasOwnProperty.call(d,header)&&this.setHeader(header,d[header])}return d(e,null,[{key:"parse",value:function(e){return-1!==(e=_.parse(e,"SIP_URI"))?e:void 0}}]),d(e,[{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(e,t){this._headers[f.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){if(e)return this._headers[f.headerize(e)]}},{key:"hasHeader",value:function(e){if(e)return!!this._headers.hasOwnProperty(f.headerize(e))}},{key:"deleteHeader",value:function(header){if(header=f.headerize(header),this._headers.hasOwnProperty(header)){var e=this._headers[header];return delete this._headers[header],e}}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:"toString",value:function(){var e=[],t="".concat(this._scheme,":");for(var n in this._user&&(t+="".concat(f.escapeUser(this._user),"@")),t+=this._host,(this._port||0===this._port)&&(t+=":".concat(this._port)),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,n)&&(t+=";".concat(n),null!==this._parameters[n]&&(t+="=".concat(this._parameters[n])));for(var header in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,header)){var l,o=r(this._headers[header]);try{for(o.s();!(l=o.n()).done;){var c=l.value;e.push("".concat(header,"=").concat(c))}}catch(e){o.e(e)}finally{o.f()}}return e.length>0&&(t+="?".concat(e.join("&"))),t}},{key:"toAor",value:function(e){var t="".concat(this._scheme,":");return this._user&&(t+="".concat(f.escapeUser(this._user),"@")),t+=this._host,e&&(this._port||0===this._port)&&(t+=":".concat(this._port)),t}},{key:"scheme",get:function(){return this._scheme},set:function(e){this._scheme=e.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"host",get:function(){return this._host},set:function(e){this._host=e.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(e){this._port=0===e?e:parseInt(e,10)||null}}]),e}()},306:function(e,t,n){const r=n(299),l=n(317),o=n(311);t.str_utf8_length=e=>unescape(encodeURIComponent(e)).length;const c=t.isFunction=e=>void 0!==e&&"[object Function]"===Object.prototype.toString.call(e);t.isString=e=>void 0!==e&&"[object String]"===Object.prototype.toString.call(e),t.isDecimal=e=>!isNaN(e)&&parseFloat(e)===parseInt(e,10),t.isEmpty=e=>null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e),t.hasMethods=function(e,...t){for(const n of t)if(c(e[n]))return!1;return!0};const d=t.createRandomToken=(e,base=32)=>{let i,t,n="";for(i=0;i<e;i++)t=Math.random()*base|0,n+=t.toString(base);return n};t.newTag=()=>d(10),t.newUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),t.hostType=e=>{if(e)return-1!==(e=o.parse(e,"host"))?e.host_type:void 0};const h=t.escapeUser=e=>encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/");t.normalizeTarget=(e,t)=>{if(e){if(e instanceof l)return e;if("string"==typeof e){const n=e.split("@");let o,c,d;switch(n.length){case 1:if(!t)return;o=e,c=t;break;case 2:o=n[0],c=n[1];break;default:o=n.slice(0,n.length-1).join("@"),c=n[n.length-1]}return o=o.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(o)&&(o=o.replace(/[-.()]/g,"")),e=`${r.SIP}:${h(o)}@${c}`,(d=l.parse(e))?d:void 0}}else;},t.headerize=e=>{const t={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},n=e.toLowerCase().replace(/_/g,"-").split("-");let r="";const l=n.length;let o;for(o=0;o<l;o++)0!==o&&(r+="-"),r+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return t[r]&&(r=t[r]),r},t.sipErrorCause=e=>{for(const t in r.SIP_ERROR_CAUSES)if(-1!==r.SIP_ERROR_CAUSES[t].indexOf(e))return r.causes[t];return r.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=()=>{return`192.0.2.${e=1,t=254,Math.floor(Math.random()*(t-e+1)+e)}`;var e,t},t.calculateMD5=e=>{function t(e,t){return e<<t|e>>>32-t}function n(e,t){const n=2147483648&e,r=2147483648&t,l=1073741824&e,o=1073741824&t,c=(1073741823&e)+(1073741823&t);return l&o?2147483648^c^n^r:l|o?1073741824&c?3221225472^c^n^r:1073741824^c^n^r:c^n^r}function r(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return e&t|~e&n}(b,e,r),l),o)),n(t(a,s),b)}function l(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return e&n|t&~n}(b,e,r),l),o)),n(t(a,s),b)}function o(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return e^t^n}(b,e,r),l),o)),n(t(a,s),b)}function c(a,b,e,r,l,s,o){return a=n(a,n(n(function(e,t,n){return t^(e|~n)}(b,e,r),l),o)),n(t(a,s),b)}function d(e){let t,n,r="",l="";for(n=0;n<=3;n++)t=e>>>8*n&255,l=`0${t.toString(16)}`,r+=l.substr(l.length-2,2);return r}let h,f,_,m,v,a,b,T,$,y=[];for(e=function(e){e=e.replace(/\r\n/g,"\n");let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e),y=function(e){let t;const n=e.length,r=n+8,l=16*((r-r%64)/64+1),o=new Array(l-1);let c=0,d=0;for(;d<n;)t=(d-d%4)/4,c=d%4*8,o[t]=o[t]|e.charCodeAt(d)<<c,d++;return t=(d-d%4)/4,c=d%4*8,o[t]=o[t]|128<<c,o[l-2]=n<<3,o[l-1]=n>>>29,o}(e),a=1732584193,b=4023233417,T=2562383102,$=271733878,h=0;h<y.length;h+=16)f=a,_=b,m=T,v=$,a=r(a,b,T,$,y[h+0],7,3614090360),$=r($,a,b,T,y[h+1],12,3905402710),T=r(T,$,a,b,y[h+2],17,606105819),b=r(b,T,$,a,y[h+3],22,3250441966),a=r(a,b,T,$,y[h+4],7,4118548399),$=r($,a,b,T,y[h+5],12,1200080426),T=r(T,$,a,b,y[h+6],17,2821735955),b=r(b,T,$,a,y[h+7],22,4249261313),a=r(a,b,T,$,y[h+8],7,1770035416),$=r($,a,b,T,y[h+9],12,2336552879),T=r(T,$,a,b,y[h+10],17,4294925233),b=r(b,T,$,a,y[h+11],22,2304563134),a=r(a,b,T,$,y[h+12],7,1804603682),$=r($,a,b,T,y[h+13],12,4254626195),T=r(T,$,a,b,y[h+14],17,2792965006),b=r(b,T,$,a,y[h+15],22,1236535329),a=l(a,b,T,$,y[h+1],5,4129170786),$=l($,a,b,T,y[h+6],9,3225465664),T=l(T,$,a,b,y[h+11],14,643717713),b=l(b,T,$,a,y[h+0],20,3921069994),a=l(a,b,T,$,y[h+5],5,3593408605),$=l($,a,b,T,y[h+10],9,38016083),T=l(T,$,a,b,y[h+15],14,3634488961),b=l(b,T,$,a,y[h+4],20,3889429448),a=l(a,b,T,$,y[h+9],5,568446438),$=l($,a,b,T,y[h+14],9,3275163606),T=l(T,$,a,b,y[h+3],14,4107603335),b=l(b,T,$,a,y[h+8],20,1163531501),a=l(a,b,T,$,y[h+13],5,2850285829),$=l($,a,b,T,y[h+2],9,4243563512),T=l(T,$,a,b,y[h+7],14,1735328473),b=l(b,T,$,a,y[h+12],20,2368359562),a=o(a,b,T,$,y[h+5],4,4294588738),$=o($,a,b,T,y[h+8],11,2272392833),T=o(T,$,a,b,y[h+11],16,1839030562),b=o(b,T,$,a,y[h+14],23,4259657740),a=o(a,b,T,$,y[h+1],4,2763975236),$=o($,a,b,T,y[h+4],11,1272893353),T=o(T,$,a,b,y[h+7],16,4139469664),b=o(b,T,$,a,y[h+10],23,3200236656),a=o(a,b,T,$,y[h+13],4,681279174),$=o($,a,b,T,y[h+0],11,3936430074),T=o(T,$,a,b,y[h+3],16,3572445317),b=o(b,T,$,a,y[h+6],23,76029189),a=o(a,b,T,$,y[h+9],4,3654602809),$=o($,a,b,T,y[h+12],11,3873151461),T=o(T,$,a,b,y[h+15],16,530742520),b=o(b,T,$,a,y[h+2],23,3299628645),a=c(a,b,T,$,y[h+0],6,4096336452),$=c($,a,b,T,y[h+7],10,1126891415),T=c(T,$,a,b,y[h+14],15,2878612391),b=c(b,T,$,a,y[h+5],21,4237533241),a=c(a,b,T,$,y[h+12],6,1700485571),$=c($,a,b,T,y[h+3],10,2399980690),T=c(T,$,a,b,y[h+10],15,4293915773),b=c(b,T,$,a,y[h+1],21,2240044497),a=c(a,b,T,$,y[h+8],6,1873313359),$=c($,a,b,T,y[h+15],10,4264355552),T=c(T,$,a,b,y[h+6],15,2734768916),b=c(b,T,$,a,y[h+13],21,1309151649),a=c(a,b,T,$,y[h+4],6,4149444226),$=c($,a,b,T,y[h+11],10,3174756917),T=c(T,$,a,b,y[h+2],15,718787259),b=c(b,T,$,a,y[h+9],21,3951481745),a=n(a,f),b=n(b,_),T=n(T,m),$=n($,v);return(d(a)+d(b)+d(T)+d($)).toLowerCase()},t.closeMediaStream=e=>{if(e)try{let t;if(e.getTracks){t=e.getTracks();for(const track of t)track.stop()}else{t=e.getAudioTracks();for(const track of t)track.stop();t=e.getVideoTracks();for(const track of t)track.stop()}}catch(t){"function"!=typeof e.stop&&"object"!=typeof e.stop||e.stop()}},t.cloneArray=e=>e&&e.slice()||[],t.cloneObject=(e,t={})=>e&&Object.assign({},e)||t},309:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=n(296),o=n(295),c=n(346),d=n(310),h=new l("RequestSender"),f={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}};e.exports=function(){function e(t,n,r){for(var l in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ua=t,this._eventHandlers=r,this._method=n.method,this._request=n,this._auth=null,this._challenged=!1,this._staled=!1,f)Object.prototype.hasOwnProperty.call(f,l)&&(this._eventHandlers[l]||(this._eventHandlers[l]=f[l]));t.status!==t.C.STATUS_USER_CLOSED||this._method===o.BYE&&this._method===o.ACK||this._eventHandlers.onTransportError()}var t,n,l;return t=e,(n=[{key:"send",value:function(){var e=this,t={onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onReceiveResponse:function(t){e._receiveResponse(t)}};switch(this._method){case"INVITE":this.clientTransaction=new d.InviteClientTransaction(this._ua,this._ua.transport,this._request,t);break;case"ACK":this.clientTransaction=new d.AckClientTransaction(this._ua,this._ua.transport,this._request,t);break;default:this.clientTransaction=new d.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,t)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(e){var t,n,r=e.status_code;if(401!==r&&407!==r||null===this._ua.configuration.password&&null===this._ua.configuration.ha1)this._eventHandlers.onReceiveResponse(e);else{if(401===e.status_code?(t=e.parseHeader("www-authenticate"),n="authorization"):(t=e.parseHeader("proxy-authenticate"),n="proxy-authorization"),!t)return h.debug("".concat(e.status_code," with wrong or missing challenge, cannot authenticate")),void this._eventHandlers.onReceiveResponse(e);if(!this._challenged||!this._staled&&!0===t.stale){if(this._auth||(this._auth=new c({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,t))return void this._eventHandlers.onReceiveResponse(e);this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(e)}}}])&&r(t.prototype,n),l&&r(t,l),e}()},310:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,p){return h=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},h(e,p)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var l=v(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var T=n(298).EventEmitter,$=n(296),y=n(295),C=n(302),A=n(325),E=new $("NonInviteClientTransaction"),S=new $("InviteClientTransaction"),R=new $("AckClientTransaction"),I=new $("NonInviteServerTransaction"),w=new $("InviteServerTransaction"),O={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},N=function(e){d(n,e);var t=f(n);function n(e,r,o,c){var d;l(this,n),(d=t.call(this)).type=O.NON_INVITE_CLIENT,d.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),d.ua=e,d.transport=r,d.request=o,d.eventHandlers=c;var h="SIP/2.0/".concat(r.via_transport);return h+=" ".concat(e.configuration.via_host,";branch=").concat(d.id),d.request.setHeader("via",h),d.ua.newTransaction(m(d)),d}return c(n,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(O.STATUS_TRYING),this.F=setTimeout((function(){e.timer_F()}),A.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){E.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){E.debug("Timer F expired for transaction ".concat(this.id)),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(n<200)switch(this.state){case O.STATUS_TRYING:case O.STATUS_PROCEEDING:this.stateChanged(O.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e)}else switch(this.state){case O.STATUS_TRYING:case O.STATUS_PROCEEDING:this.stateChanged(O.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(e),this.K=setTimeout((function(){t.timer_K()}),A.TIMER_K)}}},{key:"C",get:function(){return O}}]),n}(T),D=function(e){d(n,e);var t=f(n);function n(e,r,o,c){var d;l(this,n),(d=t.call(this)).type=O.INVITE_CLIENT,d.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),d.ua=e,d.transport=r,d.request=o,d.eventHandlers=c,o.transaction=m(d);var h="SIP/2.0/".concat(r.via_transport);return h+=" ".concat(e.configuration.via_host,";branch=").concat(d.id),d.request.setHeader("via",h),d.ua.newTransaction(m(d)),d}return c(n,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(O.STATUS_CALLING),this.B=setTimeout((function(){e.timer_B()}),A.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==O.STATUS_ACCEPTED&&(S.debug("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){S.debug("Timer M expired for transaction ".concat(this.id)),this.state===O.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){S.debug("Timer B expired for transaction ".concat(this.id)),this.state===O.STATUS_CALLING&&(this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){S.debug("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(e){var t=this,n=new C.OutgoingRequest(y.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});n.setHeader("from",this.request.getHeader("from")),n.setHeader("via",this.request.getHeader("via")),n.setHeader("to",e.getHeader("to")),this.D=setTimeout((function(){t.timer_D()}),A.TIMER_D),this.transport.send(n)}},{key:"cancel",value:function(e){if(this.state===O.STATUS_PROCEEDING){var t=new C.OutgoingRequest(y.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});t.setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",this.request.getHeader("to")),e&&t.setHeader("reason",e),this.transport.send(t)}}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(n>=100&&n<=199)switch(this.state){case O.STATUS_CALLING:this.stateChanged(O.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e);break;case O.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(e)}else if(n>=200&&n<=299)switch(this.state){case O.STATUS_CALLING:case O.STATUS_PROCEEDING:this.stateChanged(O.STATUS_ACCEPTED),this.M=setTimeout((function(){t.timer_M()}),A.TIMER_M),this.eventHandlers.onReceiveResponse(e);break;case O.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(e)}else if(n>=300&&n<=699)switch(this.state){case O.STATUS_CALLING:case O.STATUS_PROCEEDING:this.stateChanged(O.STATUS_COMPLETED),this.sendACK(e),this.eventHandlers.onReceiveResponse(e);break;case O.STATUS_COMPLETED:this.sendACK(e)}}},{key:"C",get:function(){return O}}]),n}(T),P=function(e){d(n,e);var t=f(n);function n(e,r,o,c){var d;l(this,n),(d=t.call(this)).id="z9hG4bK".concat(Math.floor(1e7*Math.random())),d.transport=r,d.request=o,d.eventHandlers=c;var h="SIP/2.0/".concat(r.via_transport);return h+=" ".concat(e.configuration.via_host,";branch=").concat(d.id),d.request.setHeader("via",h),d}return c(n,[{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){R.debug("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}},{key:"C",get:function(){return O}}]),n}(T),x=function(e){d(n,e);var t=f(n);function n(e,r,o){var c;return l(this,n),(c=t.call(this)).type=O.NON_INVITE_SERVER,c.id=o.via_branch,c.ua=e,c.transport=r,c.request=o,c.last_response="",o.server_transaction=m(c),c.state=O.STATUS_TRYING,e.newTransaction(m(c)),c}return c(n,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_J",value:function(){I.debug("Timer J expired for transaction ".concat(this.id)),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,I.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(e,t,n,r){var l=this;if(100===e)switch(this.state){case O.STATUS_TRYING:this.stateChanged(O.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case O.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=200&&e<=699)switch(this.state){case O.STATUS_TRYING:case O.STATUS_PROCEEDING:this.stateChanged(O.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout((function(){l.timer_J()}),A.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}}},{key:"C",get:function(){return O}}]),n}(T),U=function(e){d(n,e);var t=f(n);function n(e,r,o){var c;return l(this,n),(c=t.call(this)).type=O.INVITE_SERVER,c.id=o.via_branch,c.ua=e,c.transport=r,c.request=o,c.last_response="",o.server_transaction=m(c),c.state=O.STATUS_PROCEEDING,e.newTransaction(m(c)),c.resendProvisionalTimer=null,o.reply(100),c}return c(n,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_H",value:function(){w.debug("Timer H expired for transaction ".concat(this.id)),this.state===O.STATUS_COMPLETED&&w.debug("ACK not received, dialog will be terminated"),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){w.debug("Timer L expired for transaction ".concat(this.id)),this.state===O.STATUS_ACCEPTED&&(this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,w.debug("transport error occurred, deleting transaction ".concat(this.id)),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(O.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(e,t,n,r){var l=this;if(e>=100&&e<=199&&this.state===O.STATUS_PROCEEDING)this.transport.send(t)||this.onTransportError(),this.last_response=t;if(e>100&&e<=199&&this.state===O.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval((function(){l.resend_provisional()}),A.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&e<=299)switch(this.state){case O.STATUS_PROCEEDING:this.stateChanged(O.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout((function(){l.timer_L()}),A.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case O.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=300&&e<=699&&this.state===O.STATUS_PROCEEDING)null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(O.STATUS_COMPLETED),this.H=setTimeout((function(){l.timer_H()}),A.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}},{key:"C",get:function(){return O}}]),n}(T);e.exports={C:O,NonInviteClientTransaction:N,InviteClientTransaction:D,AckClientTransaction:P,NonInviteServerTransaction:x,InviteServerTransaction:U,checkTransaction:function(e,t){var tr,n=e._transactions;switch(t.method){case y.INVITE:if(tr=n.ist[t.via_branch]){if(tr.state===O.STATUS_PROCEEDING)tr.transport.send(tr.last_response);return!0}break;case y.ACK:if(!(tr=n.ist[t.via_branch]))return!1;if(tr.state===O.STATUS_ACCEPTED)return!1;if(tr.state===O.STATUS_COMPLETED)return tr.state=O.STATUS_CONFIRMED,tr.I=setTimeout((function(){tr.timer_I()}),A.TIMER_I),!0;break;case y.CANCEL:return(tr=n.ist[t.via_branch])?(t.reply_sl(200),tr.state!==O.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(tr=n.nist[t.via_branch]){switch(tr.state){case O.STATUS_TRYING:break;case O.STATUS_PROCEEDING:case O.STATUS_COMPLETED:tr.transport.send(tr.last_response)}return!0}}}}},311:function(e,t,n){e.exports=function(){function e(s){return'"'+s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(input,t){var r={CRLF:h,DIGIT:f,ALPHA:_,HEXDIG:m,WSP:v,OCTET:T,DQUOTE:$,SP:y,HTAB:C,alphanum:A,reserved:E,unreserved:S,mark:R,escaped:I,LWS:w,SWS:O,HCOLON:N,TEXT_UTF8_TRIM:D,TEXT_UTF8char:P,UTF8_NONASCII:x,UTF8_CONT:U,LHEX:function(){var e;null===(e=f())&&(/^[a-f]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[a-f]")));return e},token:M,token_nodot:k,separators:function(){var e;40===input.charCodeAt(l)?(e="(",l++):(e=null,d('"("'));null===e&&(41===input.charCodeAt(l)?(e=")",l++):(e=null,d('")"')),null===e&&(60===input.charCodeAt(l)?(e="<",l++):(e=null,d('"<"')),null===e&&(62===input.charCodeAt(l)?(e=">",l++):(e=null,d('">"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","')),null===e&&(59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(92===input.charCodeAt(l)?(e="\\",l++):(e=null,d('"\\\\"')),null===e&&null===(e=$())&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null===e&&(93===input.charCodeAt(l)?(e="]",l++):(e=null,d('"]"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(123===input.charCodeAt(l)?(e="{",l++):(e=null,d('"{"')),null===e&&(125===input.charCodeAt(l)?(e="}",l++):(e=null,d('"}"')),null===e&&null===(e=y())&&(e=C()))))))))))))))));return e},word:L,STAR:H,SLASH:F,EQUAL:j,LPAREN:G,RPAREN:B,RAQUOT:V,LAQUOT:W,COMMA:K,SEMI:Y,COLON:z,LDQUOT:X,RDQUOT:J,comment:function e(){var t,n,r,o;if(o=l,null!==(t=G())){for(n=[],null===(r=Q())&&null===(r=ne())&&(r=e());null!==r;)n.push(r),null===(r=Q())&&null===(r=ne())&&(r=e());null!==n&&null!==(r=B())?t=[t,n,r]:(t=null,l=o)}else t=null,l=o;return t},ctext:Q,quoted_string:Z,quoted_string_clean:ee,qdtext:te,quoted_pair:ne,SIP_URI_noparams:re,SIP_URI:le,uri_scheme:se,uri_scheme_sips:ie,uri_scheme_sip:oe,userinfo:ue,user:ae,user_unreserved:ce,password:de,hostport:he,host:fe,hostname:_e,domainlabel:pe,toplabel:me,IPv6reference:ge,IPv6address:ve,h16:Te,ls32:$e,IPv4address:ye,dec_octet:Ce,port:Ae,uri_parameters:Ee,uri_parameter:Se,transport_param:be,user_param:Re,method_param:Ie,ttl_param:we,maddr_param:Oe,lr_param:Ne,other_param:De,pname:Pe,pvalue:xe,paramchar:Ue,param_unreserved:Me,headers:ke,header:Le,hname:qe,hvalue:He,hnv_unreserved:Fe,Request_Response:function(){var e;null===(e=Tt())&&(e=je());return e},Request_Line:je,Request_URI:Ge,absoluteURI:Be,hier_part:Ve,net_path:We,abs_path:Ke,opaque_part:Ye,uric:ze,uric_no_slash:Xe,path_segments:Je,segment:Qe,param:Ze,pchar:et,scheme:tt,authority:nt,srvr:lt,reg_name:st,query:it,SIP_Version:ot,INVITEm:ut,ACKm:at,OPTIONSm:ct,BYEm:ht,CANCELm:ft,REGISTERm:_t,SUBSCRIBEm:pt,NOTIFYm:mt,REFERm:gt,Method:vt,Status_Line:Tt,Status_Code:$t,extension_code:yt,Reason_Phrase:Ct,Allow_Events:function(){var e,t,n,r,o,c;if(o=l,null!==(e=Wt())){for(t=[],c=l,null!==(n=K())&&null!==(r=Wt())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=Wt())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Call_ID:function(){var e,t,n,r,o,c;r=l,o=l,null!==(e=L())?(c=l,64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null!==t&&null!==(n=L())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o);null!==e&&(e=function(e){data=input.substring(l,e)}(r));null===e&&(l=r);return e},Contact:function(){var e,t,n,r,o,c,d;if(o=l,null===(e=H()))if(c=l,null!==(e=At())){for(t=[],d=l,null!==(n=K())&&null!==(r=At())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=K())&&null!==(r=At())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t,n;for(n=data.multi_header.length,t=0;t<n;t++)if(null===data.multi_header[t].parsed){data=null;break}data=null!==data?data.multi_header:-1}());null===e&&(l=o);return e},contact_param:At,name_addr:Et,display_name:St,contact_params:bt,c_p_q:Rt,c_p_expires:It,delta_seconds:wt,qvalue:Ot,generic_param:Nt,gen_value:Dt,Content_Disposition:function(){var e,t,n,r,o,c;if(o=l,null!==(e=Pt())){for(t=[],c=l,null!==(n=Y())&&null!==(r=xt())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=xt())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},disp_type:Pt,disp_param:xt,handling_param:Ut,Content_Encoding:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Content_Length:function(){var e,t,n;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;null!==e&&(e=void(data=parseInt(e.join(""))));null===e&&(l=n);return e},Content_Type:function(){var e,t;t=l,null!==(e=Mt())&&(e=function(e){data=input.substring(l,e)}(t));null===e&&(l=t);return e},media_type:Mt,m_type:kt,discrete_type:Lt,composite_type:qt,extension_token:Ht,x_token:Ft,m_subtype:jt,m_parameter:Gt,m_value:Bt,CSeq:function(){var e,t,n,r;r=l,null!==(e=Vt())&&null!==(t=w())&&null!==(n=vt())?e=[e,t,n]:(e=null,l=r);return e},CSeq_value:Vt,Expires:function(){var e,t;t=l,null!==(e=wt())&&(e=void(data=e));null===e&&(l=t);return e},Event:function(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(e=Wt())){for(t=[],d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(h=e[0],e=void(data.event=h.join("").toLowerCase()));var h;null===e&&(l=o);return e},event_type:Wt,From:function(){var e,t,n,r,o,c,d;o=l,c=l,null===(e=re())&&(e=Et());if(null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=Kt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Kt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t=data.tag;try{data=new Yn(data.uri,data.display_name,data.params),t&&data.setParam("tag",t)}catch(e){data=-1}}());null===e&&(l=o);return e},from_param:Kt,tag_param:Yt,Max_Forwards:function(){var e,t,n;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;null!==e&&(e=void(data=parseInt(e.join(""))));null===e&&(l=n);return e},Min_Expires:function(){var e,t;t=l,null!==(e=wt())&&(e=void(data=e));null===e&&(l=t);return e},Name_Addr_Header:function(){var e,t,n,r,o,c,d,h,f,_;h=l,f=l,e=[],t=St();for(;null!==t;)e.push(t),t=St();if(null!==e)if(null!==(t=W()))if(null!==(n=le()))if(null!==(r=V())){for(o=[],_=l,null!==(c=Y())&&null!==(d=Nt())?c=[c,d]:(c=null,l=_);null!==c;)o.push(c),_=l,null!==(c=Y())&&null!==(d=Nt())?c=[c,d]:(c=null,l=_);null!==o?e=[e,t,n,r,o]:(e=null,l=f)}else e=null,l=f;else e=null,l=f;else e=null,l=f;else e=null,l=f;null!==e&&(e=function(e){try{data=new Yn(data.uri,data.display_name,data.params)}catch(e){data=-1}}());null===e&&(l=h);return e},Proxy_Authenticate:function(){return zt()},challenge:zt,other_challenge:Xt,auth_param:Jt,digest_cln:Qt,realm:Zt,realm_value:en,domain:tn,URI:nn,nonce:rn,nonce_value:ln,opaque:sn,stale:on,algorithm:un,qop_options:an,qop_value:cn,Proxy_Require:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Record_Route:function(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(e=dn())){for(t=[],d=l,null!==(n=K())&&null!==(r=dn())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=K())&&null!==(r=dn())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t,n;for(n=data.multi_header.length,t=0;t<n;t++)if(null===data.multi_header[t].parsed){data=null;break}data=null!==data?data.multi_header:-1}());null===e&&(l=o);return e},rec_route:dn,Reason:function(){var e,t,n,r,o,c,h;o=l,c=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"SIP"'));null===e&&(e=M());if(null!==e){for(t=[],h=l,null!==(n=Y())&&null!==(r=hn())?n=[n,r]:(n=null,l=h);null!==n;)t.push(n),h=l,null!==(n=Y())&&null!==(r=hn())?n=[n,r]:(n=null,l=h);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e,t){if(data.protocol=t.toLowerCase(),data.params||(data.params={}),data.params.text&&'"'===data.params.text[0]){var text=data.params.text;data.text=text.substring(1,text.length-1),delete data.params.text}}(0,e[0]));null===e&&(l=o);return e},reason_param:hn,reason_cause:fn,Require:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},Route:function(){var e,t,n,r,o,c;if(o=l,null!==(e=_n())){for(t=[],c=l,null!==(n=K())&&null!==(r=_n())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=_n())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},route_param:_n,Subscription_State:function(){var e,t,n,r,o,c;if(o=l,null!==(e=pn())){for(t=[],c=l,null!==(n=Y())&&null!==(r=mn())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=mn())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},substate_value:pn,subexp_params:mn,event_reason_value:gn,Subject:function(){var e;return e=null!==(e=D())?e:""},Supported:function(){var e,t,n,r,o,c;if(o=l,null!==(e=M())){for(t=[],c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=M())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e=null!==e?e:""},To:function(){var e,t,n,r,o,c,d;o=l,c=l,null===(e=re())&&(e=Et());if(null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=vn())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=vn())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){var t=data.tag;try{data=new Yn(data.uri,data.display_name,data.params),t&&data.setParam("tag",t)}catch(e){data=-1}}());null===e&&(l=o);return e},to_param:vn,Via:function(){var e,t,n,r,o,c;if(o=l,null!==(e=Tn())){for(t=[],c=l,null!==(n=K())&&null!==(r=Tn())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=K())&&null!==(r=Tn())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},via_param:Tn,via_params:$n,via_ttl:yn,via_maddr:Cn,via_received:An,via_branch:En,response_port:Sn,rport:bn,sent_protocol:Rn,protocol_name:In,transport:wn,sent_by:On,via_host:Nn,via_port:Dn,ttl:Pn,WWW_Authenticate:function(){return zt()},Session_Expires:function(){var e,t,n,r,o,c;if(o=l,null!==(e=xn())){for(t=[],c=l,null!==(n=Y())&&null!==(r=Un())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=Un())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},s_e_expires:xn,s_e_params:Un,s_e_refresher:Mn,extension_header:function(){var e,t,n,r;r=l,null!==(e=M())&&null!==(t=N())&&null!==(n=kn())?e=[e,t,n]:(e=null,l=r);return e},header_value:kn,message_body:function(){var e,t;e=[],t=T();for(;null!==t;)e.push(t),t=T();return e},uuid_URI:function(){var e,t,n;n=l,"uuid:"===input.substr(l,5)?(e="uuid:",l+=5):(e=null,d('"uuid:"'));null!==e&&null!==(t=Ln())?e=[e,t]:(e=null,l=n);return e},uuid:Ln,hex4:qn,hex8:Hn,hex12:Fn,Refer_To:function(){var e,t,n,r,o,c,d;o=l,c=l,null===(e=re())&&(e=Et());if(null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;null!==e&&(e=function(e){try{data=new Yn(data.uri,data.display_name,data.params)}catch(e){data=-1}}());null===e&&(l=o);return e},Replaces:function(){var e,t,n,r,o,c;if(o=l,null!==(e=jn())){for(t=[],c=l,null!==(n=Y())&&null!==(r=Gn())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=Gn())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e},call_id:jn,replaces_param:Gn,to_tag:Bn,from_tag:Vn,early_flag:Wn};if(void 0!==t){if(void 0===r[t])throw new Error("Invalid rule name: "+e(t)+".")}else t="CRLF";var l=0,o=0,c=[];function d(e){l<o||(l>o&&(o=l,c=[]),c.push(e))}function h(){var e;return"\r\n"===input.substr(l,2)?(e="\r\n",l+=2):(e=null,d('"\\r\\n"')),e}function f(){var e;return/^[0-9]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[0-9]")),e}function _(){var e;return/^[a-zA-Z]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[a-zA-Z]")),e}function m(){var e;return/^[0-9a-fA-F]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[0-9a-fA-F]")),e}function v(){var e;return null===(e=y())&&(e=C()),e}function T(){var e;return/^[\0-\xFF]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\0-\\xFF]")),e}function $(){var e;return/^["]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d('["]')),e}function y(){var e;return 32===input.charCodeAt(l)?(e=" ",l++):(e=null,d('" "')),e}function C(){var e;return 9===input.charCodeAt(l)?(e="\t",l++):(e=null,d('"\\t"')),e}function A(){var e;return/^[a-zA-Z0-9]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[a-zA-Z0-9]")),e}function E(){var e;return 59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","'))))))))))),e}function S(){var e;return null===(e=A())&&(e=R()),e}function R(){var e;return 45===input.charCodeAt(l)?(e="-",l++):(e=null,d('"-"')),null===e&&(95===input.charCodeAt(l)?(e="_",l++):(e=null,d('"_"')),null===e&&(46===input.charCodeAt(l)?(e=".",l++):(e=null,d('"."')),null===e&&(33===input.charCodeAt(l)?(e="!",l++):(e=null,d('"!"')),null===e&&(126===input.charCodeAt(l)?(e="~",l++):(e=null,d('"~"')),null===e&&(42===input.charCodeAt(l)?(e="*",l++):(e=null,d('"*"')),null===e&&(39===input.charCodeAt(l)?(e="'",l++):(e=null,d('"\'"')),null===e&&(40===input.charCodeAt(l)?(e="(",l++):(e=null,d('"("')),null===e&&(41===input.charCodeAt(l)?(e=")",l++):(e=null,d('")"')))))))))),e}function I(){var e,t,n,r,o;return r=l,o=l,37===input.charCodeAt(l)?(e="%",l++):(e=null,d('"%"')),null!==e&&null!==(t=m())&&null!==(n=m())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=e.join("")),null===e&&(l=r),e}function w(){var e,t,n,r,o,c;for(r=l,o=l,c=l,e=[],t=v();null!==t;)e.push(t),t=v();if(null!==e&&null!==(t=h())?e=[e,t]:(e=null,l=c),null!==(e=null!==e?e:"")){if(null!==(n=v()))for(t=[];null!==n;)t.push(n),n=v();else t=null;null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return null!==e&&(e=" "),null===e&&(l=r),e}function O(){var e;return e=null!==(e=w())?e:""}function N(){var e,t,n,r,o;for(r=l,o=l,e=[],null===(t=y())&&(t=C());null!==t;)e.push(t),null===(t=y())&&(t=C());return null!==e?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=":"),null===e&&(l=r),e}function D(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(t=P()))for(e=[];null!==t;)e.push(t),t=P();else e=null;if(null!==e){for(t=[],d=l,n=[],r=w();null!==r;)n.push(r),r=w();for(null!==n&&null!==(r=P())?n=[n,r]:(n=null,l=d);null!==n;){for(t.push(n),d=l,n=[],r=w();null!==r;)n.push(r),r=w();null!==n&&null!==(r=P())?n=[n,r]:(n=null,l=d)}null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null!==e&&(e=function(e){return input.substring(l,e)}(o)),null===e&&(l=o),e}function P(){var e;return/^[!-~]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[!-~]")),null===e&&(e=x()),e}function x(){var e;return/^[\x80-\uFFFF]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\x80-\\uFFFF]")),e}function U(){var e;return/^[\x80-\xBF]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\x80-\\xBF]")),e}function M(){var e,t,n;if(n=l,null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')))))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"'))))))))))));else e=null;return null!==e&&(e=function(e){return input.substring(l,e)}(n)),null===e&&(l=n),e}function k(){var e,t,n;if(n=l,null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')))))))))));else e=null;return null!==e&&(e=function(e){return input.substring(l,e)}(n)),null===e&&(l=n),e}function L(){var e,t,n;if(n=l,null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')),null===t&&(40===input.charCodeAt(l)?(t="(",l++):(t=null,d('"("')),null===t&&(41===input.charCodeAt(l)?(t=")",l++):(t=null,d('")"')),null===t&&(60===input.charCodeAt(l)?(t="<",l++):(t=null,d('"<"')),null===t&&(62===input.charCodeAt(l)?(t=">",l++):(t=null,d('">"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(92===input.charCodeAt(l)?(t="\\",l++):(t=null,d('"\\\\"')),null===t&&null===(t=$())&&(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null===t&&(91===input.charCodeAt(l)?(t="[",l++):(t=null,d('"["')),null===t&&(93===input.charCodeAt(l)?(t="]",l++):(t=null,d('"]"')),null===t&&(63===input.charCodeAt(l)?(t="?",l++):(t=null,d('"?"')),null===t&&(123===input.charCodeAt(l)?(t="{",l++):(t=null,d('"{"')),null===t&&(125===input.charCodeAt(l)?(t="}",l++):(t=null,d('"}"')))))))))))))))))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=A())&&(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null===t&&(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null===t&&(33===input.charCodeAt(l)?(t="!",l++):(t=null,d('"!"')),null===t&&(37===input.charCodeAt(l)?(t="%",l++):(t=null,d('"%"')),null===t&&(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null===t&&(95===input.charCodeAt(l)?(t="_",l++):(t=null,d('"_"')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(96===input.charCodeAt(l)?(t="`",l++):(t=null,d('"`"')),null===t&&(39===input.charCodeAt(l)?(t="'",l++):(t=null,d('"\'"')),null===t&&(126===input.charCodeAt(l)?(t="~",l++):(t=null,d('"~"')),null===t&&(40===input.charCodeAt(l)?(t="(",l++):(t=null,d('"("')),null===t&&(41===input.charCodeAt(l)?(t=")",l++):(t=null,d('")"')),null===t&&(60===input.charCodeAt(l)?(t="<",l++):(t=null,d('"<"')),null===t&&(62===input.charCodeAt(l)?(t=">",l++):(t=null,d('">"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(92===input.charCodeAt(l)?(t="\\",l++):(t=null,d('"\\\\"')),null===t&&null===(t=$())&&(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null===t&&(91===input.charCodeAt(l)?(t="[",l++):(t=null,d('"["')),null===t&&(93===input.charCodeAt(l)?(t="]",l++):(t=null,d('"]"')),null===t&&(63===input.charCodeAt(l)?(t="?",l++):(t=null,d('"?"')),null===t&&(123===input.charCodeAt(l)?(t="{",l++):(t=null,d('"{"')),null===t&&(125===input.charCodeAt(l)?(t="}",l++):(t=null,d('"}"'))))))))))))))))))))))));else e=null;return null!==e&&(e=function(e){return input.substring(l,e)}(n)),null===e&&(l=n),e}function H(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(42===input.charCodeAt(l)?(t="*",l++):(t=null,d('"*"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="*"),null===e&&(l=r),e}function F(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="/"),null===e&&(l=r),e}function j(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="="),null===e&&(l=r),e}function G(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(40===input.charCodeAt(l)?(t="(",l++):(t=null,d('"("')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e="("),null===e&&(l=r),e}function B(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(41===input.charCodeAt(l)?(t=")",l++):(t=null,d('")"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=")"),null===e&&(l=r),e}function V(){var e,t,n,r;return n=l,r=l,62===input.charCodeAt(l)?(e=">",l++):(e=null,d('">"')),null!==e&&null!==(t=O())?e=[e,t]:(e=null,l=r),null!==e&&(e=">"),null===e&&(l=n),e}function W(){var e,t,n,r;return n=l,r=l,null!==(e=O())?(60===input.charCodeAt(l)?(t="<",l++):(t=null,d('"<"')),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==e&&(e="<"),null===e&&(l=n),e}function K(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=","),null===e&&(l=r),e}function Y(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=";"),null===e&&(l=r),e}function z(){var e,t,n,r,o;return r=l,o=l,null!==(e=O())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=O())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=":"),null===e&&(l=r),e}function X(){var e,t,n,r;return n=l,r=l,null!==(e=O())&&null!==(t=$())?e=[e,t]:(e=null,l=r),null!==e&&(e='"'),null===e&&(l=n),e}function J(){var e,t,n,r;return n=l,r=l,null!==(e=$())&&null!==(t=O())?e=[e,t]:(e=null,l=r),null!==e&&(e='"'),null===e&&(l=n),e}function Q(){var e;return/^[!-']/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[!-']")),null===e&&(/^[*-[]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[*-[]")),null===e&&(/^[\]-~]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\]-~]")),null===e&&null===(e=x())&&(e=w()))),e}function Z(){var e,t,n,r,o,c;if(o=l,c=l,null!==(e=O()))if(null!==(t=$())){for(n=[],null===(r=te())&&(r=ne());null!==r;)n.push(r),null===(r=te())&&(r=ne());null!==n&&null!==(r=$())?e=[e,t,n,r]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return null!==e&&(e=function(e){return input.substring(l,e)}(o)),null===e&&(l=o),e}function ee(){var e,t,n,r,o,c;if(o=l,c=l,null!==(e=O()))if(null!==(t=$())){for(n=[],null===(r=te())&&(r=ne());null!==r;)n.push(r),null===(r=te())&&(r=ne());null!==n&&null!==(r=$())?e=[e,t,n,r]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return null!==e&&(e=function(e){var t=input.substring(l,e).trim();return t.substring(1,t.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(o)),null===e&&(l=o),e}function te(){var e;return null===(e=w())&&(33===input.charCodeAt(l)?(e="!",l++):(e=null,d('"!"')),null===e&&(/^[#-[]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[#-[]")),null===e&&(/^[\]-~]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[\\]-~]")),null===e&&(e=x())))),e}function ne(){var e,t,n;return n=l,92===input.charCodeAt(l)?(e="\\",l++):(e=null,d('"\\\\"')),null!==e?(/^[\0-\t]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[\\0-\\t]")),null===t&&(/^[\x0B-\f]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[\\x0B-\\f]")),null===t&&(/^[\x0E-]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[\\x0E-]")))),null!==t?e=[e,t]:(e=null,l=n)):(e=null,l=n),e}function re(){var e,t,n,r,o,c;return o=l,c=l,null!==(e=se())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=null!==(n=ue())?n:"")&&null!==(r=he())?e=[e,t,n,r]:(e=null,l=c)):(e=null,l=c),null!==e&&(e=function(e){try{data.uri=new Kn(data.scheme,data.user,data.host,data.port),delete data.scheme,delete data.user,delete data.host,delete data.host_type,delete data.port}catch(e){data=-1}}()),null===e&&(l=o),e}function le(){var e,n,r,o,c,h,f,_;return f=l,_=l,null!==(e=se())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=null!==(r=ue())?r:"")&&null!==(o=he())&&null!==(c=Ee())&&null!==(h=null!==(h=ke())?h:"")?e=[e,n,r,o,c,h]:(e=null,l=_)):(e=null,l=_),null!==e&&(e=function(e){try{data.uri=new Kn(data.scheme,data.user,data.host,data.port,data.uri_params,data.uri_headers),delete data.scheme,delete data.user,delete data.host,delete data.host_type,delete data.port,delete data.uri_params,"SIP_URI"===t&&(data=data.uri)}catch(e){data=-1}}()),null===e&&(l=f),e}function se(){var e;return null===(e=ie())&&(e=oe()),e}function ie(){var e,t,n;return t=l,"sips"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"sips"')),null!==e&&(n=e,e=void(data.scheme=n.toLowerCase())),null===e&&(l=t),e}function oe(){var e,t,n;return t=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"sip"')),null!==e&&(n=e,e=void(data.scheme=n.toLowerCase())),null===e&&(l=t),e}function ue(){var e,t,n,r,o,c;return r=l,o=l,null!==(e=ae())?(c=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=de())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?(64===input.charCodeAt(l)?(n="@",l++):(n=null,d('"@"')),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){data.user=decodeURIComponent(input.substring(l-1,e))}(r)),null===e&&(l=r),e}function ae(){var e,t;if(null===(t=S())&&null===(t=I())&&(t=ce()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=S())&&null===(t=I())&&(t=ce());else e=null;return e}function ce(){var e;return 38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","')),null===e&&(59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"'))))))))),e}function de(){var e,t,n;for(n=l,e=[],null===(t=S())&&null===(t=I())&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')))))));null!==t;)e.push(t),null===(t=S())&&null===(t=I())&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')),null===t&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')))))));return null!==e&&(e=function(e){data.password=input.substring(l,e)}(n)),null===e&&(l=n),e}function he(){var e,t,n,r,o;return r=l,null!==(e=fe())?(o=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Ae())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function fe(){var e,t;return t=l,null===(e=_e())&&null===(e=ye())&&(e=ge()),null!==e&&(e=function(e){return data.host=input.substring(l,e).toLowerCase(),data.host}(t)),null===e&&(l=t),e}function _e(){var e,t,n,r,o,c;for(r=l,o=l,e=[],c=l,null!==(t=pe())?(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n?t=[t,n]:(t=null,l=c)):(t=null,l=c);null!==t;)e.push(t),c=l,null!==(t=pe())?(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n?t=[t,n]:(t=null,l=c)):(t=null,l=c);return null!==e&&null!==(t=me())?(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==(n=null!==n?n:"")?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){return data.host_type="domain",input.substring(l,e)}(r)),null===e&&(l=r),e}function pe(){var e,t,n,r;if(r=l,null!==(e=A())){for(t=[],null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==n;)t.push(n),null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==t?e=[e,t]:(e=null,l=r)}else e=null,l=r;return e}function me(){var e,t,n,r;if(r=l,null!==(e=_())){for(t=[],null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==n;)t.push(n),null===(n=A())&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(95===input.charCodeAt(l)?(n="_",l++):(n=null,d('"_"'))));null!==t?e=[e,t]:(e=null,l=r)}else e=null,l=r;return e}function ge(){var e,t,n,r,o;return r=l,o=l,91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null!==e&&null!==(t=ve())?(93===input.charCodeAt(l)?(n="]",l++):(n=null,d('"]"')),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){return data.host_type="IPv6",input.substring(l,e)}(r)),null===e&&(l=r),e}function ve(){var e,t,n,r,o,c,h,f,_,m,v,T,$,y,C,A;return y=l,C=l,null!==(e=Te())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?(58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?(58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?(58===input.charCodeAt(l)?(f=":",l++):(f=null,d('":"')),null!==f&&null!==(_=Te())?(58===input.charCodeAt(l)?(m=":",l++):(m=null,d('":"')),null!==m&&null!==(v=Te())?(58===input.charCodeAt(l)?(T=":",l++):(T=null,d('":"')),null!==T&&null!==($=$e())?e=[e,t,n,r,o,c,h,f,_,m,v,T,$]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?(58===input.charCodeAt(l)?(_=":",l++):(_=null,d('":"')),null!==_&&null!==(m=Te())?(58===input.charCodeAt(l)?(v=":",l++):(v=null,d('":"')),null!==v&&null!==(T=$e())?e=[e,t,n,r,o,c,h,f,_,m,v,T]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?(58===input.charCodeAt(l)?(_=":",l++):(_=null,d('":"')),null!==_&&null!==(m=$e())?e=[e,t,n,r,o,c,h,f,_,m]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=$e())?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=$e())?e=[e,t,n,r,o,c]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?(58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=$e())?e=[e,t,n,r]:(e=null,l=C)):(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=$e())?e=[e,t]:(e=null,l=C),null===e&&(C=l,"::"===input.substr(l,2)?(e="::",l+=2):(e=null,d('"::"')),null!==e&&null!==(t=Te())?e=[e,t]:(e=null,l=C),null===e&&(C=l,null!==(e=Te())?("::"===input.substr(l,2)?(t="::",l+=2):(t=null,d('"::"')),null!==t&&null!==(n=Te())?(58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?(58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?(58===input.charCodeAt(l)?(f=":",l++):(f=null,d('":"')),null!==f&&null!==(_=Te())?(58===input.charCodeAt(l)?(m=":",l++):(m=null,d('":"')),null!==m&&null!==(v=$e())?e=[e,t,n,r,o,c,h,f,_,m,v]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?("::"===input.substr(l,2)?(n="::",l+=2):(n=null,d('"::"')),null!==n&&null!==(r=Te())?(58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?(58===input.charCodeAt(l)?(_=":",l++):(_=null,d('":"')),null!==_&&null!==(m=$e())?e=[e,t,n,r,o,c,h,f,_,m]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?("::"===input.substr(l,2)?(r="::",l+=2):(r=null,d('"::"')),null!==r&&null!==(o=Te())?(58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?(58===input.charCodeAt(l)?(f=":",l++):(f=null,d('":"')),null!==f&&null!==(_=$e())?e=[e,t,n,r,o,c,h,f,_]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?("::"===input.substr(l,2)?(o="::",l+=2):(o=null,d('"::"')),null!==o&&null!==(c=Te())?(58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=$e())?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?(A=l,58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?o=[o,c]:(o=null,l=A),null!==(o=null!==o?o:"")?("::"===input.substr(l,2)?(c="::",l+=2):(c=null,d('"::"')),null!==c&&null!==(h=$e())?e=[e,t,n,r,o,c,h]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?(A=l,58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?o=[o,c]:(o=null,l=A),null!==(o=null!==o?o:"")?(A=l,58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?c=[c,h]:(c=null,l=A),null!==(c=null!==c?c:"")?("::"===input.substr(l,2)?(h="::",l+=2):(h=null,d('"::"')),null!==h&&null!==(f=Te())?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C),null===e&&(C=l,null!==(e=Te())?(A=l,58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?t=[t,n]:(t=null,l=A),null!==(t=null!==t?t:"")?(A=l,58===input.charCodeAt(l)?(n=":",l++):(n=null,d('":"')),null!==n&&null!==(r=Te())?n=[n,r]:(n=null,l=A),null!==(n=null!==n?n:"")?(A=l,58===input.charCodeAt(l)?(r=":",l++):(r=null,d('":"')),null!==r&&null!==(o=Te())?r=[r,o]:(r=null,l=A),null!==(r=null!==r?r:"")?(A=l,58===input.charCodeAt(l)?(o=":",l++):(o=null,d('":"')),null!==o&&null!==(c=Te())?o=[o,c]:(o=null,l=A),null!==(o=null!==o?o:"")?(A=l,58===input.charCodeAt(l)?(c=":",l++):(c=null,d('":"')),null!==c&&null!==(h=Te())?c=[c,h]:(c=null,l=A),null!==(c=null!==c?c:"")?(A=l,58===input.charCodeAt(l)?(h=":",l++):(h=null,d('":"')),null!==h&&null!==(f=Te())?h=[h,f]:(h=null,l=A),null!==(h=null!==h?h:"")?("::"===input.substr(l,2)?(f="::",l+=2):(f=null,d('"::"')),null!==f?e=[e,t,n,r,o,c,h,f]:(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C)):(e=null,l=C))))))))))))))),null!==e&&(e=function(e){return data.host_type="IPv6",input.substring(l,e)}(y)),null===e&&(l=y),e}function Te(){var e,t,n,r,o;return o=l,null!==(e=m())&&null!==(t=null!==(t=m())?t:"")&&null!==(n=null!==(n=m())?n:"")&&null!==(r=null!==(r=m())?r:"")?e=[e,t,n,r]:(e=null,l=o),e}function $e(){var e,t,n,r;return r=l,null!==(e=Te())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t&&null!==(n=Te())?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),null===e&&(e=ye()),e}function ye(){var e,t,n,r,o,c,h,f,_;return f=l,_=l,null!==(e=Ce())?(46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null!==t&&null!==(n=Ce())?(46===input.charCodeAt(l)?(r=".",l++):(r=null,d('"."')),null!==r&&null!==(o=Ce())?(46===input.charCodeAt(l)?(c=".",l++):(c=null,d('"."')),null!==c&&null!==(h=Ce())?e=[e,t,n,r,o,c,h]:(e=null,l=_)):(e=null,l=_)):(e=null,l=_)):(e=null,l=_),null!==e&&(e=function(e){return data.host_type="IPv4",input.substring(l,e)}(f)),null===e&&(l=f),e}function Ce(){var e,t,n,r;return r=l,"25"===input.substr(l,2)?(e="25",l+=2):(e=null,d('"25"')),null!==e?(/^[0-5]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[0-5]")),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null===e&&(r=l,50===input.charCodeAt(l)?(e="2",l++):(e=null,d('"2"')),null!==e?(/^[0-4]/.test(input.charAt(l))?(t=input.charAt(l),l++):(t=null,d("[0-4]")),null!==t&&null!==(n=f())?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),null===e&&(r=l,49===input.charCodeAt(l)?(e="1",l++):(e=null,d('"1"')),null!==e&&null!==(t=f())&&null!==(n=f())?e=[e,t,n]:(e=null,l=r),null===e&&(r=l,/^[1-9]/.test(input.charAt(l))?(e=input.charAt(l),l++):(e=null,d("[1-9]")),null!==e&&null!==(t=f())?e=[e,t]:(e=null,l=r),null===e&&(e=f())))),e}function Ae(){var e,t,n,r,o,c,d,h;return c=l,d=l,null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?e=[e,t,n,r,o]:(e=null,l=d),null!==e&&(h=e,h=parseInt(h.join("")),data.port=h,e=h),null===e&&(l=c),e}function Ee(){var e,t,n,r;for(e=[],r=l,59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null!==t&&null!==(n=Se())?t=[t,n]:(t=null,l=r);null!==t;)e.push(t),r=l,59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null!==t&&null!==(n=Se())?t=[t,n]:(t=null,l=r);return e}function Se(){var e;return null===(e=be())&&null===(e=Re())&&null===(e=Ie())&&null===(e=we())&&null===(e=Oe())&&null===(e=Ne())&&(e=De()),e}function be(){var e,t,n,r,o;return n=l,r=l,"transport="===input.substr(l,10).toLowerCase()?(e=input.substr(l,10),l+=10):(e=null,d('"transport="')),null!==e?("udp"===input.substr(l,3).toLowerCase()?(t=input.substr(l,3),l+=3):(t=null,d('"udp"')),null===t&&("tcp"===input.substr(l,3).toLowerCase()?(t=input.substr(l,3),l+=3):(t=null,d('"tcp"')),null===t&&("sctp"===input.substr(l,4).toLowerCase()?(t=input.substr(l,4),l+=4):(t=null,d('"sctp"')),null===t&&("tls"===input.substr(l,3).toLowerCase()?(t=input.substr(l,3),l+=3):(t=null,d('"tls"')),null===t&&(t=M())))),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.transport=o.toLowerCase())),null===e&&(l=n),e}function Re(){var e,t,n,r,o;return n=l,r=l,"user="===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"user="')),null!==e?("phone"===input.substr(l,5).toLowerCase()?(t=input.substr(l,5),l+=5):(t=null,d('"phone"')),null===t&&("ip"===input.substr(l,2).toLowerCase()?(t=input.substr(l,2),l+=2):(t=null,d('"ip"')),null===t&&(t=M())),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.user=o.toLowerCase())),null===e&&(l=n),e}function Ie(){var e,t,n,r,o;return n=l,r=l,"method="===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"method="')),null!==e&&null!==(t=vt())?e=[e,t]:(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.method=o)),null===e&&(l=n),e}function we(){var e,t,n,r,o;return n=l,r=l,"ttl="===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"ttl="')),null!==e&&null!==(t=Pn())?e=[e,t]:(e=null,l=r),null!==e&&(o=e[1],data.params||(data.params={}),e=void(data.params.ttl=o)),null===e&&(l=n),e}function Oe(){var e,t,n,r,o;return n=l,r=l,"maddr="===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"maddr="')),null!==e&&null!==(t=fe())?e=[e,t]:(e=null,l=r),null!==e&&(o=e[1],data.uri_params||(data.uri_params={}),e=void(data.uri_params.maddr=o)),null===e&&(l=n),e}function Ne(){var e,t,n,r,o,c;return r=l,o=l,"lr"===input.substr(l,2).toLowerCase()?(e=input.substr(l,2),l+=2):(e=null,d('"lr"')),null!==e?(c=l,61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=M())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(data.uri_params||(data.uri_params={}),e=void(data.uri_params.lr=void 0)),null===e&&(l=r),e}function De(){var e,t,n,r,o,c,param,h;return r=l,o=l,null!==(e=Pe())?(c=l,61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=xe())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(param=e[0],h=e[1],data.uri_params||(data.uri_params={}),h=void 0===h?void 0:h[1],e=void(data.uri_params[param.toLowerCase()]=h)),null===e&&(l=r),e}function Pe(){var e,t,n;if(n=l,null!==(t=Ue()))for(e=[];null!==t;)e.push(t),t=Ue();else e=null;return null!==e&&(e=e.join("")),null===e&&(l=n),e}function xe(){var e,t,n;if(n=l,null!==(t=Ue()))for(e=[];null!==t;)e.push(t),t=Ue();else e=null;return null!==e&&(e=e.join("")),null===e&&(l=n),e}function Ue(){var e;return null===(e=Me())&&null===(e=S())&&(e=I()),e}function Me(){var e;return 91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null===e&&(93===input.charCodeAt(l)?(e="]",l++):(e=null,d('"]"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')))))))),e}function ke(){var e,t,n,r,o,c,h;if(c=l,63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null!==e)if(null!==(t=Le())){for(n=[],h=l,38===input.charCodeAt(l)?(r="&",l++):(r=null,d('"&"')),null!==r&&null!==(o=Le())?r=[r,o]:(r=null,l=h);null!==r;)n.push(r),h=l,38===input.charCodeAt(l)?(r="&",l++):(r=null,d('"&"')),null!==r&&null!==(o=Le())?r=[r,o]:(r=null,l=h);null!==n?e=[e,t,n]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return e}function Le(){var e,t,n,r,o,c,h;return r=l,o=l,null!==(e=qe())?(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null!==t&&null!==(n=He())?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[0],h=e[2],c=c.join("").toLowerCase(),h=h.join(""),data.uri_headers||(data.uri_headers={}),e=void(data.uri_headers[c]?data.uri_headers[c].push(h):data.uri_headers[c]=[h])),null===e&&(l=r),e}function qe(){var e,t;if(null===(t=Fe())&&null===(t=S())&&(t=I()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=Fe())&&null===(t=S())&&(t=I());else e=null;return e}function He(){var e,t;for(e=[],null===(t=Fe())&&null===(t=S())&&(t=I());null!==t;)e.push(t),null===(t=Fe())&&null===(t=S())&&(t=I());return e}function Fe(){var e;return 91===input.charCodeAt(l)?(e="[",l++):(e=null,d('"["')),null===e&&(93===input.charCodeAt(l)?(e="]",l++):(e=null,d('"]"')),null===e&&(47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')))))))),e}function je(){var e,t,n,r,o,c;return c=l,null!==(e=vt())&&null!==(t=y())&&null!==(n=Ge())&&null!==(r=y())&&null!==(o=ot())?e=[e,t,n,r,o]:(e=null,l=c),e}function Ge(){var e;return null===(e=le())&&(e=Be()),e}function Be(){var e,t,n,r;return r=l,null!==(e=tt())?(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null!==t?(null===(n=Ve())&&(n=Ye()),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r)):(e=null,l=r),e}function Ve(){var e,t,n,r,o;return r=l,null===(e=We())&&(e=Ke()),null!==e?(o=l,63===input.charCodeAt(l)?(t="?",l++):(t=null,d('"?"')),null!==t&&null!==(n=it())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function We(){var e,t,n,r;return r=l,"//"===input.substr(l,2)?(e="//",l+=2):(e=null,d('"//"')),null!==e&&null!==(t=nt())&&null!==(n=null!==(n=Ke())?n:"")?e=[e,t,n]:(e=null,l=r),e}function Ke(){var e,t,n;return n=l,47===input.charCodeAt(l)?(e="/",l++):(e=null,d('"/"')),null!==e&&null!==(t=Je())?e=[e,t]:(e=null,l=n),e}function Ye(){var e,t,n,r;if(r=l,null!==(e=Xe())){for(t=[],n=ze();null!==n;)t.push(n),n=ze();null!==t?e=[e,t]:(e=null,l=r)}else e=null,l=r;return e}function ze(){var e;return null===(e=E())&&null===(e=S())&&(e=I()),e}function Xe(){var e;return null===(e=S())&&null===(e=I())&&(59===input.charCodeAt(l)?(e=";",l++):(e=null,d('";"')),null===e&&(63===input.charCodeAt(l)?(e="?",l++):(e=null,d('"?"')),null===e&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","'))))))))))),e}function Je(){var e,t,n,r,o,c;if(o=l,null!==(e=Qe())){for(t=[],c=l,47===input.charCodeAt(l)?(n="/",l++):(n=null,d('"/"')),null!==n&&null!==(r=Qe())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,47===input.charCodeAt(l)?(n="/",l++):(n=null,d('"/"')),null!==n&&null!==(r=Qe())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function Qe(){var e,t,n,r,o,c;for(o=l,e=[],t=et();null!==t;)e.push(t),t=et();if(null!==e){for(t=[],c=l,59===input.charCodeAt(l)?(n=";",l++):(n=null,d('";"')),null!==n&&null!==(r=Ze())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,59===input.charCodeAt(l)?(n=";",l++):(n=null,d('";"')),null!==n&&null!==(r=Ze())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function Ze(){var e,t;for(e=[],t=et();null!==t;)e.push(t),t=et();return e}function et(){var e;return null===(e=S())&&null===(e=I())&&(58===input.charCodeAt(l)?(e=":",l++):(e=null,d('":"')),null===e&&(64===input.charCodeAt(l)?(e="@",l++):(e=null,d('"@"')),null===e&&(38===input.charCodeAt(l)?(e="&",l++):(e=null,d('"&"')),null===e&&(61===input.charCodeAt(l)?(e="=",l++):(e=null,d('"="')),null===e&&(43===input.charCodeAt(l)?(e="+",l++):(e=null,d('"+"')),null===e&&(36===input.charCodeAt(l)?(e="$",l++):(e=null,d('"$"')),null===e&&(44===input.charCodeAt(l)?(e=",",l++):(e=null,d('","'))))))))),e}function tt(){var e,t,n,r,o;if(r=l,o=l,null!==(e=_())){for(t=[],null===(n=_())&&null===(n=f())&&(43===input.charCodeAt(l)?(n="+",l++):(n=null,d('"+"')),null===n&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')))));null!==n;)t.push(n),null===(n=_())&&null===(n=f())&&(43===input.charCodeAt(l)?(n="+",l++):(n=null,d('"+"')),null===n&&(45===input.charCodeAt(l)?(n="-",l++):(n=null,d('"-"')),null===n&&(46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')))));null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return null!==e&&(e=function(e){data.scheme=input.substring(l,e)}(r)),null===e&&(l=r),e}function nt(){var e;return null===(e=lt())&&(e=st()),e}function lt(){var e,t,n,r;return n=l,r=l,null!==(e=ue())?(64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null!==t?e=[e,t]:(e=null,l=r)):(e=null,l=r),null!==(e=null!==e?e:"")&&null!==(t=he())?e=[e,t]:(e=null,l=n),e=null!==e?e:""}function st(){var e,t;if(null===(t=S())&&null===(t=I())&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')),null===t&&(59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null===t&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"')))))))))),null!==t)for(e=[];null!==t;)e.push(t),null===(t=S())&&null===(t=I())&&(36===input.charCodeAt(l)?(t="$",l++):(t=null,d('"$"')),null===t&&(44===input.charCodeAt(l)?(t=",",l++):(t=null,d('","')),null===t&&(59===input.charCodeAt(l)?(t=";",l++):(t=null,d('";"')),null===t&&(58===input.charCodeAt(l)?(t=":",l++):(t=null,d('":"')),null===t&&(64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null===t&&(38===input.charCodeAt(l)?(t="&",l++):(t=null,d('"&"')),null===t&&(61===input.charCodeAt(l)?(t="=",l++):(t=null,d('"="')),null===t&&(43===input.charCodeAt(l)?(t="+",l++):(t=null,d('"+"'))))))))));else e=null;return e}function it(){var e,t;for(e=[],t=ze();null!==t;)e.push(t),t=ze();return e}function ot(){var e,t,n,r,o,c,h,_;if(h=l,_=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"SIP"')),null!==e)if(47===input.charCodeAt(l)?(t="/",l++):(t=null,d('"/"')),null!==t){if(null!==(r=f()))for(n=[];null!==r;)n.push(r),r=f();else n=null;if(null!==n)if(46===input.charCodeAt(l)?(r=".",l++):(r=null,d('"."')),null!==r){if(null!==(c=f()))for(o=[];null!==c;)o.push(c),c=f();else o=null;null!==o?e=[e,t,n,r,o]:(e=null,l=_)}else e=null,l=_;else e=null,l=_}else e=null,l=_;else e=null,l=_;return null!==e&&(e=function(e){data.sip_version=input.substring(l,e)}(h)),null===e&&(l=h),e}function ut(){var e;return"INVITE"===input.substr(l,6)?(e="INVITE",l+=6):(e=null,d('"INVITE"')),e}function at(){var e;return"ACK"===input.substr(l,3)?(e="ACK",l+=3):(e=null,d('"ACK"')),e}function ct(){var e;return"OPTIONS"===input.substr(l,7)?(e="OPTIONS",l+=7):(e=null,d('"OPTIONS"')),e}function ht(){var e;return"BYE"===input.substr(l,3)?(e="BYE",l+=3):(e=null,d('"BYE"')),e}function ft(){var e;return"CANCEL"===input.substr(l,6)?(e="CANCEL",l+=6):(e=null,d('"CANCEL"')),e}function _t(){var e;return"REGISTER"===input.substr(l,8)?(e="REGISTER",l+=8):(e=null,d('"REGISTER"')),e}function pt(){var e;return"SUBSCRIBE"===input.substr(l,9)?(e="SUBSCRIBE",l+=9):(e=null,d('"SUBSCRIBE"')),e}function mt(){var e;return"NOTIFY"===input.substr(l,6)?(e="NOTIFY",l+=6):(e=null,d('"NOTIFY"')),e}function gt(){var e;return"REFER"===input.substr(l,5)?(e="REFER",l+=5):(e=null,d('"REFER"')),e}function vt(){var e,t;return t=l,null===(e=ut())&&null===(e=at())&&null===(e=ct())&&null===(e=ht())&&null===(e=ft())&&null===(e=_t())&&null===(e=pt())&&null===(e=mt())&&null===(e=gt())&&(e=M()),null!==e&&(e=function(e){return data.method=input.substring(l,e),data.method}(t)),null===e&&(l=t),e}function Tt(){var e,t,n,r,o,c;return c=l,null!==(e=ot())&&null!==(t=y())&&null!==(n=$t())&&null!==(r=y())&&null!==(o=Ct())?e=[e,t,n,r,o]:(e=null,l=c),e}function $t(){var e,t,n;return t=l,null!==(e=yt())&&(n=e,e=void(data.status_code=parseInt(n.join("")))),null===e&&(l=t),e}function yt(){var e,t,n,r;return r=l,null!==(e=f())&&null!==(t=f())&&null!==(n=f())?e=[e,t,n]:(e=null,l=r),e}function Ct(){var e,t,n;for(n=l,e=[],null===(t=E())&&null===(t=S())&&null===(t=I())&&null===(t=x())&&null===(t=U())&&null===(t=y())&&(t=C());null!==t;)e.push(t),null===(t=E())&&null===(t=S())&&null===(t=I())&&null===(t=x())&&null===(t=U())&&null===(t=y())&&(t=C());return null!==e&&(e=function(e){data.reason_phrase=input.substring(l,e)}(n)),null===e&&(l=n),e}function At(){var e,t,n,r,o,c,d;if(o=l,c=l,null===(e=re())&&(e=Et()),null!==e){for(t=[],d=l,null!==(n=Y())&&null!==(r=bt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=bt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null!==e&&(e=function(e){var header;data.multi_header||(data.multi_header=[]);try{header=new Yn(data.uri,data.display_name,data.params),delete data.uri,delete data.display_name,delete data.params}catch(e){header=null}data.multi_header.push({possition:l,offset:e,parsed:header})}(o)),null===e&&(l=o),e}function Et(){var e,t,n,r,o;return o=l,null!==(e=null!==(e=St())?e:"")&&null!==(t=W())&&null!==(n=le())&&null!==(r=V())?e=[e,t,n,r]:(e=null,l=o),e}function St(){var e,t,n,r,o,c,d,h;if(o=l,c=l,null!==(e=M())){for(t=[],d=l,null!==(n=w())&&null!==(r=M())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=w())&&null!==(r=M())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null===e&&(e=ee()),null!==e&&(h=e,e=void(data.display_name="string"==typeof h?h:h[1].reduce((function(e,t){return e+t[0]+t[1]}),h[0]))),null===e&&(l=o),e}function bt(){var e;return null===(e=Rt())&&null===(e=It())&&(e=Nt()),e}function Rt(){var e,t,n,r,o,q;return r=l,o=l,"q"===input.substr(l,1).toLowerCase()?(e=input.substr(l,1),l++):(e=null,d('"q"')),null!==e&&null!==(t=j())&&null!==(n=Ot())?e=[e,t,n]:(e=null,l=o),null!==e&&(q=e[2],data.params||(data.params={}),e=void(data.params.q=q)),null===e&&(l=r),e}function It(){var e,t,n,r,o,c;return r=l,o=l,"expires"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"expires"')),null!==e&&null!==(t=j())&&null!==(n=wt())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],data.params||(data.params={}),e=void(data.params.expires=c)),null===e&&(l=r),e}function wt(){var e,t,n;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=parseInt(e.join(""))),null===e&&(l=n),e}function Ot(){var e,t,n,r,o,c,h,_;return c=l,h=l,48===input.charCodeAt(l)?(e="0",l++):(e=null,d('"0"')),null!==e?(_=l,46===input.charCodeAt(l)?(t=".",l++):(t=null,d('"."')),null!==t&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?t=[t,n,r,o]:(t=null,l=_),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=h)):(e=null,l=h),null!==e&&(e=function(e){return parseFloat(input.substring(l,e))}(c)),null===e&&(l=c),e}function Nt(){var e,t,n,r,o,c,param,d;return r=l,o=l,null!==(e=M())?(c=l,null!==(t=j())&&null!==(n=Dt())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(param=e[0],d=e[1],data.params||(data.params={}),d=void 0===d?void 0:d[1],e=void(data.params[param.toLowerCase()]=d)),null===e&&(l=r),e}function Dt(){var e;return null===(e=M())&&null===(e=fe())&&(e=Z()),e}function Pt(){var e;return"render"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"render"')),null===e&&("session"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"session"')),null===e&&("icon"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"icon"')),null===e&&("alert"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"alert"')),null===e&&(e=M())))),e}function xt(){var e;return null===(e=Ut())&&(e=Nt()),e}function Ut(){var e,t,n,r;return r=l,"handling"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"handling"')),null!==e&&null!==(t=j())?("optional"===input.substr(l,8).toLowerCase()?(n=input.substr(l,8),l+=8):(n=null,d('"optional"')),null===n&&("required"===input.substr(l,8).toLowerCase()?(n=input.substr(l,8),l+=8):(n=null,d('"required"')),null===n&&(n=M())),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),e}function Mt(){var e,t,n,r,o,c,d,h;if(d=l,null!==(e=kt()))if(null!==(t=F()))if(null!==(n=jt())){for(r=[],h=l,null!==(o=Y())&&null!==(c=Gt())?o=[o,c]:(o=null,l=h);null!==o;)r.push(o),h=l,null!==(o=Y())&&null!==(c=Gt())?o=[o,c]:(o=null,l=h);null!==r?e=[e,t,n,r]:(e=null,l=d)}else e=null,l=d;else e=null,l=d;else e=null,l=d;return e}function kt(){var e;return null===(e=Lt())&&(e=qt()),e}function Lt(){var e;return"text"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"text"')),null===e&&("image"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"image"')),null===e&&("audio"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"audio"')),null===e&&("video"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"video"')),null===e&&("application"===input.substr(l,11).toLowerCase()?(e=input.substr(l,11),l+=11):(e=null,d('"application"')),null===e&&(e=Ht()))))),e}function qt(){var e;return"message"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"message"')),null===e&&("multipart"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"multipart"')),null===e&&(e=Ht())),e}function Ht(){var e;return null===(e=M())&&(e=Ft()),e}function Ft(){var e,t,n;return n=l,"x-"===input.substr(l,2).toLowerCase()?(e=input.substr(l,2),l+=2):(e=null,d('"x-"')),null!==e&&null!==(t=M())?e=[e,t]:(e=null,l=n),e}function jt(){var e;return null===(e=Ht())&&(e=M()),e}function Gt(){var e,t,n,r;return r=l,null!==(e=M())&&null!==(t=j())&&null!==(n=Bt())?e=[e,t,n]:(e=null,l=r),e}function Bt(){var e;return null===(e=M())&&(e=Z()),e}function Vt(){var e,t,n,r;if(n=l,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(r=e,e=void(data.value=parseInt(r.join("")))),null===e&&(l=n),e}function Wt(){var e,t,n,r,o,c;if(o=l,null!==(e=k())){for(t=[],c=l,46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n&&null!==(r=k())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,46===input.charCodeAt(l)?(n=".",l++):(n=null,d('"."')),null!==n&&null!==(r=k())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function Kt(){var e;return null===(e=Yt())&&(e=Nt()),e}function Yt(){var e,t,n,r,o,c;return r=l,o=l,"tag"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"tag"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.tag=c)),null===e&&(l=r),e}function zt(){var e,t,n,r,o,c,h,f;if(h=l,"digest"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"Digest"')),null!==e)if(null!==(t=w()))if(null!==(n=Qt())){for(r=[],f=l,null!==(o=K())&&null!==(c=Qt())?o=[o,c]:(o=null,l=f);null!==o;)r.push(o),f=l,null!==(o=K())&&null!==(c=Qt())?o=[o,c]:(o=null,l=f);null!==r?e=[e,t,n,r]:(e=null,l=h)}else e=null,l=h;else e=null,l=h;else e=null,l=h;return null===e&&(e=Xt()),e}function Xt(){var e,t,n,r,o,c,d,h;if(d=l,null!==(e=M()))if(null!==(t=w()))if(null!==(n=Jt())){for(r=[],h=l,null!==(o=K())&&null!==(c=Jt())?o=[o,c]:(o=null,l=h);null!==o;)r.push(o),h=l,null!==(o=K())&&null!==(c=Jt())?o=[o,c]:(o=null,l=h);null!==r?e=[e,t,n,r]:(e=null,l=d)}else e=null,l=d;else e=null,l=d;else e=null,l=d;return e}function Jt(){var e,t,n,r;return r=l,null!==(e=M())&&null!==(t=j())?(null===(n=M())&&(n=Z()),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),e}function Qt(){var e;return null===(e=Zt())&&null===(e=tn())&&null===(e=rn())&&null===(e=sn())&&null===(e=on())&&null===(e=un())&&null===(e=an())&&(e=Jt()),e}function Zt(){var e,t,n,r;return r=l,"realm"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"realm"')),null!==e&&null!==(t=j())&&null!==(n=en())?e=[e,t,n]:(e=null,l=r),e}function en(){var e,t,n;return t=l,null!==(e=ee())&&(n=e,e=void(data.realm=n)),null===e&&(l=t),e}function tn(){var e,t,n,r,o,c,h,f,_;if(f=l,"domain"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"domain"')),null!==e)if(null!==(t=j()))if(null!==(n=X()))if(null!==(r=nn())){if(o=[],_=l,null!==(h=y()))for(c=[];null!==h;)c.push(h),h=y();else c=null;for(null!==c&&null!==(h=nn())?c=[c,h]:(c=null,l=_);null!==c;){if(o.push(c),_=l,null!==(h=y()))for(c=[];null!==h;)c.push(h),h=y();else c=null;null!==c&&null!==(h=nn())?c=[c,h]:(c=null,l=_)}null!==o&&null!==(c=J())?e=[e,t,n,r,o,c]:(e=null,l=f)}else e=null,l=f;else e=null,l=f;else e=null,l=f;else e=null,l=f;return e}function nn(){var e;return null===(e=Be())&&(e=Ke()),e}function rn(){var e,t,n,r;return r=l,"nonce"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"nonce"')),null!==e&&null!==(t=j())&&null!==(n=ln())?e=[e,t,n]:(e=null,l=r),e}function ln(){var e,t,n;return t=l,null!==(e=ee())&&(n=e,e=void(data.nonce=n)),null===e&&(l=t),e}function sn(){var e,t,n,r,o,c;return r=l,o=l,"opaque"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"opaque"')),null!==e&&null!==(t=j())&&null!==(n=ee())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.opaque=c)),null===e&&(l=r),e}function on(){var e,t,n,r,o;return r=l,"stale"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"stale"')),null!==e&&null!==(t=j())?(o=l,"true"===input.substr(l,4).toLowerCase()?(n=input.substr(l,4),l+=4):(n=null,d('"true"')),null!==n&&(n=void(data.stale=!0)),null===n&&(l=o),null===n&&(o=l,"false"===input.substr(l,5).toLowerCase()?(n=input.substr(l,5),l+=5):(n=null,d('"false"')),null!==n&&(n=void(data.stale=!1)),null===n&&(l=o)),null!==n?e=[e,t,n]:(e=null,l=r)):(e=null,l=r),e}function un(){var e,t,n,r,o,c;return r=l,o=l,"algorithm"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"algorithm"')),null!==e&&null!==(t=j())?("md5"===input.substr(l,3).toLowerCase()?(n=input.substr(l,3),l+=3):(n=null,d('"MD5"')),null===n&&("md5-sess"===input.substr(l,8).toLowerCase()?(n=input.substr(l,8),l+=8):(n=null,d('"MD5-sess"')),null===n&&(n=M())),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[2],e=void(data.algorithm=c.toUpperCase())),null===e&&(l=r),e}function an(){var e,t,n,r,o,c,h,f,_,m;if(f=l,"qop"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"qop"')),null!==e)if(null!==(t=j()))if(null!==(n=X())){if(_=l,null!==(r=cn())){for(o=[],m=l,44===input.charCodeAt(l)?(c=",",l++):(c=null,d('","')),null!==c&&null!==(h=cn())?c=[c,h]:(c=null,l=m);null!==c;)o.push(c),m=l,44===input.charCodeAt(l)?(c=",",l++):(c=null,d('","')),null!==c&&null!==(h=cn())?c=[c,h]:(c=null,l=m);null!==o?r=[r,o]:(r=null,l=_)}else r=null,l=_;null!==r&&null!==(o=J())?e=[e,t,n,r,o]:(e=null,l=f)}else e=null,l=f;else e=null,l=f;else e=null,l=f;return e}function cn(){var e,t,n;return t=l,"auth-int"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"auth-int"')),null===e&&("auth"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"auth"')),null===e&&(e=M())),null!==e&&(n=e,data.qop||(data.qop=[]),e=void data.qop.push(n.toLowerCase())),null===e&&(l=t),e}function dn(){var e,t,n,r,o,c,d;if(o=l,c=l,null!==(e=Et())){for(t=[],d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==n;)t.push(n),d=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=d);null!==t?e=[e,t]:(e=null,l=c)}else e=null,l=c;return null!==e&&(e=function(e){var header;data.multi_header||(data.multi_header=[]);try{header=new Yn(data.uri,data.display_name,data.params),delete data.uri,delete data.display_name,delete data.params}catch(e){header=null}data.multi_header.push({possition:l,offset:e,parsed:header})}(o)),null===e&&(l=o),e}function hn(){var e;return null===(e=fn())&&(e=Nt()),e}function fn(){var e,t,n,r,o,c,h;if(o=l,c=l,"cause"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"cause"')),null!==e)if(null!==(t=j())){if(null!==(r=f()))for(n=[];null!==r;)n.push(r),r=f();else n=null;null!==n?e=[e,t,n]:(e=null,l=c)}else e=null,l=c;else e=null,l=c;return null!==e&&(h=e[2],e=void(data.cause=parseInt(h.join("")))),null===e&&(l=o),e}function _n(){var e,t,n,r,o,c;if(o=l,null!==(e=Et())){for(t=[],c=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=c);null!==n;)t.push(n),c=l,null!==(n=Y())&&null!==(r=Nt())?n=[n,r]:(n=null,l=c);null!==t?e=[e,t]:(e=null,l=o)}else e=null,l=o;return e}function pn(){var e,t;return t=l,"active"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"active"')),null===e&&("pending"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"pending"')),null===e&&("terminated"===input.substr(l,10).toLowerCase()?(e=input.substr(l,10),l+=10):(e=null,d('"terminated"')),null===e&&(e=M()))),null!==e&&(e=function(e){data.state=input.substring(l,e)}(t)),null===e&&(l=t),e}function mn(){var e,t,n,r,o,c,h,f;return r=l,o=l,"reason"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"reason"')),null!==e&&null!==(t=j())&&null!==(n=gn())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=void(void 0!==(c=e[2])&&(data.reason=c))),null===e&&(l=r),null===e&&(r=l,o=l,"expires"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"expires"')),null!==e&&null!==(t=j())&&null!==(n=wt())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=void(void 0!==(f=e[2])&&(data.expires=f))),null===e&&(l=r),null===e&&(r=l,o=l,"retry_after"===input.substr(l,11).toLowerCase()?(e=input.substr(l,11),l+=11):(e=null,d('"retry_after"')),null!==e&&null!==(t=j())&&null!==(n=wt())?e=[e,t,n]:(e=null,l=o),null!==e&&(e=void(void 0!==(h=e[2])&&(data.retry_after=h))),null===e&&(l=r),null===e&&(e=Nt()))),e}function gn(){var e;return"deactivated"===input.substr(l,11).toLowerCase()?(e=input.substr(l,11),l+=11):(e=null,d('"deactivated"')),null===e&&("probation"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"probation"')),null===e&&("rejected"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"rejected"')),null===e&&("timeout"===input.substr(l,7).toLowerCase()?(e=input.substr(l,7),l+=7):(e=null,d('"timeout"')),null===e&&("giveup"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"giveup"')),null===e&&("noresource"===input.substr(l,10).toLowerCase()?(e=input.substr(l,10),l+=10):(e=null,d('"noresource"')),null===e&&("invariant"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"invariant"')),null===e&&(e=M()))))))),e}function vn(){var e;return null===(e=Yt())&&(e=Nt()),e}function Tn(){var e,t,n,r,o,c,d,h;if(d=l,null!==(e=Rn()))if(null!==(t=w()))if(null!==(n=On())){for(r=[],h=l,null!==(o=Y())&&null!==(c=$n())?o=[o,c]:(o=null,l=h);null!==o;)r.push(o),h=l,null!==(o=Y())&&null!==(c=$n())?o=[o,c]:(o=null,l=h);null!==r?e=[e,t,n,r]:(e=null,l=d)}else e=null,l=d;else e=null,l=d;else e=null,l=d;return e}function $n(){var e;return null===(e=yn())&&null===(e=Cn())&&null===(e=An())&&null===(e=En())&&null===(e=Sn())&&(e=Nt()),e}function yn(){var e,t,n,r,o,c;return r=l,o=l,"ttl"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"ttl"')),null!==e&&null!==(t=j())&&null!==(n=Pn())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.ttl=c)),null===e&&(l=r),e}function Cn(){var e,t,n,r,o,c;return r=l,o=l,"maddr"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"maddr"')),null!==e&&null!==(t=j())&&null!==(n=fe())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.maddr=c)),null===e&&(l=r),e}function An(){var e,t,n,r,o,c;return r=l,o=l,"received"===input.substr(l,8).toLowerCase()?(e=input.substr(l,8),l+=8):(e=null,d('"received"')),null!==e&&null!==(t=j())?(null===(n=ye())&&(n=ve()),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[2],e=void(data.received=c)),null===e&&(l=r),e}function En(){var e,t,n,r,o,c;return r=l,o=l,"branch"===input.substr(l,6).toLowerCase()?(e=input.substr(l,6),l+=6):(e=null,d('"branch"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.branch=c)),null===e&&(l=r),e}function Sn(){var e,t,n,r,o;return r=l,"rport"===input.substr(l,5).toLowerCase()?(e=input.substr(l,5),l+=5):(e=null,d('"rport"')),null!==e?(o=l,null!==(t=j())&&null!==(n=bn())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function bn(){var e,t,n,r,o,c,d,h;return c=l,d=l,null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?e=[e,t,n,r,o]:(e=null,l=d),null!==e&&(h=e,e=void(data.rport=parseInt(h.join("")))),null===e&&(l=c),e}function Rn(){var e,t,n,r,o,c;return c=l,null!==(e=In())&&null!==(t=F())&&null!==(n=M())&&null!==(r=F())&&null!==(o=wn())?e=[e,t,n,r,o]:(e=null,l=c),e}function In(){var e,t,n;return t=l,"sip"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"SIP"')),null===e&&(e=M()),null!==e&&(n=e,e=void(data.protocol=n)),null===e&&(l=t),e}function wn(){var e,t,n;return t=l,"udp"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"UDP"')),null===e&&("tcp"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"TCP"')),null===e&&("tls"===input.substr(l,3).toLowerCase()?(e=input.substr(l,3),l+=3):(e=null,d('"TLS"')),null===e&&("sctp"===input.substr(l,4).toLowerCase()?(e=input.substr(l,4),l+=4):(e=null,d('"SCTP"')),null===e&&(e=M())))),null!==e&&(n=e,e=void(data.transport=n)),null===e&&(l=t),e}function On(){var e,t,n,r,o;return r=l,null!==(e=Nn())?(o=l,null!==(t=z())&&null!==(n=Dn())?t=[t,n]:(t=null,l=o),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=r)):(e=null,l=r),e}function Nn(){var e,t;return t=l,null===(e=ye())&&null===(e=ge())&&(e=_e()),null!==e&&(e=function(e){data.host=input.substring(l,e)}(t)),null===e&&(l=t),e}function Dn(){var e,t,n,r,o,c,d,h;return c=l,d=l,null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(o=null!==(o=f())?o:"")?e=[e,t,n,r,o]:(e=null,l=d),null!==e&&(h=e,e=void(data.port=parseInt(h.join("")))),null===e&&(l=c),e}function Pn(){var e,t,n,r,o;return r=l,o=l,null!==(e=f())&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?e=[e,t,n]:(e=null,l=o),null!==e&&(e=parseInt(e.join(""))),null===e&&(l=r),e}function xn(){var e,t,n;return t=l,null!==(e=wt())&&(n=e,e=void(data.expires=n)),null===e&&(l=t),e}function Un(){var e;return null===(e=Mn())&&(e=Nt()),e}function Mn(){var e,t,n,r,o,c;return r=l,o=l,"refresher"===input.substr(l,9).toLowerCase()?(e=input.substr(l,9),l+=9):(e=null,d('"refresher"')),null!==e&&null!==(t=j())?("uac"===input.substr(l,3).toLowerCase()?(n=input.substr(l,3),l+=3):(n=null,d('"uac"')),null===n&&("uas"===input.substr(l,3).toLowerCase()?(n=input.substr(l,3),l+=3):(n=null,d('"uas"'))),null!==n?e=[e,t,n]:(e=null,l=o)):(e=null,l=o),null!==e&&(c=e[2],e=void(data.refresher=c.toLowerCase())),null===e&&(l=r),e}function kn(){var e,t;for(e=[],null===(t=P())&&null===(t=U())&&(t=w());null!==t;)e.push(t),null===(t=P())&&null===(t=U())&&(t=w());return e}function Ln(){var e,t,n,r,o,c,h,f,_,m,v;return m=l,v=l,null!==(e=Hn())?(45===input.charCodeAt(l)?(t="-",l++):(t=null,d('"-"')),null!==t&&null!==(n=qn())?(45===input.charCodeAt(l)?(r="-",l++):(r=null,d('"-"')),null!==r&&null!==(o=qn())?(45===input.charCodeAt(l)?(c="-",l++):(c=null,d('"-"')),null!==c&&null!==(h=qn())?(45===input.charCodeAt(l)?(f="-",l++):(f=null,d('"-"')),null!==f&&null!==(_=Fn())?e=[e,t,n,r,o,c,h,f,_]:(e=null,l=v)):(e=null,l=v)):(e=null,l=v)):(e=null,l=v)):(e=null,l=v),null!==e&&(e=function(e,t){data=input.substring(l+5,e)}(m,e[0])),null===e&&(l=m),e}function qn(){var e,t,n,r,o;return o=l,null!==(e=m())&&null!==(t=m())&&null!==(n=m())&&null!==(r=m())?e=[e,t,n,r]:(e=null,l=o),e}function Hn(){var e,t,n;return n=l,null!==(e=qn())&&null!==(t=qn())?e=[e,t]:(e=null,l=n),e}function Fn(){var e,t,n,r;return r=l,null!==(e=qn())&&null!==(t=qn())&&null!==(n=qn())?e=[e,t,n]:(e=null,l=r),e}function jn(){var e,t,n,r,o,c;return r=l,o=l,null!==(e=L())?(c=l,64===input.charCodeAt(l)?(t="@",l++):(t=null,d('"@"')),null!==t&&null!==(n=L())?t=[t,n]:(t=null,l=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,l=o)):(e=null,l=o),null!==e&&(e=function(e){data.call_id=input.substring(l,e)}(r)),null===e&&(l=r),e}function Gn(){var e;return null===(e=Bn())&&null===(e=Vn())&&null===(e=Wn())&&(e=Nt()),e}function Bn(){var e,t,n,r,o,c;return r=l,o=l,"to-tag"===input.substr(l,6)?(e="to-tag",l+=6):(e=null,d('"to-tag"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.to_tag=c)),null===e&&(l=r),e}function Vn(){var e,t,n,r,o,c;return r=l,o=l,"from-tag"===input.substr(l,8)?(e="from-tag",l+=8):(e=null,d('"from-tag"')),null!==e&&null!==(t=j())&&null!==(n=M())?e=[e,t,n]:(e=null,l=o),null!==e&&(c=e[2],e=void(data.from_tag=c)),null===e&&(l=r),e}function Wn(){var e,t;return t=l,"early-only"===input.substr(l,10)?(e="early-only",l+=10):(e=null,d('"early-only"')),null!==e&&(e=void(data.early_only=!0)),null===e&&(l=t),e}var Kn=n(317),Yn=n(328),data={};if(null===r[t]()||l!==input.length){var zn=Math.max(l,o),Xn=zn<input.length?input.charAt(zn):null,Jn=function(){for(var line=1,e=1,t=!1,i=0;i<Math.max(l,o);i++){var n=input.charAt(i);"\n"===n?(t||line++,e=1,t=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(line++,e=1,t=!0):(e++,t=!1)}return{line:line,column:e}}();return new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],i=0;i<e.length;i++)e[i]!==t&&(n.push(e[i]),t=e[i]);return n}(c),Xn,zn,Jn.line,Jn.column),-1}return data},toSource:function(){return this._source},SyntaxError:function(t,n,r,line,l){this.name="SyntaxError",this.expected=t,this.found=n,this.message=function(t,n){var r;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return"Expected "+r+" but "+(n?e(n):"end of input")+" found."}(t,n),this.offset=r,this.line=line,this.column=l}};return t.SyntaxError.prototype=Error.prototype,t}()},314:function(e,t,n){(function(r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,l=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(l=r))})),t.splice(l,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(341)(t);const{formatters:l}=e.exports;l.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(132))},315:function(e,t,n){var r=n(344),l=n(345);t.write=l,t.parse=r.parse,t.parseParams=r.parseParams,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},316:function(e,t,n){const r=n(298).EventEmitter,l=n(303),o=n(299),c=n(322),d=n(329),h=new l("NonInviteClientTransaction"),f=new l("InviteClientTransaction"),_=new l("AckClientTransaction"),m=new l("NonInviteServerTransaction"),v=new l("InviteServerTransaction"),T={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"};e.exports={C:T,NonInviteClientTransaction:class extends r{constructor(e,t,n,r){super(),this.type=T.NON_INVITE_CLIENT,this.id=`z9hG4bK${Math.floor(1e7*Math.random())}`,this.ua=e,this.transport=t,this.request=n,this.eventHandlers=r;let l=`SIP/2.0/${t.via_transport}`;l+=` ${e.configuration.via_host};branch=${this.id}`,this.request.setHeader("via",l),this.ua.newTransaction(this)}get C(){return T}stateChanged(e){this.state=e,this.emit("stateChanged")}send(){this.stateChanged(T.STATUS_TRYING),this.F=setTimeout((()=>{this.timer_F()}),d.TIMER_F),this.transport.send(this.request)||this.onTransportError()}onTransportError(){h.debug(`transport error occurred, deleting transaction ${this.id}`),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}timer_F(){h.debug(`Timer F expired for transaction ${this.id}`),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}timer_K(){this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}receiveResponse(e){const t=e.status_code;if(t<200)switch(this.state){case T.STATUS_TRYING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e)}else switch(this.state){case T.STATUS_TRYING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_COMPLETED),clearTimeout(this.F),408===t?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(e),this.K=setTimeout((()=>{this.timer_K()}),d.TIMER_K)}}},InviteClientTransaction:class extends r{constructor(e,t,n,r){super(),this.type=T.INVITE_CLIENT,this.id=`z9hG4bK${Math.floor(1e7*Math.random())}`,this.ua=e,this.transport=t,this.request=n,this.eventHandlers=r,n.transaction=this;let l=`SIP/2.0/${t.via_transport}`;l+=` ${e.configuration.via_host};branch=${this.id}`,this.request.setHeader("via",l),this.ua.newTransaction(this)}get C(){return T}stateChanged(e){this.state=e,this.emit("stateChanged")}send(){this.stateChanged(T.STATUS_CALLING),this.B=setTimeout((()=>{this.timer_B()}),d.TIMER_B),this.transport.send(this.request)||this.onTransportError()}onTransportError(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==T.STATUS_ACCEPTED&&(f.debug(`transport error occurred, deleting transaction ${this.id}`),this.eventHandlers.onTransportError()),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}timer_M(){f.debug(`Timer M expired for transaction ${this.id}`),this.state===T.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}timer_B(){f.debug(`Timer B expired for transaction ${this.id}`),this.state===T.STATUS_CALLING&&(this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}timer_D(){f.debug(`Timer D expired for transaction ${this.id}`),clearTimeout(this.B),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}sendACK(e){const t=new c.OutgoingRequest(o.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});t.setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",e.getHeader("to")),this.D=setTimeout((()=>{this.timer_D()}),d.TIMER_D),this.transport.send(t)}cancel(e){if(this.state!==T.STATUS_PROCEEDING)return;const t=new c.OutgoingRequest(o.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});t.setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",this.request.getHeader("to")),e&&t.setHeader("reason",e),this.transport.send(t)}receiveResponse(e){const t=e.status_code;if(t>=100&&t<=199)switch(this.state){case T.STATUS_CALLING:this.stateChanged(T.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e);break;case T.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(e)}else if(t>=200&&t<=299)switch(this.state){case T.STATUS_CALLING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_ACCEPTED),this.M=setTimeout((()=>{this.timer_M()}),d.TIMER_M),this.eventHandlers.onReceiveResponse(e);break;case T.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(e)}else if(t>=300&&t<=699)switch(this.state){case T.STATUS_CALLING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_COMPLETED),this.sendACK(e),this.eventHandlers.onReceiveResponse(e);break;case T.STATUS_COMPLETED:this.sendACK(e)}}},AckClientTransaction:class extends r{constructor(e,t,n,r){super(),this.id=`z9hG4bK${Math.floor(1e7*Math.random())}`,this.transport=t,this.request=n,this.eventHandlers=r;let l=`SIP/2.0/${t.via_transport}`;l+=` ${e.configuration.via_host};branch=${this.id}`,this.request.setHeader("via",l)}get C(){return T}send(){this.transport.send(this.request)||this.onTransportError()}onTransportError(){_.debug(`transport error occurred for transaction ${this.id}`),this.eventHandlers.onTransportError()}},NonInviteServerTransaction:class extends r{constructor(e,t,n){super(),this.type=T.NON_INVITE_SERVER,this.id=n.via_branch,this.ua=e,this.transport=t,this.request=n,this.last_response="",n.server_transaction=this,this.state=T.STATUS_TRYING,e.newTransaction(this)}get C(){return T}stateChanged(e){this.state=e,this.emit("stateChanged")}timer_J(){m.debug(`Timer J expired for transaction ${this.id}`),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}onTransportError(){this.transportError||(this.transportError=!0,m.debug(`transport error occurred, deleting transaction ${this.id}`),clearTimeout(this.J),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}receiveResponse(e,t,n,r){if(100===e)switch(this.state){case T.STATUS_TRYING:this.stateChanged(T.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case T.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=200&&e<=699)switch(this.state){case T.STATUS_TRYING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout((()=>{this.timer_J()}),d.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}}},InviteServerTransaction:class extends r{constructor(e,t,n){super(),this.type=T.INVITE_SERVER,this.id=n.via_branch,this.ua=e,this.transport=t,this.request=n,this.last_response="",n.server_transaction=this,this.state=T.STATUS_PROCEEDING,e.newTransaction(this),this.resendProvisionalTimer=null,n.reply(100)}get C(){return T}stateChanged(e){this.state=e,this.emit("stateChanged")}timer_H(){v.debug(`Timer H expired for transaction ${this.id}`),this.state===T.STATUS_COMPLETED&&v.debug("ACK not received, dialog will be terminated"),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}timer_I(){this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}timer_L(){v.debug(`Timer L expired for transaction ${this.id}`),this.state===T.STATUS_ACCEPTED&&(this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}onTransportError(){this.transportError||(this.transportError=!0,v.debug(`transport error occurred, deleting transaction ${this.id}`),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}resend_provisional(){this.transport.send(this.last_response)||this.onTransportError()}receiveResponse(e,t,n,r){if(e>=100&&e<=199&&this.state===T.STATUS_PROCEEDING)this.transport.send(t)||this.onTransportError(),this.last_response=t;if(e>100&&e<=199&&this.state===T.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval((()=>{this.resend_provisional()}),d.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&e<=299)switch(this.state){case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout((()=>{this.timer_L()}),d.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case T.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=300&&e<=699&&this.state===T.STATUS_PROCEEDING)null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(T.STATUS_COMPLETED),this.H=setTimeout((()=>{this.timer_H()}),d.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}},checkTransaction:function({_transactions:e},t){let tr;switch(t.method){case o.INVITE:if(tr=e.ist[t.via_branch],tr){if(tr.state===T.STATUS_PROCEEDING)tr.transport.send(tr.last_response);return!0}break;case o.ACK:if(tr=e.ist[t.via_branch],!tr)return!1;if(tr.state===T.STATUS_ACCEPTED)return!1;if(tr.state===T.STATUS_COMPLETED)return tr.state=T.STATUS_CONFIRMED,tr.I=setTimeout((()=>{tr.timer_I()}),d.TIMER_I),!0;break;case o.CANCEL:return tr=e.ist[t.via_branch],tr?(t.reply_sl(200),tr.state!==T.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(tr=e.nist[t.via_branch],tr){switch(tr.state){case T.STATUS_TRYING:break;case T.STATUS_PROCEEDING:case T.STATUS_COMPLETED:tr.transport.send(tr.last_response)}return!0}}}}},317:function(e,t,n){const r=n(299),l=n(306),o=n(311);e.exports=class e{static parse(e){return-1!==(e=o.parse(e,"SIP_URI"))?e:void 0}constructor(e,t,n,l,o={},c={}){if(!n)throw new TypeError('missing or invalid "host" parameter');this._parameters={},this._headers={},this._scheme=e||r.SIP,this._user=t,this._host=n,this._port=l;for(const param in o)Object.prototype.hasOwnProperty.call(o,param)&&this.setParam(param,o[param]);for(const header in c)Object.prototype.hasOwnProperty.call(c,header)&&this.setHeader(header,c[header])}get scheme(){return this._scheme}set scheme(e){this._scheme=e.toLowerCase()}get user(){return this._user}set user(e){this._user=e}get host(){return this._host}set host(e){this._host=e.toLowerCase()}get port(){return this._port}set port(e){this._port=0===e?e:parseInt(e,10)||null}setParam(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}getParam(e){if(e)return this._parameters[e.toLowerCase()]}hasParam(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}deleteParam(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){const t=this._parameters[e];return delete this._parameters[e],t}}clearParams(){this._parameters={}}setHeader(e,t){this._headers[l.headerize(e)]=Array.isArray(t)?t:[t]}getHeader(e){if(e)return this._headers[l.headerize(e)]}hasHeader(e){if(e)return!!this._headers.hasOwnProperty(l.headerize(e))}deleteHeader(header){if(header=l.headerize(header),this._headers.hasOwnProperty(header)){const e=this._headers[header];return delete this._headers[header],e}}clearHeaders(){this._headers={}}clone(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}toString(){const e=[];let t=`${this._scheme}:`;this._user&&(t+=`${l.escapeUser(this._user)}@`),t+=this._host,(this._port||0===this._port)&&(t+=`:${this._port}`);for(const e in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(t+=`;${e}`,null!==this._parameters[e]&&(t+=`=${this._parameters[e]}`));for(const header in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,header))for(const t of this._headers[header])e.push(`${header}=${t}`);return e.length>0&&(t+=`?${e.join("&")}`),t}toAor(e){let t=`${this._scheme}:`;return this._user&&(t+=`${l.escapeUser(this._user)}@`),t+=this._host,e&&(this._port||0===this._port)&&(t+=`:${this._port}`),t}}},318:function(e){e.exports=JSON.parse('{"name":"jssip","title":"JsSIP","description":"the Javascript SIP library","version":"3.9.1","homepage":"https://jssip.net","contributors":["Jos Luis Milln <jmillan@aliax.net> (https://github.com/jmillan)","Iaki Baz Castillo <ibc@aliax.net> (https://inakibaz.me)"],"types":"lib/JsSIP.d.ts","main":"lib-es5/JsSIP.js","keywords":["sip","websocket","webrtc","node","browser","library"],"license":"MIT","repository":{"type":"git","url":"https://github.com/versatica/JsSIP.git"},"bugs":{"url":"https://github.com/versatica/JsSIP/issues"},"dependencies":{"@types/debug":"^4.1.5","@types/node":"^14.14.34","debug":"^4.3.1","events":"^3.3.0","sdp-transform":"^2.14.1"},"devDependencies":{"@babel/core":"^7.13.10","@babel/preset-env":"^7.13.10","ansi-colors":"^3.2.4","browserify":"^16.5.1","eslint":"^5.16.0","fancy-log":"^1.3.3","gulp":"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4","pegjs":"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"scripts":{"lint":"gulp lint","test":"gulp test","prepublishOnly":"gulp babel"}}')},319:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var o=n(305),c=n(300);e.exports=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t&&t instanceof o))throw new TypeError('missing or invalid "uri" parameter');for(var param in this._uri=t,this._parameters={},this.display_name=n,r)Object.prototype.hasOwnProperty.call(r,param)&&this.setParam(param,r[param])}return l(e,null,[{key:"parse",value:function(e){return-1!==(e=c.parse(e,"Name_Addr_Header"))?e:void 0}}]),l(e,[{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new e(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var body=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";for(var e in body+="<".concat(this._uri.toString(),">"),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(body+=";".concat(e),null!==this._parameters[e]&&(body+="=".concat(this._parameters[e])));return body}},{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(e){this._display_name=0===e?"0":e}}]),e}()},320:function(e,t,n){const r=n(298).EventEmitter,l=n(315),o=n(303),c=n(299),d=n(321),h=n(316),f=n(306),_=n(329),m=n(322),v=n(360),T=n(330),$=n(363),y=n(364),C=n(365),A=n(366),E=n(317),S=new o("RTCSession"),R={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},I=["audio","video"];e.exports=class e extends r{static get C(){return R}constructor(e){S.debug("new"),super(),this._id=null,this._ua=e,this._status=R.STATUS_NULL,this._dialog=null,this._earlyDialogs={},this._contact=null,this._from_tag=null,this._to_tag=null,this._connection=null,this._connectionPromiseQueue=Promise.resolve(),this._request=null,this._is_canceled=!1,this._cancel_reason="",this._is_confirmed=!1,this._late_sdp=!1,this._rtcOfferConstraints=null,this._rtcAnswerConstraints=null,this._localMediaStream=null,this._localMediaStreamLocallyGenerated=!1,this._rtcReady=!0,this._iceReady=!1,this._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},this._direction=null,this._local_identity=null,this._remote_identity=null,this._start_time=null,this._end_time=null,this._tones=null,this._audioMuted=!1,this._videoMuted=!1,this._localHold=!1,this._remoteHold=!1,this._sessionTimers={enabled:this._ua.configuration.session_timers,refreshMethod:this._ua.configuration.session_timers_refresh_method,defaultExpires:c.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},this._referSubscribers={},this._data={}}get C(){return R}get causes(){return c.causes}get id(){return this._id}get connection(){return this._connection}get contact(){return this._contact}get direction(){return this._direction}get local_identity(){return this._local_identity}get remote_identity(){return this._remote_identity}get start_time(){return this._start_time}get end_time(){return this._end_time}get data(){return this._data}set data(e){this._data=e}get status(){return this._status}isInProgress(){switch(this._status){case R.STATUS_NULL:case R.STATUS_INVITE_SENT:case R.STATUS_1XX_RECEIVED:case R.STATUS_INVITE_RECEIVED:case R.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}isEstablished(){switch(this._status){case R.STATUS_ANSWERED:case R.STATUS_WAITING_FOR_ACK:case R.STATUS_CONFIRMED:return!0;default:return!1}}isEnded(){switch(this._status){case R.STATUS_CANCELED:case R.STATUS_TERMINATED:return!0;default:return!1}}isMuted(){return{audio:this._audioMuted,video:this._videoMuted}}isOnHold(){return{local:this._localHold,remote:this._remoteHold}}connect(e,t={},n){S.debug("connect()");const r=e,l=f.cloneObject(t.eventHandlers),o=f.cloneArray(t.extraHeaders),h=f.cloneObject(t.mediaConstraints,{audio:!0,video:!0}),_=t.mediaStream||null,v=f.cloneObject(t.pcConfig,{iceServers:[]}),T=t.rtcConstraints||null,$=t.rtcOfferConstraints||null;if(this._rtcOfferConstraints=$,this._rtcAnswerConstraints=t.rtcAnswerConstraints||null,this._data=t.data||this._data,void 0===e)throw new TypeError("Not enough arguments");if(this._status!==R.STATUS_NULL)throw new d.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new d.NotSupportedError("WebRTC not supported");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError(`Invalid target: ${r}`);this._sessionTimers.enabled&&f.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=c.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=c.SESSION_EXPIRES);for(const e in l)Object.prototype.hasOwnProperty.call(l,e)&&this.on(e,l[e]);this._from_tag=f.newTag();const y=t.anonymous||!1,C={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:y,outbound:!0}),y?(C.from_display_name="Anonymous",C.from_uri=new E("sip","anonymous","anonymous.invalid"),o.push(`P-Preferred-Identity: ${this._ua.configuration.uri.toString()}`),o.push("Privacy: id")):t.fromUserName&&(C.from_uri=new E("sip",t.fromUserName,this._ua.configuration.uri.host),o.push(`P-Preferred-Identity: ${this._ua.configuration.uri.toString()}`)),t.fromDisplayName&&(C.from_display_name=t.fromDisplayName),o.push(`Contact: ${this._contact}`),o.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&o.push(`Session-Expires: ${this._sessionTimers.defaultExpires}${this._ua.configuration.session_timers_force_refresher?";refresher=uac":""}`),this._request=new m.InitialOutgoingInviteRequest(e,this._ua,C,o),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(v,T),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,n&&n(this),this._newRTCSession("local",this._request),this._sendInitialRequest(h,$,_)}init_incoming(e,t){let n;S.debug("init_incoming()");const r=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0;e.body&&"application/sdp"!==r?e.reply(415):(this._status=R.STATUS_INVITE_RECEIVED,this._from_tag=e.from_tag,this._id=e.call_id+this._from_tag,this._request=e,this._contact=this._ua.contact.toString(),e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=f.newTag(),this._createDialog(e,"UAS",!0)?(e.body?this._late_sdp=!1:this._late_sdp=!0,this._status=R.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout((()=>{e.reply(408),this._failed("local",null,c.causes.NO_ANSWER)}),this._ua.configuration.no_answer_timeout),n&&(this._timers.expiresTimer=setTimeout((()=>{this._status===R.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),this._failed("system",null,c.causes.EXPIRES))}),n)),this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from,t&&t(this),this._newRTCSession("remote",e),this._status!==R.STATUS_TERMINATED&&(e.reply(180,null,[`Contact: ${this._contact}`]),this._progress("local",null))):e.reply(500,"Missing Contact header field"))}answer(e={}){S.debug("answer()");const t=this._request,n=f.cloneArray(e.extraHeaders),r=f.cloneObject(e.mediaConstraints),l=e.mediaStream||null,o=f.cloneObject(e.pcConfig,{iceServers:[]}),h=e.rtcConstraints||null,_=e.rtcAnswerConstraints||null,m=f.cloneObject(e.rtcOfferConstraints);let v,T=!1,$=!1,y=!1,C=!1;if(this._rtcAnswerConstraints=_,this._rtcOfferConstraints=e.rtcOfferConstraints||null,this._data=e.data||this._data,"incoming"!==this._direction)throw new d.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==R.STATUS_WAITING_FOR_ANSWER)throw new d.InvalidStateError(this._status);if(this._sessionTimers.enabled&&f.isDecimal(e.sessionTimersExpires)&&(e.sessionTimersExpires>=c.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=e.sessionTimersExpires:this._sessionTimers.defaultExpires=c.SESSION_EXPIRES),this._status=R.STATUS_ANSWERED,!this._createDialog(t,"UAS"))return void t.reply(500,"Error creating dialog");clearTimeout(this._timers.userNoAnswerTimer),n.unshift(`Contact: ${this._contact}`);const A=t.parseSDP();Array.isArray(A.media)||(A.media=[A.media]);for(const e of A.media)"audio"===e.type&&(T=!0,e.direction&&"sendrecv"!==e.direction||(y=!0)),"video"===e.type&&($=!0,e.direction&&"sendrecv"!==e.direction||(C=!0));if(l&&!1===r.audio){v=l.getAudioTracks();for(const track of v)l.removeTrack(track)}if(l&&!1===r.video){v=l.getVideoTracks();for(const track of v)l.removeTrack(track)}l||void 0!==r.audio||(r.audio=y),l||void 0!==r.video||(r.video=C),l||T||m.offerToReceiveAudio||(r.audio=!1),l||$||m.offerToReceiveVideo||(r.video=!1),this._createRTCConnection(o,h),Promise.resolve().then((()=>l||(r.audio||r.video?(this._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(r).catch((e=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");throw t.reply(480),this._failed("local",null,c.causes.USER_DENIED_MEDIA_ACCESS),S.warn('emit "getusermediafailed" [error:%o]',e),this.emit("getusermediafailed",e),new Error("getUserMedia() failed")}))):void 0))).then((e=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");this._localMediaStream=e,e&&e.getTracks().forEach((track=>{this._connection.addTrack(track,e)}))})).then((()=>{if(this._late_sdp)return;const e={originator:"remote",type:"offer",sdp:t.body};S.debug('emit "sdp"'),this.emit("sdp",e);const n=new RTCSessionDescription({type:"offer",sdp:e.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._connection.setRemoteDescription(n))).catch((e=>{throw t.reply(488),this._failed("system",null,c.causes.WEBRTC_ERROR),S.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),this.emit("peerconnection:setremotedescriptionfailed",e),new Error("peerconnection.setRemoteDescription() failed")})),this._connectionPromiseQueue})).then((()=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");return this._connecting(t),this._late_sdp?this._createLocalDescription("offer",this._rtcOfferConstraints).catch((()=>{throw t.reply(500),new Error("_createLocalDescription() failed")})):this._createLocalDescription("answer",_).catch((()=>{throw t.reply(500),new Error("_createLocalDescription() failed")}))})).then((desc=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");this._handleSessionTimersInIncomingRequest(t,n),t.reply(200,null,n,desc,(()=>{this._status=R.STATUS_WAITING_FOR_ACK,this._setInvite2xxTimer(t,desc),this._setACKTimer(),this._accepted("local")}),(()=>{this._failed("system",null,c.causes.CONNECTION_ERROR)}))})).catch((e=>{this._status!==R.STATUS_TERMINATED&&S.warn(e)}))}terminate(e={}){S.debug("terminate()");const t=e.cause||c.causes.BYE,n=f.cloneArray(e.extraHeaders),body=e.body;let r,l=e.status_code,o=e.reason_phrase;if(this._status===R.STATUS_TERMINATED)throw new d.InvalidStateError(this._status);switch(this._status){case R.STATUS_NULL:case R.STATUS_INVITE_SENT:case R.STATUS_1XX_RECEIVED:if(S.debug("canceling session"),l&&(l<200||l>=700))throw new TypeError(`Invalid status_code: ${l}`);l&&(o=o||c.REASON_PHRASE[l]||"",r=`SIP ;cause=${l} ;text="${o}"`),this._status===R.STATUS_NULL||this._status===R.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=r):this._status===R.STATUS_1XX_RECEIVED&&this._request.cancel(r),this._status=R.STATUS_CANCELED,this._failed("local",null,c.causes.CANCELED);break;case R.STATUS_WAITING_FOR_ANSWER:case R.STATUS_ANSWERED:if(S.debug("rejecting session"),l=l||480,l<300||l>=700)throw new TypeError(`Invalid status_code: ${l}`);this._request.reply(l,o,n,body),this._failed("local",null,c.causes.REJECTED);break;case R.STATUS_WAITING_FOR_ACK:case R.STATUS_CONFIRMED:if(S.debug("terminating session"),o=e.reason_phrase||c.REASON_PHRASE[l]||"",l&&(l<200||l>=700))throw new TypeError(`Invalid status_code: ${l}`);if(l&&n.push(`Reason: SIP ;cause=${l}; text="${o}"`),this._status===R.STATUS_WAITING_FOR_ACK&&"incoming"===this._direction&&this._request.server_transaction.state!==h.C.STATUS_TERMINATED){const dialog=this._dialog;this.receiveRequest=({method:e})=>{e===c.ACK&&(this.sendRequest(c.BYE,{extraHeaders:n,body:body}),dialog.terminate())},this._request.server_transaction.on("stateChanged",(()=>{this._request.server_transaction.state===h.C.STATUS_TERMINATED&&(this.sendRequest(c.BYE,{extraHeaders:n,body:body}),dialog.terminate())})),this._ended("local",null,t),this._dialog=dialog,this._ua.newDialog(dialog)}else this.sendRequest(c.BYE,{extraHeaders:n,body:body}),this._ended("local",null,t)}}sendDTMF(e,t={}){S.debug("sendDTMF() | tones: %s",e);let n=0,r=t.duration||null,l=t.interToneGap||null;const o=t.transportType||c.DTMF_TRANSPORT.INFO;if(void 0===e)throw new TypeError("Not enough arguments");if(this._status!==R.STATUS_CONFIRMED&&this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_1XX_RECEIVED)throw new d.InvalidStateError(this._status);if(o!==c.DTMF_TRANSPORT.INFO&&o!==c.DTMF_TRANSPORT.RFC2833)throw new TypeError(`invalid transportType: ${o}`);if("number"==typeof e&&(e=e.toString()),!e||"string"!=typeof e||!e.match(/^[0-9A-DR#*,]+$/i))throw new TypeError(`Invalid tones: ${e}`);if(r&&!f.isDecimal(r))throw new TypeError(`Invalid tone duration: ${r}`);if(r?r<$.C.MIN_DURATION?(S.debug(`"duration" value is lower than the minimum allowed, setting it to ${$.C.MIN_DURATION} milliseconds`),r=$.C.MIN_DURATION):r>$.C.MAX_DURATION?(S.debug(`"duration" value is greater than the maximum allowed, setting it to ${$.C.MAX_DURATION} milliseconds`),r=$.C.MAX_DURATION):r=Math.abs(r):r=$.C.DEFAULT_DURATION,t.duration=r,l&&!f.isDecimal(l))throw new TypeError(`Invalid interToneGap: ${l}`);if(l?l<$.C.MIN_INTER_TONE_GAP?(S.debug(`"interToneGap" value is lower than the minimum allowed, setting it to ${$.C.MIN_INTER_TONE_GAP} milliseconds`),l=$.C.MIN_INTER_TONE_GAP):l=Math.abs(l):l=$.C.DEFAULT_INTER_TONE_GAP,o!==c.DTMF_TRANSPORT.RFC2833)this._tones?this._tones+=e:(this._tones=e,function e(){let o;if(this._status===R.STATUS_TERMINATED||!this._tones||n>=this._tones.length)return void(this._tones=null);const c=this._tones[n];if(n+=1,","===c)o=2e3;else{const e=new $(this);t.eventHandlers={onFailed:()=>{this._tones=null}},e.send(c,t),o=r+l}setTimeout(e.bind(this),o)}.call(this));else{const t=this._getDTMFRTPSender();t&&(e=t.toneBuffer+e,t.insertDTMF(e,r,l))}}sendInfo(e,body,t={}){if(S.debug("sendInfo()"),this._status!==R.STATUS_CONFIRMED&&this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_1XX_RECEIVED)throw new d.InvalidStateError(this._status);new y(this).send(e,body,t)}mute(e={audio:!0,video:!1}){S.debug("mute()");let t=!1,n=!1;!1===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),!1===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),!0!==t&&!0!==n||this._onmute({audio:t,video:n})}unmute(e={audio:!0,video:!0}){S.debug("unmute()");let t=!1,n=!1;!0===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!1,!1===this._localHold&&this._toggleMuteAudio(!1)),!0===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!1,!1===this._localHold&&this._toggleMuteVideo(!1)),!0!==t&&!0!==n||this._onunmute({audio:t,video:n})}hold(e={},t){if(S.debug("hold()"),this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");const n={succeeded:()=>{t&&t()},failed:()=>{this.terminate({cause:c.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return e.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):this._sendReinvite({eventHandlers:n,extraHeaders:e.extraHeaders}),!0}unhold(e={},t){if(S.debug("unhold()"),this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");const n={succeeded:()=>{t&&t()},failed:()=>{this.terminate({cause:c.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return e.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):this._sendReinvite({eventHandlers:n,extraHeaders:e.extraHeaders}),!0}renegotiate(e={},t){S.debug("renegotiate()");const n=e.rtcOfferConstraints||null;if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!this._isReadyToReOffer())return!1;const r={succeeded:()=>{t&&t()},failed:()=>{this.terminate({cause:c.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),e.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,rtcOfferConstraints:n,extraHeaders:e.extraHeaders}):this._sendReinvite({eventHandlers:r,rtcOfferConstraints:n,extraHeaders:e.extraHeaders}),!0}refer(e,t){S.debug("refer()");const n=e;if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!(e=this._ua.normalizeTarget(e)))throw new TypeError(`Invalid target: ${n}`);const r=new A(this);r.sendRefer(e,t);const l=r.id;return this._referSubscribers[l]=r,r.on("requestFailed",(()=>{delete this._referSubscribers[l]})),r.on("accepted",(()=>{delete this._referSubscribers[l]})),r.on("failed",(()=>{delete this._referSubscribers[l]})),r}sendRequest(e,t){return S.debug("sendRequest()"),this._dialog.sendRequest(e,t)}receiveRequest(e){if(S.debug("receiveRequest()"),e.method===c.CANCEL)this._status!==R.STATUS_WAITING_FOR_ANSWER&&this._status!==R.STATUS_ANSWERED||(this._status=R.STATUS_CANCELED,this._request.reply(487),this._failed("remote",e,c.causes.CANCELED));else switch(e.method){case c.ACK:if(this._status!==R.STATUS_WAITING_FOR_ACK)return;if(this._status=R.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!e.body){this.terminate({cause:c.causes.MISSING_SDP,status_code:400});break}const t={originator:"remote",type:"answer",sdp:e.body};S.debug('emit "sdp"'),this.emit("sdp",t);const n=new RTCSessionDescription({type:"answer",sdp:t.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._connection.setRemoteDescription(n))).then((()=>{this._is_confirmed||this._confirmed("remote",e)})).catch((e=>{this.terminate({cause:c.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),S.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),this.emit("peerconnection:setremotedescriptionfailed",e)}))}else this._is_confirmed||this._confirmed("remote",e);break;case c.BYE:this._status===R.STATUS_CONFIRMED||this._status===R.STATUS_WAITING_FOR_ACK?(e.reply(200),this._ended("remote",e,c.causes.BYE)):this._status===R.STATUS_INVITE_RECEIVED||this._status===R.STATUS_WAITING_FOR_ANSWER?(e.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",e,c.causes.BYE)):e.reply(403,"Wrong Status");break;case c.INVITE:this._status===R.STATUS_CONFIRMED?e.hasHeader("replaces")?this._receiveReplaces(e):this._receiveReinvite(e):e.reply(403,"Wrong Status");break;case c.INFO:if(this._status===R.STATUS_1XX_RECEIVED||this._status===R.STATUS_WAITING_FOR_ANSWER||this._status===R.STATUS_ANSWERED||this._status===R.STATUS_WAITING_FOR_ACK||this._status===R.STATUS_CONFIRMED){const t=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0;t&&t.match(/^application\/dtmf-relay/i)?new $(this).init_incoming(e):void 0!==t?new y(this).init_incoming(e):e.reply(415)}else e.reply(403,"Wrong Status");break;case c.UPDATE:this._status===R.STATUS_CONFIRMED?this._receiveUpdate(e):e.reply(403,"Wrong Status");break;case c.REFER:this._status===R.STATUS_CONFIRMED?this._receiveRefer(e):e.reply(403,"Wrong Status");break;case c.NOTIFY:this._status===R.STATUS_CONFIRMED?this._receiveNotify(e):e.reply(403,"Wrong Status");break;default:e.reply(501)}}onTransportError(){S.warn("onTransportError()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:c.causes.CONNECTION_ERROR,cause:c.causes.CONNECTION_ERROR})}onRequestTimeout(){S.warn("onRequestTimeout()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:c.causes.REQUEST_TIMEOUT,cause:c.causes.REQUEST_TIMEOUT})}onDialogError(){S.warn("onDialogError()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:c.causes.DIALOG_ERROR,cause:c.causes.DIALOG_ERROR})}newDTMF(data){S.debug("newDTMF()"),this.emit("newDTMF",data)}newInfo(data){S.debug("newInfo()"),this.emit("newInfo",data)}_isReadyToReOffer(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(S.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):(S.debug("_isReadyToReOffer() | session not established yet"),!1):(S.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}_close(){if(S.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(S.debug("close() | closing local MediaStream"),f.closeMediaStream(this._localMediaStream)),this._status!==R.STATUS_TERMINATED){if(this._status=R.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(e){S.warn("close() | error closing the RTCPeerConnection: %o",e)}for(const e in this._timers)Object.prototype.hasOwnProperty.call(this._timers,e)&&clearTimeout(this._timers[e]);clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog);for(const dialog in this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,dialog)&&(this._earlyDialogs[dialog].terminate(),delete this._earlyDialogs[dialog]);for(const e in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,e)&&delete this._referSubscribers[e];this._ua.destroyRTCSession(this)}}_setInvite2xxTimer(e,body){let t=_.T1;this._timers.invite2xxTimer=setTimeout(function n(){this._status===R.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,[`Contact: ${this._contact}`],body),t<_.T2&&(t*=2,t>_.T2&&(t=_.T2)),this._timers.invite2xxTimer=setTimeout(n.bind(this),t))}.bind(this),t)}_setACKTimer(){this._timers.ackTimer=setTimeout((()=>{this._status===R.STATUS_WAITING_FOR_ACK&&(S.debug("no ACK received, terminating the session"),clearTimeout(this._timers.invite2xxTimer),this.sendRequest(c.BYE),this._ended("remote",null,c.causes.NO_ACK))}),_.TIMER_H)}_createRTCConnection(e,t){this._connection=new RTCPeerConnection(e,t),this._connection.addEventListener("iceconnectionstatechange",(()=>{"failed"===this._connection.iceConnectionState&&this.terminate({cause:c.causes.RTP_TIMEOUT,status_code:408,reason_phrase:c.causes.RTP_TIMEOUT})})),S.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}_createLocalDescription(e,t){if(S.debug("createLocalDescription()"),"offer"!==e&&"answer"!==e)throw new Error(`createLocalDescription() | invalid type "${e}"`);const n=this._connection;return this._rtcReady=!1,Promise.resolve().then((()=>"offer"===e?n.createOffer(t).catch((e=>(S.warn('emit "peerconnection:createofferfailed" [error:%o]',e),this.emit("peerconnection:createofferfailed",e),Promise.reject(e)))):n.createAnswer(t).catch((e=>(S.warn('emit "peerconnection:createanswerfailed" [error:%o]',e),this.emit("peerconnection:createanswerfailed",e),Promise.reject(e)))))).then((desc=>n.setLocalDescription(desc).catch((e=>(this._rtcReady=!0,S.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',e),this.emit("peerconnection:setlocaldescriptionfailed",e),Promise.reject(e)))))).then((()=>{const r=t&&t.iceRestart;if("complete"===n.iceGatheringState&&!r||"gathering"===n.iceGatheringState&&this._iceReady){this._rtcReady=!0;const t={originator:"local",type:e,sdp:n.localDescription.sdp};return S.debug('emit "sdp"'),this.emit("sdp",t),Promise.resolve(t.sdp)}return new Promise((t=>{let r,l,o=!1;this._iceReady=!1;const c=()=>{n.removeEventListener("icecandidate",r),n.removeEventListener("icegatheringstatechange",l),o=!0,this._rtcReady=!0,this._iceReady=!0;const c={originator:"local",type:e,sdp:n.localDescription.sdp};S.debug('emit "sdp"'),this.emit("sdp",c),t(c.sdp)};n.addEventListener("icecandidate",r=e=>{const t=e.candidate;t?this.emit("icecandidate",{candidate:t,ready:c}):o||c()}),n.addEventListener("icegatheringstatechange",l=()=>{"complete"!==n.iceGatheringState||o||c()})}))}))}_createDialog(e,t,n){const r="UAS"===t?e.to_tag:e.from_tag,l="UAS"===t?e.from_tag:e.to_tag,o=e.call_id+r+l;let d=this._earlyDialogs[o];if(n)return!!d||(d=new v(this,e,t,v.C.STATUS_EARLY),d.error?(S.debug(d.error),this._failed("remote",e,c.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[o]=d,!0));{if(this._from_tag=e.from_tag,this._to_tag=e.to_tag,d)return d.update(e,t),this._dialog=d,delete this._earlyDialogs[o],!0;const dialog=new v(this,e,t);return dialog.error?(S.debug(dialog.error),this._failed("remote",e,c.causes.INTERNAL_ERROR),!1):(this._dialog=dialog,!0)}}_receiveReinvite(e){S.debug("receiveReinvite()");const t=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,data={request:e,callback:void 0,reject:function(t={}){n=!0;const r=t.status_code||403,l=t.reason_phrase||"",o=f.cloneArray(t.extraHeaders);if(this._status!==R.STATUS_CONFIRMED)return!1;if(r<300||r>=700)throw new TypeError(`Invalid status_code: ${r}`);e.reply(r,l,o)}.bind(this)};let n=!1;if(this.emit("reinvite",data),!n){if(this._late_sdp=!1,!e.body)return this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),void(this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._createLocalDescription("offer",this._rtcOfferConstraints))).then((e=>{r.call(this,e)})).catch((()=>{e.reply(500)})));if("application/sdp"!==t)return S.debug("invalid Content-Type"),void e.reply(415);this._processInDialogSdpOffer(e).then((desc=>{this._status!==R.STATUS_TERMINATED&&r.call(this,desc)})).catch((e=>{S.warn(e)}))}function r(desc){const t=[`Contact: ${this._contact}`];this._handleSessionTimersInIncomingRequest(e,t),this._late_sdp&&(desc=this._mangleOffer(desc)),e.reply(200,null,t,desc,(()=>{this._status=R.STATUS_WAITING_FOR_ACK,this._setInvite2xxTimer(e,desc),this._setACKTimer()})),"function"==typeof data.callback&&data.callback()}}_receiveUpdate(e){S.debug("receiveUpdate()");const t=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,data={request:e,callback:void 0,reject:function(t={}){n=!0;const r=t.status_code||403,l=t.reason_phrase||"",o=f.cloneArray(t.extraHeaders);if(this._status!==R.STATUS_CONFIRMED)return!1;if(r<300||r>=700)throw new TypeError(`Invalid status_code: ${r}`);e.reply(r,l,o)}.bind(this)};let n=!1;if(this.emit("update",data),!n)if(e.body){if("application/sdp"!==t)return S.debug("invalid Content-Type"),void e.reply(415);this._processInDialogSdpOffer(e).then((desc=>{this._status!==R.STATUS_TERMINATED&&r.call(this,desc)})).catch((e=>{S.warn(e)}))}else r.call(this,null);function r(desc){const t=[`Contact: ${this._contact}`];this._handleSessionTimersInIncomingRequest(e,t),e.reply(200,null,t,desc),"function"==typeof data.callback&&data.callback()}}_processInDialogSdpOffer(e){S.debug("_processInDialogSdpOffer()");const t=e.parseSDP();let n=!1;for(const e of t.media){if(-1===I.indexOf(e.type))continue;const r=e.direction||t.direction||"sendrecv";if("sendonly"!==r&&"inactive"!==r){n=!1;break}n=!0}const r={originator:"remote",type:"offer",sdp:e.body};S.debug('emit "sdp"'),this.emit("sdp",r);const l=new RTCSessionDescription({type:"offer",sdp:r.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");return this._connection.setRemoteDescription(l).catch((t=>{throw e.reply(488),S.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),this.emit("peerconnection:setremotedescriptionfailed",t),t}))})).then((()=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");!0===this._remoteHold&&!1===n?(this._remoteHold=!1,this._onunhold("remote")):!1===this._remoteHold&&!0===n&&(this._remoteHold=!0,this._onhold("remote"))})).then((()=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");return this._createLocalDescription("answer",this._rtcAnswerConstraints).catch((t=>{throw e.reply(500),S.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',t),t}))})).catch((e=>{S.warn("_processInDialogSdpOffer() failed [error: %o]",e)})),this._connectionPromiseQueue}_receiveRefer(t){if(S.debug("receiveRefer()"),!t.refer_to)return S.debug("no Refer-To header field present in REFER"),void t.reply(400);if(t.refer_to.uri.scheme!==c.SIP)return S.debug("Refer-To header field points to a non-SIP URI scheme"),void t.reply(416);t.reply(202);const n=new C(this,t.cseq);function r(r,l={}){if(r="function"==typeof r?r:null,this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;const o=new e(this._ua);if(o.on("progress",(({response:e})=>{n.notify(e.status_code,e.reason_phrase)})),o.on("accepted",(({response:e})=>{n.notify(e.status_code,e.reason_phrase)})),o.on("_failed",(({message:e,cause:t})=>{e?n.notify(e.status_code,e.reason_phrase):n.notify(487,t)})),t.refer_to.uri.hasHeader("replaces")){const e=decodeURIComponent(t.refer_to.uri.getHeader("replaces"));l.extraHeaders=f.cloneArray(l.extraHeaders),l.extraHeaders.push(`Replaces: ${e}`)}o.connect(t.refer_to.uri.toAor(),l,r)}function l(){n.notify(603)}S.debug('emit "refer"'),this.emit("refer",{request:t,accept:(e,t)=>{r.call(this,e,t)},reject:()=>{l.call(this)}})}_receiveNotify(e){switch(S.debug("receiveNotify()"),e.event||e.reply(400),e.event.event){case"refer":{let t,n;if(e.event.params&&e.event.params.id)t=e.event.params.id,n=this._referSubscribers[t];else{if(1!==Object.keys(this._referSubscribers).length)return void e.reply(400,"Missing event id parameter");n=this._referSubscribers[Object.keys(this._referSubscribers)[0]]}if(!n)return void e.reply(481,"Subscription does not exist");n.receiveNotify(e),e.reply(200);break}default:e.reply(489)}}_receiveReplaces(t){function n(n){if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;const r=new e(this._ua);r.on("confirmed",(()=>{this.terminate()})),r.init_incoming(t,n)}function r(){S.debug("Replaced INVITE rejected by the user"),t.reply(486)}S.debug("receiveReplaces()"),this.emit("replaces",{request:t,accept:e=>{n.call(this,e)},reject:()=>{r.call(this)}})}_sendInitialRequest(e,t,n){const r=new T(this._ua,this._request,{onRequestTimeout:()=>{this.onRequestTimeout()},onTransportError:()=>{this.onTransportError()},onAuthenticated:e=>{this._request=e},onReceiveResponse:e=>{this._receiveInviteResponse(e)}});Promise.resolve().then((()=>n||(e.audio||e.video?(this._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e).catch((e=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");throw this._failed("local",null,c.causes.USER_DENIED_MEDIA_ACCESS),S.warn('emit "getusermediafailed" [error:%o]',e),this.emit("getusermediafailed",e),e}))):void 0))).then((e=>{if(this._status===R.STATUS_TERMINATED)throw new Error("terminated");return this._localMediaStream=e,e&&e.getTracks().forEach((track=>{this._connection.addTrack(track,e)})),this._connecting(this._request),this._createLocalDescription("offer",t).catch((e=>{throw this._failed("local",null,c.causes.WEBRTC_ERROR),e}))})).then((desc=>{if(this._is_canceled||this._status===R.STATUS_TERMINATED)throw new Error("terminated");this._request.body=desc,this._status=R.STATUS_INVITE_SENT,S.debug('emit "sending" [request:%o]',this._request),this.emit("sending",{request:this._request}),r.send()})).catch((e=>{this._status!==R.STATUS_TERMINATED&&S.warn(e)}))}_getDTMFRTPSender(){const e=this._connection.getSenders().find((e=>e.track&&"audio"===e.track.kind));if(e&&e.dtmf)return e.dtmf;S.warn("sendDTMF() | no local audio track to send DTMF with")}_receiveInviteResponse(e){if(S.debug("receiveInviteResponse()"),this._dialog&&e.status_code>=200&&e.status_code<=299){if(this._dialog.id.call_id===e.call_id&&this._dialog.id.local_tag===e.from_tag&&this._dialog.id.remote_tag===e.to_tag)return void this.sendRequest(c.ACK);{const dialog=new v(this,e,"UAC");return void 0!==dialog.error?void S.debug(dialog.error):(this.sendRequest(c.ACK),void this.sendRequest(c.BYE))}}if(this._is_canceled)e.status_code>=100&&e.status_code<200?this._request.cancel(this._cancel_reason):e.status_code>=200&&e.status_code<299&&this._acceptAndTerminate(e);else if(this._status===R.STATUS_INVITE_SENT||this._status===R.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this._status=R.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):{if(!e.to_tag){S.debug("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this._createDialog(e,"UAC",!0))break;if(this._status=R.STATUS_1XX_RECEIVED,!e.body){this._progress("remote",e);break}const t={originator:"remote",type:"answer",sdp:e.body};S.debug('emit "sdp"'),this.emit("sdp",t);const n=new RTCSessionDescription({type:"answer",sdp:t.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._connection.setRemoteDescription(n))).then((()=>this._progress("remote",e))).catch((e=>{S.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),this.emit("peerconnection:setremotedescriptionfailed",e)}));break}case/^2[0-9]{2}$/.test(e.status_code):{if(this._status=R.STATUS_CONFIRMED,!e.body){this._acceptAndTerminate(e,400,c.causes.MISSING_SDP),this._failed("remote",e,c.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(e,"UAC"))break;const t={originator:"remote",type:"answer",sdp:e.body};S.debug('emit "sdp"'),this.emit("sdp",t);const n=new RTCSessionDescription({type:"answer",sdp:t.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>{if("stable"===this._connection.signalingState)return this._connection.createOffer(this._rtcOfferConstraints).then((e=>this._connection.setLocalDescription(e))).catch((t=>{this._acceptAndTerminate(e,500,t.toString()),this._failed("local",e,c.causes.WEBRTC_ERROR)}))})).then((()=>{this._connection.setRemoteDescription(n).then((()=>{this._handleSessionTimersInIncomingResponse(e),this._accepted("remote",e),this.sendRequest(c.ACK),this._confirmed("local",null)})).catch((t=>{this._acceptAndTerminate(e,488,"Not Acceptable Here"),this._failed("remote",e,c.causes.BAD_MEDIA_DESCRIPTION),S.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),this.emit("peerconnection:setremotedescriptionfailed",t)}))}));break}default:{const t=f.sipErrorCause(e.status_code);this._failed("remote",e,t)}}}_sendReinvite(e={}){S.debug("sendReinvite()");const t=f.cloneArray(e.extraHeaders),n=f.cloneObject(e.eventHandlers),r=e.rtcOfferConstraints||this._rtcOfferConstraints||null;let l=!1;function o(e){if(this._status===R.STATUS_TERMINATED)return;if(this.sendRequest(c.ACK),l)return;if(this._handleSessionTimersInIncomingResponse(e),!e.body)return void d.call(this);if(!e.hasHeader("Content-Type")||"application/sdp"!==e.getHeader("Content-Type").toLowerCase())return void d.call(this);const t={originator:"remote",type:"answer",sdp:e.body};S.debug('emit "sdp"'),this.emit("sdp",t);const r=new RTCSessionDescription({type:"answer",sdp:t.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._connection.setRemoteDescription(r))).then((()=>{n.succeeded&&n.succeeded(e)})).catch((e=>{d.call(this),S.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),this.emit("peerconnection:setremotedescriptionfailed",e)}))}function d(e){n.failed&&n.failed(e)}t.push(`Contact: ${this._contact}`),t.push("Content-Type: application/sdp"),this._sessionTimers.running&&t.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${this._sessionTimers.refresher?"uac":"uas"}`),this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._createLocalDescription("offer",r))).then((e=>{const n={originator:"local",type:"offer",sdp:e=this._mangleOffer(e)};S.debug('emit "sdp"'),this.emit("sdp",n),this.sendRequest(c.INVITE,{extraHeaders:t,body:e,eventHandlers:{onSuccessResponse:e=>{o.call(this,e),l=!0},onErrorResponse:e=>{d.call(this,e)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}})})).catch((()=>{d()}))}_sendUpdate(e={}){S.debug("sendUpdate()");const t=f.cloneArray(e.extraHeaders),n=f.cloneObject(e.eventHandlers),r=e.rtcOfferConstraints||this._rtcOfferConstraints||null,l=e.sdpOffer||!1;let o=!1;function d(e){if(this._status!==R.STATUS_TERMINATED&&!o)if(this._handleSessionTimersInIncomingResponse(e),l){if(!e.body)return void h.call(this);if(!e.hasHeader("Content-Type")||"application/sdp"!==e.getHeader("Content-Type").toLowerCase())return void h.call(this);const t={originator:"remote",type:"answer",sdp:e.body};S.debug('emit "sdp"'),this.emit("sdp",t);const r=new RTCSessionDescription({type:"answer",sdp:t.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._connection.setRemoteDescription(r))).then((()=>{n.succeeded&&n.succeeded(e)})).catch((e=>{h.call(this),S.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),this.emit("peerconnection:setremotedescriptionfailed",e)}))}else n.succeeded&&n.succeeded(e)}function h(e){n.failed&&n.failed(e)}t.push(`Contact: ${this._contact}`),this._sessionTimers.running&&t.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${this._sessionTimers.refresher?"uac":"uas"}`),l?(t.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then((()=>this._createLocalDescription("offer",r))).then((e=>{const n={originator:"local",type:"offer",sdp:e=this._mangleOffer(e)};S.debug('emit "sdp"'),this.emit("sdp",n),this.sendRequest(c.UPDATE,{extraHeaders:t,body:e,eventHandlers:{onSuccessResponse:e=>{d.call(this,e),o=!0},onErrorResponse:e=>{h.call(this,e)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}})})).catch((()=>{h.call(this)}))):this.sendRequest(c.UPDATE,{extraHeaders:t,eventHandlers:{onSuccessResponse:e=>{d.call(this,e)},onErrorResponse:e=>{h.call(this,e)},onTransportError:()=>{this.onTransportError()},onRequestTimeout:()=>{this.onRequestTimeout()},onDialogError:()=>{this.onDialogError()}}})}_acceptAndTerminate(e,t,n){S.debug("acceptAndTerminate()");const r=[];t&&(n=n||c.REASON_PHRASE[t]||"",r.push(`Reason: SIP ;cause=${t}; text="${n}"`)),(this._dialog||this._createDialog(e,"UAC"))&&(this.sendRequest(c.ACK),this.sendRequest(c.BYE,{extraHeaders:r})),this._status=R.STATUS_TERMINATED}_mangleOffer(e){if(!this._localHold&&!this._remoteHold)return e;if(e=l.parse(e),this._localHold&&!this._remoteHold){S.debug("mangleOffer() | me on hold, mangling offer");for(const t of e.media)-1!==I.indexOf(t.type)&&(t.direction?"sendrecv"===t.direction?t.direction="sendonly":"recvonly"===t.direction&&(t.direction="inactive"):t.direction="sendonly")}else if(this._localHold&&this._remoteHold){S.debug("mangleOffer() | both on hold, mangling offer");for(const t of e.media)-1!==I.indexOf(t.type)&&(t.direction="inactive")}else if(this._remoteHold){S.debug("mangleOffer() | remote on hold, mangling offer");for(const t of e.media)-1!==I.indexOf(t.type)&&(t.direction?"sendrecv"===t.direction?t.direction="recvonly":"recvonly"===t.direction&&(t.direction="inactive"):t.direction="recvonly")}return l.write(e)}_setLocalMediaStatus(){let e=!0,t=!0;(this._localHold||this._remoteHold)&&(e=!1,t=!1),this._audioMuted&&(e=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!e),this._toggleMuteVideo(!t)}_handleSessionTimersInIncomingRequest(e,t){if(!this._sessionTimers.enabled)return;let n;e.session_expires&&e.session_expires>=c.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,n=e.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,n="uas"),t.push(`Session-Expires: ${this._sessionTimers.currentExpires};refresher=${n}`),this._sessionTimers.refresher="uas"===n,this._runSessionTimer()}_handleSessionTimersInIncomingResponse(e){if(!this._sessionTimers.enabled)return;let t;e.session_expires&&e.session_expires>=c.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,t=e.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,t="uac"),this._sessionTimers.refresher="uac"===t,this._runSessionTimer()}_runSessionTimer(){const e=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout((()=>{this._status!==R.STATUS_TERMINATED&&this._isReadyToReOffer()&&(S.debug("runSessionTimer() | sending session refresh request"),this._sessionTimers.refreshMethod===c.UPDATE?this._sendUpdate():this._sendReinvite())}),500*e):this._sessionTimers.timer=setTimeout((()=>{this._status!==R.STATUS_TERMINATED&&(S.warn("runSessionTimer() | timer expired, terminating the session"),this.terminate({cause:c.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))}),1100*e)}_toggleMuteAudio(e){const t=this._connection.getSenders().filter((e=>e.track&&"audio"===e.track.kind));for(const n of t)n.track.enabled=!e}_toggleMuteVideo(e){const t=this._connection.getSenders().filter((e=>e.track&&"video"===e.track.kind));for(const n of t)n.track.enabled=!e}_newRTCSession(e,t){S.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:e,session:this,request:t})}_connecting(e){S.debug("session connecting"),S.debug('emit "connecting"'),this.emit("connecting",{request:e})}_progress(e,t){S.debug("session progress"),S.debug('emit "progress"'),this.emit("progress",{originator:e,response:t||null})}_accepted(e,t){S.debug("session accepted"),this._start_time=new Date,S.debug('emit "accepted"'),this.emit("accepted",{originator:e,response:t||null})}_confirmed(e,t){S.debug("session confirmed"),this._is_confirmed=!0,S.debug('emit "confirmed"'),this.emit("confirmed",{originator:e,ack:t||null})}_ended(e,t,n){S.debug("session ended"),this._end_time=new Date,this._close(),S.debug('emit "ended"'),this.emit("ended",{originator:e,message:t||null,cause:n})}_failed(e,t,n){S.debug("session failed"),S.debug('emit "_failed"'),this.emit("_failed",{originator:e,message:t||null,cause:n}),this._close(),S.debug('emit "failed"'),this.emit("failed",{originator:e,message:t||null,cause:n})}_onhold(e){S.debug("session onhold"),this._setLocalMediaStatus(),S.debug('emit "hold"'),this.emit("hold",{originator:e})}_onunhold(e){S.debug("session onunhold"),this._setLocalMediaStatus(),S.debug('emit "unhold"'),this.emit("unhold",{originator:e})}_onmute({audio:audio,video:video}){S.debug("session onmute"),this._setLocalMediaStatus(),S.debug('emit "muted"'),this.emit("muted",{audio:audio,video:video})}_onunmute({audio:audio,video:video}){S.debug("session onunmute"),this._setLocalMediaStatus(),S.debug('emit "unmuted"'),this.emit("unmuted",{audio:audio,video:video})}}},321:function(e,t){class n extends Error{constructor(e,t){super(),this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=e,this.value=t,this.message=this.value?`Invalid value ${JSON.stringify(this.value)} for parameter "${this.parameter}"`:`Missing parameter: ${this.parameter}`}}class r extends Error{constructor(e){super(),this.code=2,this.name="INVALID_STATE_ERROR",this.status=e,this.message=`Invalid status: ${e}`}}class l extends Error{constructor(e){super(),this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=e}}class o extends Error{constructor(e){super(),this.code=4,this.name="NOT_READY_ERROR",this.message=e}}e.exports={ConfigurationError:n,InvalidStateError:r,NotSupportedError:l,NotReadyError:o}},322:function(e,t,n){const r=n(315),l=n(303),o=n(299),c=n(306),d=n(328),h=n(311),f=new l("SIPMessage");class _{constructor(e,t,n,r,l,body){if(!e||!t||!n)return null;r=r||{},this.ua=n,this.headers={},this.method=e,this.ruri=t,this.body=body,this.extraHeaders=c.cloneArray(l),r.route_set?this.setHeader("route",r.route_set):n.configuration.use_preloaded_route&&this.setHeader("route",`<${n.transport.sip_uri};lr>`),this.setHeader("via",""),this.setHeader("max-forwards",o.MAX_FORWARDS);const h=r.to_uri||t,f=r.to_tag?{tag:r.to_tag}:null,_=void 0!==r.to_display_name?r.to_display_name:null;this.to=new d(h,_,f),this.setHeader("to",this.to.toString());const m=r.from_uri||n.configuration.uri,v={tag:r.from_tag||c.newTag()};let T;T=void 0!==r.from_display_name?r.from_display_name:n.configuration.display_name?n.configuration.display_name:null,this.from=new d(m,T,v),this.setHeader("from",this.from.toString());const $=r.call_id||n.configuration.jssip_id+c.createRandomToken(15);this.call_id=$,this.setHeader("call-id",$);const y=r.cseq||Math.floor(1e4*Math.random());this.cseq=y,this.setHeader("cseq",`${y} ${e}`)}setHeader(e,t){const n=new RegExp(`^\\s*${e}\\s*:`,"i");for(let e=0;e<this.extraHeaders.length;e++)n.test(this.extraHeaders[e])&&this.extraHeaders.splice(e,1);this.headers[c.headerize(e)]=Array.isArray(t)?t:[t]}getHeader(e){const t=this.headers[c.headerize(e)];if(t){if(t[0])return t[0]}else{const t=new RegExp(`^\\s*${e}\\s*:`,"i");for(const header of this.extraHeaders)if(t.test(header))return header.substring(header.indexOf(":")+1).trim()}}getHeaders(e){const t=this.headers[c.headerize(e)],n=[];if(t){for(const header of t)n.push(header);return n}{const t=new RegExp(`^\\s*${e}\\s*:`,"i");for(const header of this.extraHeaders)t.test(header)&&n.push(header.substring(header.indexOf(":")+1).trim());return n}}hasHeader(e){if(this.headers[c.headerize(e)])return!0;{const t=new RegExp(`^\\s*${e}\\s*:`,"i");for(const header of this.extraHeaders)if(t.test(header))return!0}return!1}parseSDP(e){return!e&&this.sdp||(this.sdp=r.parse(this.body||"")),this.sdp}toString(){let e=`${this.method} ${this.ruri} SIP/2.0\r\n`;for(const t in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,t))for(const n of this.headers[t])e+=`${t}: ${n}\r\n`;for(const header of this.extraHeaders)e+=`${header.trim()}\r\n`;const t=[];switch(this.method){case o.REGISTER:t.push("path","gruu");break;case o.INVITE:this.ua.configuration.session_timers&&t.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&t.push("gruu"),t.push("ice","replaces");break;case o.UPDATE:this.ua.configuration.session_timers&&t.push("timer"),t.push("ice")}t.push("outbound");const n=this.ua.configuration.user_agent||o.USER_AGENT;if(e+=`Allow: ${o.ALLOWED_METHODS}\r\n`,e+=`Supported: ${t}\r\n`,e+=`User-Agent: ${n}\r\n`,this.body){e+=`Content-Length: ${c.str_utf8_length(this.body)}\r\n\r\n`,e+=this.body}else e+="Content-Length: 0\r\n\r\n";return e}clone(){const e=new _(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach((function(t){e.headers[t]=this.headers[t].slice()}),this),e.body=this.body,e.extraHeaders=c.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e}}class m extends _{constructor(e,t,n,r,body){super(o.INVITE,e,t,n,r,body),this.transaction=null}cancel(e){this.transaction.cancel(e)}clone(){const e=new m(this.ruri,this.ua);return Object.keys(this.headers).forEach((function(t){e.headers[t]=this.headers[t].slice()}),this),e.body=this.body,e.extraHeaders=c.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e.transaction=this.transaction,e}}class v{constructor(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}addHeader(e,t){const header={raw:t};e=c.headerize(e),this.headers[e]?this.headers[e].push(header):this.headers[e]=[header]}getHeader(e){const header=this.headers[c.headerize(e)];if(header)return header[0]?header[0].raw:void 0}getHeaders(e){const t=this.headers[c.headerize(e)],n=[];if(!t)return[];for(const header of t)n.push(header.raw);return n}hasHeader(e){return!!this.headers[c.headerize(e)]}parseHeader(e,t=0){if(e=c.headerize(e),!this.headers[e])return void f.debug(`header "${e}" not present`);if(t>=this.headers[e].length)return void f.debug(`not so many "${e}" headers present`);const header=this.headers[e][t],n=header.raw;if(header.parsed)return header.parsed;const r=h.parse(n,e.replace(/-/g,"_"));return-1===r?(this.headers[e].splice(t,1),void f.debug(`error parsing "${e}" header field with value "${n}"`)):(header.parsed=r,r)}s(e,t){return this.parseHeader(e,t)}setHeader(e,t){const header={raw:t};this.headers[c.headerize(e)]=[header]}parseSDP(e){return!e&&this.sdp||(this.sdp=r.parse(this.body||"")),this.sdp}toString(){return this.data}}e.exports={OutgoingRequest:_,InitialOutgoingInviteRequest:m,IncomingRequest:class extends v{constructor(e){super(),this.ua=e,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null}reply(code,e,t,body,n,r){const l=[];let d=this.getHeader("To");if(e=e||null,!(code=code||null)||code<100||code>699)throw new TypeError(`Invalid status_code: ${code}`);if(e&&"string"!=typeof e&&!(e instanceof String))throw new TypeError(`Invalid reason_phrase: ${e}`);e=e||o.REASON_PHRASE[code]||"",t=c.cloneArray(t);let h=`SIP/2.0 ${code} ${e}\r\n`;if(this.method===o.INVITE&&code>100&&code<=200){const e=this.getHeaders("record-route");for(const header of e)h+=`Record-Route: ${header}\r\n`}const f=this.getHeaders("via");for(const e of f)h+=`Via: ${e}\r\n`;!this.to_tag&&code>100?d+=`;tag=${c.newTag()}`:this.to_tag&&!this.s("to").hasParam("tag")&&(d+=`;tag=${this.to_tag}`),h+=`To: ${d}\r\n`,h+=`From: ${this.getHeader("From")}\r\n`,h+=`Call-ID: ${this.call_id}\r\n`,h+=`CSeq: ${this.cseq} ${this.method}\r\n`;for(const header of t)h+=`${header.trim()}\r\n`;switch(this.method){case o.INVITE:this.ua.configuration.session_timers&&l.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&l.push("gruu"),l.push("ice","replaces");break;case o.UPDATE:this.ua.configuration.session_timers&&l.push("timer"),body&&l.push("ice"),l.push("replaces")}if(l.push("outbound"),this.method===o.OPTIONS?(h+=`Allow: ${o.ALLOWED_METHODS}\r\n`,h+=`Accept: ${o.ACCEPTED_BODY_TYPES}\r\n`):405===code?h+=`Allow: ${o.ALLOWED_METHODS}\r\n`:415===code&&(h+=`Accept: ${o.ACCEPTED_BODY_TYPES}\r\n`),h+=`Supported: ${l}\r\n`,body){h+="Content-Type: application/sdp\r\n",h+=`Content-Length: ${c.str_utf8_length(body)}\r\n\r\n`,h+=body}else h+="Content-Length: 0\r\n\r\n";this.server_transaction.receiveResponse(code,h,n,r)}reply_sl(code=null,e=null){const t=this.getHeaders("via");if(!code||code<100||code>699)throw new TypeError(`Invalid status_code: ${code}`);if(e&&"string"!=typeof e&&!(e instanceof String))throw new TypeError(`Invalid reason_phrase: ${e}`);let n=`SIP/2.0 ${code} ${e=e||o.REASON_PHRASE[code]||""}\r\n`;for(const e of t)n+=`Via: ${e}\r\n`;let r=this.getHeader("To");!this.to_tag&&code>100?r+=`;tag=${c.newTag()}`:this.to_tag&&!this.s("to").hasParam("tag")&&(r+=`;tag=${this.to_tag}`),n+=`To: ${r}\r\n`,n+=`From: ${this.getHeader("From")}\r\n`,n+=`Call-ID: ${this.call_id}\r\n`,n+=`CSeq: ${this.cseq} ${this.method}\r\n`,n+="Content-Length: 0\r\n\r\n",this.transport.send(n)}},IncomingResponse:class extends v{constructor(){super(),this.headers={},this.status_code=null,this.reason_phrase=null}}}},323:function(e,t,n){"use strict";var r=n(318),l=n(295),o=n(304),c=n(297),d=n(340),h=n(305),f=n(319),_=n(300),m=n(359);n(314)("JsSIP")("version %s",r.version),e.exports={C:l,Exceptions:o,Utils:c,UA:d,URI:h,NameAddrHeader:f,WebSocketInterface:m,Grammar:_,debug:n(314),get name(){return r.title},get version(){return r.version}}},324:function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},325:function(e,t,n){"use strict";var r=500;e.exports={T1:r,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},326:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,l=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw l}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function h(e,p){return h=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},h(e,p)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var l=m(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=n(298).EventEmitter,T=n(315),$=n(296),y=n(295),C=n(304),A=n(310),E=n(297),S=n(325),R=n(302),I=n(347),w=n(309),O=n(349),N=n(350),D=n(351),P=n(352),x=n(305),U=new $("RTCSession"),M={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},k=["audio","video"];e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,e);var t=f(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),U.debug("new"),(r=t.call(this))._id=null,r._ua=e,r._status=M.STATUS_NULL,r._dialog=null,r._earlyDialogs={},r._contact=null,r._from_tag=null,r._to_tag=null,r._connection=null,r._connectionPromiseQueue=Promise.resolve(),r._request=null,r._is_canceled=!1,r._cancel_reason="",r._is_confirmed=!1,r._late_sdp=!1,r._rtcOfferConstraints=null,r._rtcAnswerConstraints=null,r._localMediaStream=null,r._localMediaStreamLocallyGenerated=!1,r._rtcReady=!0,r._iceReady=!1,r._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},r._direction=null,r._local_identity=null,r._remote_identity=null,r._start_time=null,r._end_time=null,r._tones=null,r._audioMuted=!1,r._videoMuted=!1,r._localHold=!1,r._remoteHold=!1,r._sessionTimers={enabled:r._ua.configuration.session_timers,refreshMethod:r._ua.configuration.session_timers_refresh_method,defaultExpires:y.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},r._referSubscribers={},r._data={},r}return d(n,null,[{key:"C",get:function(){return M}}]),d(n,[{key:"isInProgress",value:function(){switch(this._status){case M.STATUS_NULL:case M.STATUS_INVITE_SENT:case M.STATUS_1XX_RECEIVED:case M.STATUS_INVITE_RECEIVED:case M.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case M.STATUS_ANSWERED:case M.STATUS_WAITING_FOR_ACK:case M.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case M.STATUS_CANCELED:case M.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;U.debug("connect()");var r=e,l=E.cloneObject(t.eventHandlers),o=E.cloneArray(t.extraHeaders),c=E.cloneObject(t.mediaConstraints,{audio:!0,video:!0}),d=t.mediaStream||null,h=E.cloneObject(t.pcConfig,{iceServers:[]}),f=t.rtcConstraints||null,_=t.rtcOfferConstraints||null;if(this._rtcOfferConstraints=_,this._rtcAnswerConstraints=t.rtcAnswerConstraints||null,this._data=t.data||this._data,void 0===e)throw new TypeError("Not enough arguments");if(this._status!==M.STATUS_NULL)throw new C.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new C.NotSupportedError("WebRTC not supported");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(r));for(var m in this._sessionTimers.enabled&&E.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=y.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=y.SESSION_EXPIRES),l)Object.prototype.hasOwnProperty.call(l,m)&&this.on(m,l[m]);this._from_tag=E.newTag();var v=t.anonymous||!1,T={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:v,outbound:!0}),v?(T.from_display_name="Anonymous",T.from_uri=new x("sip","anonymous","anonymous.invalid"),o.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),o.push("Privacy: id")):t.fromUserName&&(T.from_uri=new x("sip",t.fromUserName,this._ua.configuration.uri.host),o.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),t.fromDisplayName&&(T.from_display_name=t.fromDisplayName),o.push("Contact: ".concat(this._contact)),o.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&o.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._request=new R.InitialOutgoingInviteRequest(e,this._ua,T,o),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(h,f),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,n&&n(this),this._newRTCSession("local",this._request),this._sendInitialRequest(c,_,d)}},{key:"init_incoming",value:function(e,t){var n,r=this;U.debug("init_incoming()");var l=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0;e.body&&"application/sdp"!==l?e.reply(415):(this._status=M.STATUS_INVITE_RECEIVED,this._from_tag=e.from_tag,this._id=e.call_id+this._from_tag,this._request=e,this._contact=this._ua.contact.toString(),e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=E.newTag(),this._createDialog(e,"UAS",!0)?(e.body?this._late_sdp=!1:this._late_sdp=!0,this._status=M.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout((function(){e.reply(408),r._failed("local",null,y.causes.NO_ANSWER)}),this._ua.configuration.no_answer_timeout),n&&(this._timers.expiresTimer=setTimeout((function(){r._status===M.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),r._failed("system",null,y.causes.EXPIRES))}),n)),this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from,t&&t(this),this._newRTCSession("remote",e),this._status!==M.STATUS_TERMINATED&&(e.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))):e.reply(500,"Missing Contact header field"))}},{key:"answer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U.debug("answer()");var n=this._request,r=E.cloneArray(t.extraHeaders),o=E.cloneObject(t.mediaConstraints),c=t.mediaStream||null,d=E.cloneObject(t.pcConfig,{iceServers:[]}),h=t.rtcConstraints||null,f=t.rtcAnswerConstraints||null,_=E.cloneObject(t.rtcOfferConstraints),m=!1,v=!1,T=!1,$=!1;if(this._rtcAnswerConstraints=f,this._rtcOfferConstraints=t.rtcOfferConstraints||null,this._data=t.data||this._data,"incoming"!==this._direction)throw new C.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==M.STATUS_WAITING_FOR_ANSWER)throw new C.InvalidStateError(this._status);if(this._sessionTimers.enabled&&E.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=y.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=y.SESSION_EXPIRES),this._status=M.STATUS_ANSWERED,this._createDialog(n,"UAS")){clearTimeout(this._timers.userNoAnswerTimer),r.unshift("Contact: ".concat(this._contact));var A=n.parseSDP();Array.isArray(A.media)||(A.media=[A.media]);var S,R=l(A.media);try{for(R.s();!(S=R.n()).done;){var I=S.value;"audio"===I.type&&(m=!0,I.direction&&"sendrecv"!==I.direction||(T=!0)),"video"===I.type&&(v=!0,I.direction&&"sendrecv"!==I.direction||($=!0))}}catch(e){R.e(e)}finally{R.f()}if(c&&!1===o.audio){var w,O=l(c.getAudioTracks());try{for(O.s();!(w=O.n()).done;){var track=w.value;c.removeTrack(track)}}catch(e){O.e(e)}finally{O.f()}}if(c&&!1===o.video){var N,D=l(c.getVideoTracks());try{for(D.s();!(N=D.n()).done;){var P=N.value;c.removeTrack(P)}}catch(e){D.e(e)}finally{D.f()}}c||void 0!==o.audio||(o.audio=T),c||void 0!==o.video||(o.video=$),c||m||_.offerToReceiveAudio||(o.audio=!1),c||v||_.offerToReceiveVideo||(o.video=!1),this._createRTCConnection(d,h),Promise.resolve().then((function(){return c||(o.audio||o.video?(e._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(o).catch((function(t){if(e._status===M.STATUS_TERMINATED)throw new Error("terminated");throw n.reply(480),e._failed("local",null,y.causes.USER_DENIED_MEDIA_ACCESS),U.warn('emit "getusermediafailed" [error:%o]',t),e.emit("getusermediafailed",t),new Error("getUserMedia() failed")}))):void 0)})).then((function(t){if(e._status===M.STATUS_TERMINATED)throw new Error("terminated");e._localMediaStream=t,t&&t.getTracks().forEach((function(track){e._connection.addTrack(track,t)}))})).then((function(){if(!e._late_sdp){var t={originator:"remote",type:"offer",sdp:n.body};U.debug('emit "sdp"'),e.emit("sdp",t);var r=new RTCSessionDescription({type:"offer",sdp:t.sdp});return e._connectionPromiseQueue=e._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(r)})).catch((function(t){throw n.reply(488),e._failed("system",null,y.causes.WEBRTC_ERROR),U.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t),new Error("peerconnection.setRemoteDescription() failed")})),e._connectionPromiseQueue}})).then((function(){if(e._status===M.STATUS_TERMINATED)throw new Error("terminated");return e._connecting(n),e._late_sdp?e._createLocalDescription("offer",e._rtcOfferConstraints).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")})):e._createLocalDescription("answer",f).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")}))})).then((function(desc){if(e._status===M.STATUS_TERMINATED)throw new Error("terminated");e._handleSessionTimersInIncomingRequest(n,r),n.reply(200,null,r,desc,(function(){e._status=M.STATUS_WAITING_FOR_ACK,e._setInvite2xxTimer(n,desc),e._setACKTimer(),e._accepted("local")}),(function(){e._failed("system",null,y.causes.CONNECTION_ERROR)}))})).catch((function(t){e._status!==M.STATUS_TERMINATED&&U.warn(t)}))}else n.reply(500,"Error creating dialog")}},{key:"terminate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U.debug("terminate()");var n,r=t.cause||y.causes.BYE,l=E.cloneArray(t.extraHeaders),body=t.body,o=t.status_code,c=t.reason_phrase;if(this._status===M.STATUS_TERMINATED)throw new C.InvalidStateError(this._status);switch(this._status){case M.STATUS_NULL:case M.STATUS_INVITE_SENT:case M.STATUS_1XX_RECEIVED:if(U.debug("canceling session"),o&&(o<200||o>=700))throw new TypeError("Invalid status_code: ".concat(o));o&&(c=c||y.REASON_PHRASE[o]||"",n="SIP ;cause=".concat(o,' ;text="').concat(c,'"')),this._status===M.STATUS_NULL||this._status===M.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=n):this._status===M.STATUS_1XX_RECEIVED&&this._request.cancel(n),this._status=M.STATUS_CANCELED,this._failed("local",null,y.causes.CANCELED);break;case M.STATUS_WAITING_FOR_ANSWER:case M.STATUS_ANSWERED:if(U.debug("rejecting session"),(o=o||480)<300||o>=700)throw new TypeError("Invalid status_code: ".concat(o));this._request.reply(o,c,l,body),this._failed("local",null,y.causes.REJECTED);break;case M.STATUS_WAITING_FOR_ACK:case M.STATUS_CONFIRMED:if(U.debug("terminating session"),c=t.reason_phrase||y.REASON_PHRASE[o]||"",o&&(o<200||o>=700))throw new TypeError("Invalid status_code: ".concat(o));if(o&&l.push("Reason: SIP ;cause=".concat(o,'; text="').concat(c,'"')),this._status===M.STATUS_WAITING_FOR_ACK&&"incoming"===this._direction&&this._request.server_transaction.state!==A.C.STATUS_TERMINATED){var dialog=this._dialog;this.receiveRequest=function(t){t.method===y.ACK&&(e.sendRequest(y.BYE,{extraHeaders:l,body:body}),dialog.terminate())},this._request.server_transaction.on("stateChanged",(function(){e._request.server_transaction.state===A.C.STATUS_TERMINATED&&(e.sendRequest(y.BYE,{extraHeaders:l,body:body}),dialog.terminate())})),this._ended("local",null,r),this._dialog=dialog,this._ua.newDialog(dialog)}else this.sendRequest(y.BYE,{extraHeaders:l,body:body}),this._ended("local",null,r)}}},{key:"sendDTMF",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};U.debug("sendDTMF() | tones: %s",e);var n=0,r=t.duration||null,l=t.interToneGap||null,o=t.transportType||y.DTMF_TRANSPORT.INFO;if(void 0===e)throw new TypeError("Not enough arguments");if(this._status!==M.STATUS_CONFIRMED&&this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_1XX_RECEIVED)throw new C.InvalidStateError(this._status);if(o!==y.DTMF_TRANSPORT.INFO&&o!==y.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(o));if("number"==typeof e&&(e=e.toString()),!e||"string"!=typeof e||!e.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(e));if(r&&!E.isDecimal(r))throw new TypeError("Invalid tone duration: ".concat(r));if(r?r<O.C.MIN_DURATION?(U.debug('"duration" value is lower than the minimum allowed, setting it to '.concat(O.C.MIN_DURATION," milliseconds")),r=O.C.MIN_DURATION):r>O.C.MAX_DURATION?(U.debug('"duration" value is greater than the maximum allowed, setting it to '.concat(O.C.MAX_DURATION," milliseconds")),r=O.C.MAX_DURATION):r=Math.abs(r):r=O.C.DEFAULT_DURATION,t.duration=r,l&&!E.isDecimal(l))throw new TypeError("Invalid interToneGap: ".concat(l));if(l?l<O.C.MIN_INTER_TONE_GAP?(U.debug('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(O.C.MIN_INTER_TONE_GAP," milliseconds")),l=O.C.MIN_INTER_TONE_GAP):l=Math.abs(l):l=O.C.DEFAULT_INTER_TONE_GAP,o!==y.DTMF_TRANSPORT.RFC2833)this._tones?this._tones+=e:(this._tones=e,d.call(this));else{var c=this._getDTMFRTPSender();c&&(e=c.toneBuffer+e,c.insertDTMF(e,r,l))}function d(){var e,o=this;if(this._status===M.STATUS_TERMINATED||!this._tones||n>=this._tones.length)this._tones=null;else{var c=this._tones[n];if(n+=1,","===c)e=2e3;else{var h=new O(this);t.eventHandlers={onFailed:function(){o._tones=null}},h.send(c,t),e=r+l}setTimeout(d.bind(this),e)}}}},{key:"sendInfo",value:function(e,body){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(U.debug("sendInfo()"),this._status!==M.STATUS_CONFIRMED&&this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_1XX_RECEIVED)throw new C.InvalidStateError(this._status);var n=new N(this);n.send(e,body,t)}},{key:"mute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!1};U.debug("mute()");var t=!1,n=!1;!1===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),!1===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),!0!==t&&!0!==n||this._onmute({audio:t,video:n})}},{key:"unmute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0};U.debug("unmute()");var t=!1,n=!1;!0===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!1,!1===this._localHold&&this._toggleMuteAudio(!1)),!0===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!1,!1===this._localHold&&this._toggleMuteVideo(!1)),!0!==t&&!0!==n||this._onunmute({audio:t,video:n})}},{key:"hold",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(U.debug("hold()"),this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:y.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"unhold",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(U.debug("unhold()"),this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:y.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"renegotiate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;U.debug("renegotiate()");var r=t.rtcOfferConstraints||null;if(this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_CONFIRMED)return!1;if(!this._isReadyToReOffer())return!1;var l={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:y.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:l,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:l,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}),!0}},{key:"refer",value:function(e,t){var n=this;U.debug("refer()");var r=e;if(this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_CONFIRMED)return!1;if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(r));var l=new P(this);l.sendRefer(e,t);var o=l.id;return this._referSubscribers[o]=l,l.on("requestFailed",(function(){delete n._referSubscribers[o]})),l.on("accepted",(function(){delete n._referSubscribers[o]})),l.on("failed",(function(){delete n._referSubscribers[o]})),l}},{key:"sendRequest",value:function(e,t){return U.debug("sendRequest()"),this._dialog.sendRequest(e,t)}},{key:"receiveRequest",value:function(e){var t=this;if(U.debug("receiveRequest()"),e.method===y.CANCEL)this._status!==M.STATUS_WAITING_FOR_ANSWER&&this._status!==M.STATUS_ANSWERED||(this._status=M.STATUS_CANCELED,this._request.reply(487),this._failed("remote",e,y.causes.CANCELED));else switch(e.method){case y.ACK:if(this._status!==M.STATUS_WAITING_FOR_ACK)return;if(this._status=M.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!e.body){this.terminate({cause:y.causes.MISSING_SDP,status_code:400});break}var n={originator:"remote",type:"answer",sdp:e.body};U.debug('emit "sdp"'),this.emit("sdp",n);var r=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(r)})).then((function(){t._is_confirmed||t._confirmed("remote",e)})).catch((function(e){t.terminate({cause:y.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),U.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else this._is_confirmed||this._confirmed("remote",e);break;case y.BYE:this._status===M.STATUS_CONFIRMED||this._status===M.STATUS_WAITING_FOR_ACK?(e.reply(200),this._ended("remote",e,y.causes.BYE)):this._status===M.STATUS_INVITE_RECEIVED||this._status===M.STATUS_WAITING_FOR_ANSWER?(e.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",e,y.causes.BYE)):e.reply(403,"Wrong Status");break;case y.INVITE:this._status===M.STATUS_CONFIRMED?e.hasHeader("replaces")?this._receiveReplaces(e):this._receiveReinvite(e):e.reply(403,"Wrong Status");break;case y.INFO:if(this._status===M.STATUS_1XX_RECEIVED||this._status===M.STATUS_WAITING_FOR_ANSWER||this._status===M.STATUS_ANSWERED||this._status===M.STATUS_WAITING_FOR_ACK||this._status===M.STATUS_CONFIRMED){var l=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0;l&&l.match(/^application\/dtmf-relay/i)?new O(this).init_incoming(e):void 0!==l?new N(this).init_incoming(e):e.reply(415)}else e.reply(403,"Wrong Status");break;case y.UPDATE:this._status===M.STATUS_CONFIRMED?this._receiveUpdate(e):e.reply(403,"Wrong Status");break;case y.REFER:this._status===M.STATUS_CONFIRMED?this._receiveRefer(e):e.reply(403,"Wrong Status");break;case y.NOTIFY:this._status===M.STATUS_CONFIRMED?this._receiveNotify(e):e.reply(403,"Wrong Status");break;default:e.reply(501)}}},{key:"onTransportError",value:function(){U.warn("onTransportError()"),this._status!==M.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:y.causes.CONNECTION_ERROR,cause:y.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){U.warn("onRequestTimeout()"),this._status!==M.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:y.causes.REQUEST_TIMEOUT,cause:y.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){U.warn("onDialogError()"),this._status!==M.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:y.causes.DIALOG_ERROR,cause:y.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(data){U.debug("newDTMF()"),this.emit("newDTMF",data)}},{key:"newInfo",value:function(data){U.debug("newInfo()"),this.emit("newInfo",data)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(U.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):(U.debug("_isReadyToReOffer() | session not established yet"),!1):(U.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(U.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(U.debug("close() | closing local MediaStream"),E.closeMediaStream(this._localMediaStream)),this._status!==M.STATUS_TERMINATED){if(this._status=M.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(e){U.warn("close() | error closing the RTCPeerConnection: %o",e)}for(var e in this._timers)Object.prototype.hasOwnProperty.call(this._timers,e)&&clearTimeout(this._timers[e]);for(var dialog in clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog),this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,dialog)&&(this._earlyDialogs[dialog].terminate(),delete this._earlyDialogs[dialog]);for(var t in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,t)&&delete this._referSubscribers[t];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(e,body){var t=S.T1;this._timers.invite2xxTimer=setTimeout(function n(){this._status===M.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: ".concat(this._contact)],body),t<S.T2&&(t*=2)>S.T2&&(t=S.T2),this._timers.invite2xxTimer=setTimeout(n.bind(this),t))}.bind(this),t)}},{key:"_setACKTimer",value:function(){var e=this;this._timers.ackTimer=setTimeout((function(){e._status===M.STATUS_WAITING_FOR_ACK&&(U.debug("no ACK received, terminating the session"),clearTimeout(e._timers.invite2xxTimer),e.sendRequest(y.BYE),e._ended("remote",null,y.causes.NO_ACK))}),S.TIMER_H)}},{key:"_createRTCConnection",value:function(e,t){var n=this;this._connection=new RTCPeerConnection(e,t),this._connection.addEventListener("iceconnectionstatechange",(function(){"failed"===n._connection.iceConnectionState&&n.terminate({cause:y.causes.RTP_TIMEOUT,status_code:408,reason_phrase:y.causes.RTP_TIMEOUT})})),U.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(e,t){var n=this;if(U.debug("createLocalDescription()"),"offer"!==e&&"answer"!==e)throw new Error('createLocalDescription() | invalid type "'.concat(e,'"'));var r=this._connection;return this._rtcReady=!1,Promise.resolve().then((function(){return"offer"===e?r.createOffer(t).catch((function(e){return U.warn('emit "peerconnection:createofferfailed" [error:%o]',e),n.emit("peerconnection:createofferfailed",e),Promise.reject(e)})):r.createAnswer(t).catch((function(e){return U.warn('emit "peerconnection:createanswerfailed" [error:%o]',e),n.emit("peerconnection:createanswerfailed",e),Promise.reject(e)}))})).then((function(desc){return r.setLocalDescription(desc).catch((function(e){return n._rtcReady=!0,U.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',e),n.emit("peerconnection:setlocaldescriptionfailed",e),Promise.reject(e)}))})).then((function(){var l=t&&t.iceRestart;if("complete"===r.iceGatheringState&&!l||"gathering"===r.iceGatheringState&&n._iceReady){n._rtcReady=!0;var o={originator:"local",type:e,sdp:r.localDescription.sdp};return U.debug('emit "sdp"'),n.emit("sdp",o),Promise.resolve(o.sdp)}return new Promise((function(t){var l,o,c=!1;n._iceReady=!1;var d=function(){r.removeEventListener("icecandidate",l),r.removeEventListener("icegatheringstatechange",o),c=!0,n._rtcReady=!0,n._iceReady=!0;var d={originator:"local",type:e,sdp:r.localDescription.sdp};U.debug('emit "sdp"'),n.emit("sdp",d),t(d.sdp)};r.addEventListener("icecandidate",l=function(e){var t=e.candidate;t?n.emit("icecandidate",{candidate:t,ready:d}):c||d()}),r.addEventListener("icegatheringstatechange",o=function(){"complete"!==r.iceGatheringState||c||d()})}))}))}},{key:"_createDialog",value:function(e,t,n){var r="UAS"===t?e.to_tag:e.from_tag,l="UAS"===t?e.from_tag:e.to_tag,o=e.call_id+r+l,c=this._earlyDialogs[o];if(n)return!!c||((c=new I(this,e,t,I.C.STATUS_EARLY)).error?(U.debug(c.error),this._failed("remote",e,y.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[o]=c,!0));if(this._from_tag=e.from_tag,this._to_tag=e.to_tag,c)return c.update(e,t),this._dialog=c,delete this._earlyDialogs[o],!0;var dialog=new I(this,e,t);return dialog.error?(U.debug(dialog.error),this._failed("remote",e,y.causes.INTERNAL_ERROR),!1):(this._dialog=dialog,!0)}},{key:"_receiveReinvite",value:function(e){var t=this;U.debug("receiveReinvite()");var n=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,data={request:e,callback:void 0,reject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=!0;var n=t.status_code||403,l=t.reason_phrase||"",o=E.cloneArray(t.extraHeaders);if(this._status!==M.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError("Invalid status_code: ".concat(n));e.reply(n,l,o)}.bind(this)},r=!1;if(this.emit("reinvite",data),!r){if(this._late_sdp=!1,!e.body)return this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),void(this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._createLocalDescription("offer",t._rtcOfferConstraints)})).then((function(e){l.call(t,e)})).catch((function(){e.reply(500)})));if("application/sdp"!==n)return U.debug("invalid Content-Type"),void e.reply(415);this._processInDialogSdpOffer(e).then((function(desc){t._status!==M.STATUS_TERMINATED&&l.call(t,desc)})).catch((function(e){U.warn(e)}))}function l(desc){var t=this,n=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,n),this._late_sdp&&(desc=this._mangleOffer(desc)),e.reply(200,null,n,desc,(function(){t._status=M.STATUS_WAITING_FOR_ACK,t._setInvite2xxTimer(e,desc),t._setACKTimer()})),"function"==typeof data.callback&&data.callback()}}},{key:"_receiveUpdate",value:function(e){var t=this;U.debug("receiveUpdate()");var n=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,data={request:e,callback:void 0,reject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=!0;var n=t.status_code||403,l=t.reason_phrase||"",o=E.cloneArray(t.extraHeaders);if(this._status!==M.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError("Invalid status_code: ".concat(n));e.reply(n,l,o)}.bind(this)},r=!1;if(this.emit("update",data),!r)if(e.body){if("application/sdp"!==n)return U.debug("invalid Content-Type"),void e.reply(415);this._processInDialogSdpOffer(e).then((function(desc){t._status!==M.STATUS_TERMINATED&&l.call(t,desc)})).catch((function(e){U.warn(e)}))}else l.call(this,null);function l(desc){var t=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,t),e.reply(200,null,t,desc),"function"==typeof data.callback&&data.callback()}}},{key:"_processInDialogSdpOffer",value:function(e){var t=this;U.debug("_processInDialogSdpOffer()");var n,r=e.parseSDP(),o=!1,c=l(r.media);try{for(c.s();!(n=c.n()).done;){var d=n.value;if(-1!==k.indexOf(d.type)){var h=d.direction||r.direction||"sendrecv";if("sendonly"!==h&&"inactive"!==h){o=!1;break}o=!0}}}catch(e){c.e(e)}finally{c.f()}var f={originator:"remote",type:"offer",sdp:e.body};U.debug('emit "sdp"'),this.emit("sdp",f);var _=new RTCSessionDescription({type:"offer",sdp:f.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(t._status===M.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(_).catch((function(n){throw e.reply(488),U.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n}))})).then((function(){if(t._status===M.STATUS_TERMINATED)throw new Error("terminated");!0===t._remoteHold&&!1===o?(t._remoteHold=!1,t._onunhold("remote")):!1===t._remoteHold&&!0===o&&(t._remoteHold=!0,t._onhold("remote"))})).then((function(){if(t._status===M.STATUS_TERMINATED)throw new Error("terminated");return t._createLocalDescription("answer",t._rtcAnswerConstraints).catch((function(t){throw e.reply(500),U.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',t),t}))})).catch((function(e){U.warn("_processInDialogSdpOffer() failed [error: %o]",e)})),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(e){var t=this;if(U.debug("receiveRefer()"),!e.refer_to)return U.debug("no Refer-To header field present in REFER"),void e.reply(400);if(e.refer_to.uri.scheme!==y.SIP)return U.debug("Refer-To header field points to a non-SIP URI scheme"),void e.reply(416);e.reply(202);var r=new D(this,e.cseq);function l(t){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t="function"==typeof t?t:null,this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_CONFIRMED)return!1;var o=new n(this._ua);if(o.on("progress",(function(e){var t=e.response;r.notify(t.status_code,t.reason_phrase)})),o.on("accepted",(function(e){var t=e.response;r.notify(t.status_code,t.reason_phrase)})),o.on("_failed",(function(e){var t=e.message,n=e.cause;t?r.notify(t.status_code,t.reason_phrase):r.notify(487,n)})),e.refer_to.uri.hasHeader("replaces")){var c=decodeURIComponent(e.refer_to.uri.getHeader("replaces"));l.extraHeaders=E.cloneArray(l.extraHeaders),l.extraHeaders.push("Replaces: ".concat(c))}o.connect(e.refer_to.uri.toAor(),l,t)}function o(){r.notify(603)}U.debug('emit "refer"'),this.emit("refer",{request:e,accept:function(e,n){l.call(t,e,n)},reject:function(){o.call(t)}})}},{key:"_receiveNotify",value:function(e){if(U.debug("receiveNotify()"),e.event||e.reply(400),"refer"===e.event.event){var t,n;if(e.event.params&&e.event.params.id)t=e.event.params.id,n=this._referSubscribers[t];else{if(1!==Object.keys(this._referSubscribers).length)return void e.reply(400,"Missing event id parameter");n=this._referSubscribers[Object.keys(this._referSubscribers)[0]]}if(!n)return void e.reply(481,"Subscription does not exist");n.receiveNotify(e),e.reply(200)}else e.reply(489)}},{key:"_receiveReplaces",value:function(e){var t=this;function r(t){var r=this;if(this._status!==M.STATUS_WAITING_FOR_ACK&&this._status!==M.STATUS_CONFIRMED)return!1;var l=new n(this._ua);l.on("confirmed",(function(){r.terminate()})),l.init_incoming(e,t)}function l(){U.debug("Replaced INVITE rejected by the user"),e.reply(486)}U.debug("receiveReplaces()"),this.emit("replaces",{request:e,accept:function(e){r.call(t,e)},reject:function(){l.call(t)}})}},{key:"_sendInitialRequest",value:function(e,t,n){var r=this,l=new w(this._ua,this._request,{onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},onAuthenticated:function(e){r._request=e},onReceiveResponse:function(e){r._receiveInviteResponse(e)}});Promise.resolve().then((function(){return n||(e.audio||e.video?(r._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e).catch((function(e){if(r._status===M.STATUS_TERMINATED)throw new Error("terminated");throw r._failed("local",null,y.causes.USER_DENIED_MEDIA_ACCESS),U.warn('emit "getusermediafailed" [error:%o]',e),r.emit("getusermediafailed",e),e}))):void 0)})).then((function(e){if(r._status===M.STATUS_TERMINATED)throw new Error("terminated");return r._localMediaStream=e,e&&e.getTracks().forEach((function(track){r._connection.addTrack(track,e)})),r._connecting(r._request),r._createLocalDescription("offer",t).catch((function(e){throw r._failed("local",null,y.causes.WEBRTC_ERROR),e}))})).then((function(desc){if(r._is_canceled||r._status===M.STATUS_TERMINATED)throw new Error("terminated");r._request.body=desc,r._status=M.STATUS_INVITE_SENT,U.debug('emit "sending" [request:%o]',r._request),r.emit("sending",{request:r._request}),l.send()})).catch((function(e){r._status!==M.STATUS_TERMINATED&&U.warn(e)}))}},{key:"_getDTMFRTPSender",value:function(){var e=this._connection.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(e&&e.dtmf)return e.dtmf;U.warn("sendDTMF() | no local audio track to send DTMF with")}},{key:"_receiveInviteResponse",value:function(e){var t=this;if(U.debug("receiveInviteResponse()"),this._dialog&&e.status_code>=200&&e.status_code<=299){if(this._dialog.id.call_id===e.call_id&&this._dialog.id.local_tag===e.from_tag&&this._dialog.id.remote_tag===e.to_tag)return void this.sendRequest(y.ACK);var dialog=new I(this,e,"UAC");return void 0!==dialog.error?void U.debug(dialog.error):(this.sendRequest(y.ACK),void this.sendRequest(y.BYE))}if(this._is_canceled)e.status_code>=100&&e.status_code<200?this._request.cancel(this._cancel_reason):e.status_code>=200&&e.status_code<299&&this._acceptAndTerminate(e);else if(this._status===M.STATUS_INVITE_SENT||this._status===M.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this._status=M.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){U.debug("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this._createDialog(e,"UAC",!0))break;if(this._status=M.STATUS_1XX_RECEIVED,!e.body){this._progress("remote",e);break}var n={originator:"remote",type:"answer",sdp:e.body};U.debug('emit "sdp"'),this.emit("sdp",n);var r=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(r)})).then((function(){return t._progress("remote",e)})).catch((function(e){U.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}));break;case/^2[0-9]{2}$/.test(e.status_code):if(this._status=M.STATUS_CONFIRMED,!e.body){this._acceptAndTerminate(e,400,y.causes.MISSING_SDP),this._failed("remote",e,y.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(e,"UAC"))break;var l={originator:"remote",type:"answer",sdp:e.body};U.debug('emit "sdp"'),this.emit("sdp",l);var o=new RTCSessionDescription({type:"answer",sdp:l.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if("stable"===t._connection.signalingState)return t._connection.createOffer(t._rtcOfferConstraints).then((function(e){return t._connection.setLocalDescription(e)})).catch((function(n){t._acceptAndTerminate(e,500,n.toString()),t._failed("local",e,y.causes.WEBRTC_ERROR)}))})).then((function(){t._connection.setRemoteDescription(o).then((function(){t._handleSessionTimersInIncomingResponse(e),t._accepted("remote",e),t.sendRequest(y.ACK),t._confirmed("local",null)})).catch((function(n){t._acceptAndTerminate(e,488,"Not Acceptable Here"),t._failed("remote",e,y.causes.BAD_MEDIA_DESCRIPTION),U.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n)}))}));break;default:var c=E.sipErrorCause(e.status_code);this._failed("remote",e,c)}}},{key:"_sendReinvite",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U.debug("sendReinvite()");var n=E.cloneArray(t.extraHeaders),r=E.cloneObject(t.eventHandlers),l=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=!1;function c(e){var t=this;if(this._status!==M.STATUS_TERMINATED&&(this.sendRequest(y.ACK),!o))if(this._handleSessionTimersInIncomingResponse(e),e.body)if(e.hasHeader("Content-Type")&&"application/sdp"===e.getHeader("Content-Type").toLowerCase()){var n={originator:"remote",type:"answer",sdp:e.body};U.debug('emit "sdp"'),this.emit("sdp",n);var l=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(l)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){d.call(t),U.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else d.call(this);else d.call(this)}function d(e){r.failed&&r.failed(e)}n.push("Contact: ".concat(this._contact)),n.push("Content-Type: application/sdp"),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",l)})).then((function(t){var r={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};U.debug('emit "sdp"'),e.emit("sdp",r),e.sendRequest(y.INVITE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){c.call(e,t),o=!0},onErrorResponse:function(t){d.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){d()}))}},{key:"_sendUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U.debug("sendUpdate()");var n=E.cloneArray(t.extraHeaders),r=E.cloneObject(t.eventHandlers),l=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=t.sdpOffer||!1,c=!1;function d(e){var t=this;if(this._status!==M.STATUS_TERMINATED&&!c)if(this._handleSessionTimersInIncomingResponse(e),o){if(!e.body)return void h.call(this);if(!e.hasHeader("Content-Type")||"application/sdp"!==e.getHeader("Content-Type").toLowerCase())return void h.call(this);var n={originator:"remote",type:"answer",sdp:e.body};U.debug('emit "sdp"'),this.emit("sdp",n);var l=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(l)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){h.call(t),U.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else r.succeeded&&r.succeeded(e)}function h(e){r.failed&&r.failed(e)}n.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),o?(n.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",l)})).then((function(t){var r={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};U.debug('emit "sdp"'),e.emit("sdp",r),e.sendRequest(y.UPDATE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){d.call(e,t),c=!0},onErrorResponse:function(t){h.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){h.call(e)}))):this.sendRequest(y.UPDATE,{extraHeaders:n,eventHandlers:{onSuccessResponse:function(t){d.call(e,t)},onErrorResponse:function(t){h.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})}},{key:"_acceptAndTerminate",value:function(e,t,n){U.debug("acceptAndTerminate()");var r=[];t&&(n=n||y.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause=".concat(t,'; text="').concat(n,'"'))),(this._dialog||this._createDialog(e,"UAC"))&&(this.sendRequest(y.ACK),this.sendRequest(y.BYE,{extraHeaders:r})),this._status=M.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(e){if(!this._localHold&&!this._remoteHold)return e;if(e=T.parse(e),this._localHold&&!this._remoteHold){U.debug("mangleOffer() | me on hold, mangling offer");var t,n=l(e.media);try{for(n.s();!(t=n.n()).done;){var r=t.value;-1!==k.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="sendonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly")}}catch(e){n.e(e)}finally{n.f()}}else if(this._localHold&&this._remoteHold){U.debug("mangleOffer() | both on hold, mangling offer");var o,c=l(e.media);try{for(c.s();!(o=c.n()).done;){var d=o.value;-1!==k.indexOf(d.type)&&(d.direction="inactive")}}catch(e){c.e(e)}finally{c.f()}}else if(this._remoteHold){U.debug("mangleOffer() | remote on hold, mangling offer");var h,f=l(e.media);try{for(f.s();!(h=f.n()).done;){var _=h.value;-1!==k.indexOf(_.type)&&(_.direction?"sendrecv"===_.direction?_.direction="recvonly":"recvonly"===_.direction&&(_.direction="inactive"):_.direction="recvonly")}}catch(e){f.e(e)}finally{f.f()}}return T.write(e)}},{key:"_setLocalMediaStatus",value:function(){var e=!0,t=!0;(this._localHold||this._remoteHold)&&(e=!1,t=!1),this._audioMuted&&(e=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!e),this._toggleMuteVideo(!t)}},{key:"_handleSessionTimersInIncomingRequest",value:function(e,t){var n;this._sessionTimers.enabled&&(e.session_expires&&e.session_expires>=y.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,n=e.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,n="uas"),t.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(n)),this._sessionTimers.refresher="uas"===n,this._runSessionTimer())}},{key:"_handleSessionTimersInIncomingResponse",value:function(e){var t;this._sessionTimers.enabled&&(e.session_expires&&e.session_expires>=y.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,t=e.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,t="uac"),this._sessionTimers.refresher="uac"===t,this._runSessionTimer())}},{key:"_runSessionTimer",value:function(){var e=this,t=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout((function(){e._status!==M.STATUS_TERMINATED&&e._isReadyToReOffer()&&(U.debug("runSessionTimer() | sending session refresh request"),e._sessionTimers.refreshMethod===y.UPDATE?e._sendUpdate():e._sendReinvite())}),500*t):this._sessionTimers.timer=setTimeout((function(){e._status!==M.STATUS_TERMINATED&&(U.warn("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:y.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))}),1100*t)}},{key:"_toggleMuteAudio",value:function(e){var t,n=this._connection.getSenders().filter((function(e){return e.track&&"audio"===e.track.kind})),r=l(n);try{for(r.s();!(t=r.n()).done;){t.value.track.enabled=!e}}catch(e){r.e(e)}finally{r.f()}}},{key:"_toggleMuteVideo",value:function(e){var t,n=this._connection.getSenders().filter((function(e){return e.track&&"video"===e.track.kind})),r=l(n);try{for(r.s();!(t=r.n()).done;){t.value.track.enabled=!e}}catch(e){r.e(e)}finally{r.f()}}},{key:"_newRTCSession",value:function(e,t){U.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:e,session:this,request:t})}},{key:"_connecting",value:function(e){U.debug("session connecting"),U.debug('emit "connecting"'),this.emit("connecting",{request:e})}},{key:"_progress",value:function(e,t){U.debug("session progress"),U.debug('emit "progress"'),this.emit("progress",{originator:e,response:t||null})}},{key:"_accepted",value:function(e,t){U.debug("session accepted"),this._start_time=new Date,U.debug('emit "accepted"'),this.emit("accepted",{originator:e,response:t||null})}},{key:"_confirmed",value:function(e,t){U.debug("session confirmed"),this._is_confirmed=!0,U.debug('emit "confirmed"'),this.emit("confirmed",{originator:e,ack:t||null})}},{key:"_ended",value:function(e,t,n){U.debug("session ended"),this._end_time=new Date,this._close(),U.debug('emit "ended"'),this.emit("ended",{originator:e,message:t||null,cause:n})}},{key:"_failed",value:function(e,t,n){U.debug("session failed"),U.debug('emit "_failed"'),this.emit("_failed",{originator:e,message:t||null,cause:n}),this._close(),U.debug('emit "failed"'),this.emit("failed",{originator:e,message:t||null,cause:n})}},{key:"_onhold",value:function(e){U.debug("session onhold"),this._setLocalMediaStatus(),U.debug('emit "hold"'),this.emit("hold",{originator:e})}},{key:"_onunhold",value:function(e){U.debug("session onunhold"),this._setLocalMediaStatus(),U.debug('emit "unhold"'),this.emit("unhold",{originator:e})}},{key:"_onmute",value:function(e){var audio=e.audio,video=e.video;U.debug("session onmute"),this._setLocalMediaStatus(),U.debug('emit "muted"'),this.emit("muted",{audio:audio,video:video})}},{key:"_onunmute",value:function(e){var audio=e.audio,video=e.video;U.debug("session onunmute"),this._setLocalMediaStatus(),U.debug('emit "unmuted"'),this.emit("unmuted",{audio:audio,video:video})}},{key:"C",get:function(){return M}},{key:"causes",get:function(){return y.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"status",get:function(){return this._status}}]),n}(v)},327:function(e,t,n){"use strict";var r=n(296),l=n(297),o=n(300),c=new r("Socket");t.isSocket=function(e){if(Array.isArray(e))return!1;if(void 0===e)return c.warn("undefined JsSIP.Socket instance"),!1;try{if(!l.isString(e.url))throw c.warn("missing or invalid JsSIP.Socket url property"),new Error("Missing or invalid JsSIP.Socket url property");if(!l.isString(e.via_transport))throw c.warn("missing or invalid JsSIP.Socket via_transport property"),new Error("Missing or invalid JsSIP.Socket via_transport property");if(-1===o.parse(e.sip_uri,"SIP_URI"))throw c.warn("missing or invalid JsSIP.Socket sip_uri property"),new Error("missing or invalid JsSIP.Socket sip_uri property")}catch(e){return!1}try{["connect","disconnect","send"].forEach((function(t){if(!l.isFunction(e[t]))throw c.warn("missing or invalid JsSIP.Socket method: ".concat(t)),new Error("Missing or invalid JsSIP.Socket method: ".concat(t))}))}catch(e){return!1}return!0}},328:function(e,t,n){const r=n(317),l=n(311);e.exports=class e{static parse(e){return-1!==(e=l.parse(e,"Name_Addr_Header"))?e:void 0}constructor(e,t,n){if(!(e&&e instanceof r))throw new TypeError('missing or invalid "uri" parameter');this._uri=e,this._parameters={},this.display_name=t;for(const param in n)Object.prototype.hasOwnProperty.call(n,param)&&this.setParam(param,n[param])}get uri(){return this._uri}get display_name(){return this._display_name}set display_name(e){this._display_name=0===e?"0":e}setParam(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}getParam(e){if(e)return this._parameters[e.toLowerCase()]}hasParam(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}deleteParam(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){const t=this._parameters[e];return delete this._parameters[e],t}}clearParams(){this._parameters={}}clone(){return new e(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}_quote(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}toString(){let body=this._display_name?`"${this._quote(this._display_name)}" `:"";body+=`<${this._uri.toString()}>`;for(const e in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(body+=`;${e}`,null!==this._parameters[e]&&(body+=`=${this._parameters[e]}`));return body}}},329:function(e,t){const n=500;e.exports={T1:n,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},330:function(e,t,n){const r=n(303),l=n(299),o=n(362),c=n(316),d=new r("RequestSender"),h={onRequestTimeout:()=>{},onTransportError:()=>{},onReceiveResponse:()=>{},onAuthenticated:()=>{}};e.exports=class{constructor(e,t,n){this._ua=e,this._eventHandlers=n,this._method=t.method,this._request=t,this._auth=null,this._challenged=!1,this._staled=!1;for(const e in h)Object.prototype.hasOwnProperty.call(h,e)&&(this._eventHandlers[e]||(this._eventHandlers[e]=h[e]));e.status!==e.C.STATUS_USER_CLOSED||this._method===l.BYE&&this._method===l.ACK||this._eventHandlers.onTransportError()}send(){const e={onRequestTimeout:()=>{this._eventHandlers.onRequestTimeout()},onTransportError:()=>{this._eventHandlers.onTransportError()},onReceiveResponse:e=>{this._receiveResponse(e)}};switch(this._method){case"INVITE":this.clientTransaction=new c.InviteClientTransaction(this._ua,this._ua.transport,this._request,e);break;case"ACK":this.clientTransaction=new c.AckClientTransaction(this._ua,this._ua.transport,this._request,e);break;default:this.clientTransaction=new c.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,e)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}_receiveResponse(e){let t,n;const r=e.status_code;if(401!==r&&407!==r||null===this._ua.configuration.password&&null===this._ua.configuration.ha1)this._eventHandlers.onReceiveResponse(e);else{if(401===e.status_code?(t=e.parseHeader("www-authenticate"),n="authorization"):(t=e.parseHeader("proxy-authenticate"),n="proxy-authorization"),!t)return d.debug(`${e.status_code} with wrong or missing challenge, cannot authenticate`),void this._eventHandlers.onReceiveResponse(e);if(!this._challenged||!this._staled&&!0===t.stale){if(this._auth||(this._auth=new o({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,t))return void this._eventHandlers.onReceiveResponse(e);this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq",`${this._request.cseq} ${this._method}`),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(e)}}}},340:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function c(e,p){return c=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},c(e,p)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var l=_(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var m=n(298).EventEmitter,v=n(296),T=n(295),$=n(343),y=n(326),C=n(353),A=n(354),E=n(310),S=n(355),R=n(297),I=n(304),w=n(305),O=n(356),N=n(302),D=n(357),P=n(358),x=new v("UA"),U={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};function M(data){this.emit("connecting",data)}function k(data){this._status!==U.STATUS_USER_CLOSED&&(this._status=U.STATUS_READY,this._error=null,this.emit("connected",data),this._dynConfiguration.register&&this._registrator.register())}function L(data){for(var e=0,t=["nict","ict","nist","ist"];e<t.length;e++){var n=t[e];for(var r in this._transactions[n])Object.prototype.hasOwnProperty.call(this._transactions[n],r)&&this._transactions[n][r].onTransportError()}this.emit("disconnected",data),this._registrator.onTransportClosed(),this._status!==U.STATUS_USER_CLOSED&&(this._status=U.STATUS_NOT_READY,this._error=U.NETWORK_ERROR)}function H(data){var e=data.transport,t=data.message;if((t=O.parseMessage(t,this))&&!(this._status===U.STATUS_USER_CLOSED&&t instanceof N.IncomingRequest)&&D(t,this,e))if(t instanceof N.IncomingRequest)t.transport=e,this.receiveRequest(t);else if(t instanceof N.IncomingResponse){var n;switch(t.method){case T.INVITE:(n=this._transactions.ict[t.via_branch])&&n.receiveResponse(t);break;case T.ACK:break;default:(n=this._transactions.nict[t.via_branch])&&n.receiveResponse(t)}}}e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,e);var t=d(n);function n(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),x.debug("new() [configuration:%o]",e),(r=t.call(this))._cache={credentials:{}},r._configuration=Object.assign({},P.settings),r._dynConfiguration={},r._dialogs={},r._applicants={},r._sessions={},r._transport=null,r._contact=null,r._status=U.STATUS_INIT,r._error=null,r._transactions={nist:{},nict:{},ist:{},ict:{}},r._data={},r._closeTimer=null,void 0===e)throw new TypeError("Not enough arguments");try{r._loadConfig(e)}catch(e){throw r._status=U.STATUS_NOT_READY,r._error=U.CONFIGURATION_ERROR,e}return r._registrator=new $(f(r)),r}return o(n,null,[{key:"C",get:function(){return U}}]),o(n,[{key:"start",value:function(){x.debug("start()"),this._status===U.STATUS_INIT?this._transport.connect():this._status===U.STATUS_USER_CLOSED?(x.debug("restarting UA"),null!==this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=U.STATUS_INIT,this._transport.connect()):this._status===U.STATUS_READY?x.debug("UA is in READY status, not restarted"):x.debug("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){x.debug("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(e){x.debug("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(e)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(e,t){x.debug("call()");var n=new y(this);return n.connect(e,t),n}},{key:"sendMessage",value:function(e,body,t){x.debug("sendMessage()");var n=new C(this);return n.send(e,body,t),n}},{key:"sendOptions",value:function(e,body,t){x.debug("sendOptions()");var n=new A(this);return n.send(e,body,t),n}},{key:"terminateSessions",value:function(e){for(var t in x.debug("terminateSessions()"),this._sessions)this._sessions[t].isEnded()||this._sessions[t].terminate(e)}},{key:"stop",value:function(){var e=this;if(x.debug("stop()"),this._dynConfiguration={},this._status!==U.STATUS_USER_CLOSED){this._registrator.close();var t=Object.keys(this._sessions).length;for(var n in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,n)){x.debug("closing session ".concat(n));try{this._sessions[n].terminate()}catch(e){}}for(var r in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,r))try{this._applicants[r].close()}catch(e){}this._status=U.STATUS_USER_CLOSED,0===Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length&&0===t?this._transport.disconnect():this._closeTimer=setTimeout((function(){e._closeTimer=null,e._transport.disconnect()}),2e3)}else x.debug("UA already closed")}},{key:"normalizeTarget",value:function(e){return R.normalizeTarget(e,this._configuration.hostport_params)}},{key:"get",value:function(e){switch(e){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:return void x.warn('get() | cannot get "%s" parameter in runtime',e)}}},{key:"set",value:function(e,t){switch(e){case"authorization_user":this._configuration.authorization_user=String(t);break;case"password":this._configuration.password=String(t);break;case"realm":this._configuration.realm=String(t);break;case"ha1":this._configuration.ha1=String(t),this._configuration.password=null;break;case"authorization_jwt":this._configuration.authorization_jwt=String(t);break;case"display_name":this._configuration.display_name=t;break;default:return x.warn('set() | cannot set "%s" parameter in runtime',e),!1}return!0}},{key:"newTransaction",value:function(e){this._transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})}},{key:"destroyTransaction",value:function(e){delete this._transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})}},{key:"newDialog",value:function(dialog){this._dialogs[dialog.id]=dialog}},{key:"destroyDialog",value:function(dialog){delete this._dialogs[dialog.id]}},{key:"newMessage",value:function(e,data){this._applicants[e]=e,this.emit("newMessage",data)}},{key:"newOptions",value:function(e,data){this._applicants[e]=e,this.emit("newOptions",data)}},{key:"destroyMessage",value:function(e){delete this._applicants[e]}},{key:"newRTCSession",value:function(e,data){this._sessions[e.id]=e,this.emit("newRTCSession",data)}},{key:"destroyRTCSession",value:function(e){delete this._sessions[e.id]}},{key:"registered",value:function(data){this.emit("registered",data)}},{key:"unregistered",value:function(data){this.emit("unregistered",data)}},{key:"registrationFailed",value:function(data){this.emit("registrationFailed",data)}},{key:"receiveRequest",value:function(e){var t=e.method;if(e.ruri.user!==this._configuration.uri.user&&e.ruri.user!==this._contact.uri.user)return x.debug("Request-URI does not point to us"),void(e.method!==T.ACK&&e.reply_sl(404));if(e.ruri.scheme!==T.SIPS){if(!E.checkTransaction(this,e)){if(t===T.INVITE?new E.InviteServerTransaction(this,this._transport,e):t!==T.ACK&&t!==T.CANCEL&&new E.NonInviteServerTransaction(this,this._transport,e),t===T.OPTIONS){if(0===this.listeners("newOptions").length)return void e.reply(200);new A(this).init_incoming(e)}else if(t===T.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);new C(this).init_incoming(e)}else if(t===T.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);var dialog,n;if(e.to_tag)(dialog=this._findDialog(e.call_id,e.from_tag,e.to_tag))?dialog.receiveRequest(e):t===T.NOTIFY?(n=this._findSession(e))?n.receiveRequest(e):(x.debug("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist")):t!==T.ACK&&e.reply(481);else switch(t){case T.INVITE:if(window.RTCPeerConnection)if(e.hasHeader("replaces")){var r=e.replaces;(dialog=this._findDialog(r.call_id,r.from_tag,r.to_tag))?(n=dialog.owner).isEnded()?e.reply(603):n.receiveRequest(e):e.reply(481)}else(n=new y(this)).init_incoming(e);else x.warn("INVITE received but WebRTC is not supported"),e.reply(488);break;case T.BYE:e.reply(481);break;case T.CANCEL:(n=this._findSession(e))?n.receiveRequest(e):x.debug("received CANCEL request for a non existent session");break;case T.ACK:break;case T.NOTIFY:this.emit("sipEvent",{event:e.event,request:e}),e.reply(200);break;default:e.reply(405)}}}else e.reply_sl(416)}},{key:"_findSession",value:function(e){var t=e.call_id,n=e.from_tag,r=e.to_tag,l=t+n,o=this._sessions[l],c=t+r,d=this._sessions[c];return o||(d||null)}},{key:"_findDialog",value:function(e,t,n){var r=e+t+n,dialog=this._dialogs[r];return dialog||(r=e+n+t,(dialog=this._dialogs[r])||null)}},{key:"_loadConfig",value:function(e){try{P.load(this._configuration,e)}catch(e){throw e}0===this._configuration.display_name&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=R.newUUID()),this._configuration.jssip_id=R.createRandomToken(5);var t=this._configuration.uri.clone();t.user=null,this._configuration.hostport_params=t.toString().replace(/^sip:/i,"");try{this._transport=new S(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=M.bind(this),this._transport.onconnect=k.bind(this),this._transport.ondisconnect=L.bind(this),this._transport.ondata=H.bind(this)}catch(e){throw x.warn(e),new I.ConfigurationError("sockets",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){var n=this._configuration.uri.clone();n.user=null,n.clearParams(),n.clearHeaders(),this._configuration.registrar_server=n}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new w("sip",R.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.anonymous||null,n=e.outbound||null,r="<";return r+=t?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!n||(t?this.temp_gruu:this.pub_gruu)||(r+=";ob"),r+=">"}};var r=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register"];for(var l in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,l)&&(-1!==r.indexOf(l)?Object.defineProperty(this._configuration,l,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,l,{writable:!1,configurable:!1}));for(var o in x.debug("configuration parameters after validation:"),this._configuration)if(Object.prototype.hasOwnProperty.call(P.settings,o))switch(o){case"uri":case"registrar_server":x.debug("- ".concat(o,": ").concat(this._configuration[o]));break;case"password":case"ha1":case"authorization_jwt":x.debug("- ".concat(o,": NOT SHOWN"));break;default:x.debug("- ".concat(o,": ").concat(JSON.stringify(this._configuration[o])))}}},{key:"C",get:function(){return U}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}}]),n}(m)},341:function(e,t,n){e.exports=function(e){function t(e){let n,l,o,c=null;function d(...e){if(!d.enabled)return;const r=d,l=Number(new Date),o=l-(n||l);r.diff=o,r.prev=n,r.curr=l,n=l,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let c=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,l)=>{if("%%"===n)return"%";c++;const o=t.formatters[l];if("function"==typeof o){const t=e[c];n=o.call(r,t),e.splice(c,1),c--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return d.namespace=e,d.useColors=t.useColors(),d.color=t.selectColor(e),d.extend=r,d.destroy=t.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==c?c:(l!==t.namespaces&&(l=t.namespaces,o=t.enabled(e)),o),set:e=>{c=e}}),"function"==typeof t.init&&t.init(d),d}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function l(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(l),...t.skips.map(l).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let i;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let i,n;for(i=0,n=t.skips.length;i<n;i++)if(t.skips[i].test(e))return!1;for(i=0,n=t.names.length;i<n;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=n(342),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},342:function(e,t){var s=1e3,n=60*s,r=60*n,l=24*r,o=7*l,c=365.25*l;function d(e,t,n,r){var l=t>=1.5*n;return Math.round(e/n)+" "+r+(l?"s":"")}e.exports=function(e,t){t=t||{};var h=typeof e;if("string"===h&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var d=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return d*c;case"weeks":case"week":case"w":return d*o;case"days":case"day":case"d":return d*l;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*n;case"seconds":case"second":case"secs":case"sec":case"s":return d*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}(e);if("number"===h&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=l)return d(e,t,l,"day");if(t>=r)return d(e,t,r,"hour");if(t>=n)return d(e,t,n,"minute");if(t>=s)return d(e,t,s,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=l)return Math.round(e/l)+"d";if(t>=r)return Math.round(e/r)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=s)return Math.round(e/s)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},343:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=n(296),o=n(297),c=n(295),d=n(302),h=n(309),f=new l("Registrator");e.exports=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._reg_id=1,this._ua=t,this._transport=n,this._registrar=t.configuration.registrar_server,this._expires=t.configuration.register_expires,this._call_id=o.createRandomToken(22),this._cseq=0,this._to_uri=t.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._sipInstance='"<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"'),this._contact+=";reg-id=".concat(this._reg_id),this._contact+=";+sip.instance=".concat(this._sipInstance)}var t,n,l;return t=e,n=[{key:"setExtraHeaders",value:function(e){Array.isArray(e)||(e=[]),this._extraHeaders=e.slice()}},{key:"setExtraContactParams",value:function(e){for(var t in e instanceof Object||(e={}),this._extraContactParams="",e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];this._extraContactParams+=";".concat(t),n&&(this._extraContactParams+="=".concat(n))}}},{key:"register",value:function(){var e=this;if(this._registering)f.debug("Register request in progress...");else{var t=this._extraHeaders.slice();t.push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),t.push("Expires: ".concat(this._expires));var n=new d.OutgoingRequest(c.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},t),r=new h(this._ua,n,{onRequestTimeout:function(){e._registrationFailure(null,c.causes.REQUEST_TIMEOUT)},onTransportError:function(){e._registrationFailure(null,c.causes.CONNECTION_ERROR)},onAuthenticated:function(){e._cseq+=1},onReceiveResponse:function(t){if(t.cseq===e._cseq)switch(null!==e._registrationTimer&&(clearTimeout(e._registrationTimer),e._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):if(e._registering=!1,!t.hasHeader("Contact")){f.debug("no Contact header in response to REGISTER, response ignored");break}var n=t.headers.Contact.reduce((function(a,b){return a.concat(b.parsed)}),[]),r=n.find((function(element){return e._sipInstance===element.getParam("+sip.instance")&&e._reg_id===parseInt(element.getParam("reg-id"))}));if(r||(r=n.find((function(element){return element.uri.user===e._ua.contact.uri.user}))),!r){f.debug("no Contact header pointing to us, response ignored");break}var l=r.getParam("expires");!l&&t.hasHeader("expires")&&(l=t.getHeader("expires")),l||(l=e._expires),(l=Number(l))<10&&(l=10);var d=l>64?1e3*l/2+Math.floor(1e3*(l/2-32)*Math.random()):1e3*l-5e3;e._registrationTimer=setTimeout((function(){e._registrationTimer=null,0===e._ua.listeners("registrationExpiring").length?e.register():e._ua.emit("registrationExpiring")}),d),r.hasParam("temp-gruu")&&(e._ua.contact.temp_gruu=r.getParam("temp-gruu").replace(/"/g,"")),r.hasParam("pub-gruu")&&(e._ua.contact.pub_gruu=r.getParam("pub-gruu").replace(/"/g,"")),e._registered||(e._registered=!0,e._ua.registered({response:t}));break;case/^423$/.test(t.status_code):t.hasHeader("min-expires")?(e._expires=Number(t.getHeader("min-expires")),e._expires<10&&(e._expires=10),e.register()):(f.debug("423 response received for REGISTER without Min-Expires"),e._registrationFailure(t,c.causes.SIP_FAILURE_CODE));break;default:var h=o.sipErrorCause(t.status_code);e._registrationFailure(t,h)}}});this._registering=!0,r.send()}}},{key:"unregister",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._registered){this._registered=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);var n=this._extraHeaders.slice();t.all?n.push("Contact: *".concat(this._extraContactParams)):n.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),n.push("Expires: 0");var r=new d.OutgoingRequest(c.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},n),l=new h(this._ua,r,{onRequestTimeout:function(){e._unregistered(null,c.causes.REQUEST_TIMEOUT)},onTransportError:function(){e._unregistered(null,c.causes.CONNECTION_ERROR)},onAuthenticated:function(){e._cseq+=1},onReceiveResponse:function(t){switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):e._unregistered(t);break;default:var n=o.sipErrorCause(t.status_code);e._unregistered(t,n)}}});l.send()}else f.debug("already unregistered")}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(e,t){this._registering=!1,this._ua.registrationFailed({response:e||null,cause:t}),this._registered&&(this._registered=!1,this._ua.unregistered({response:e||null,cause:t}))}},{key:"_unregistered",value:function(e,t){this._registering=!1,this._registered=!1,this._ua.unregistered({response:e||null,cause:t||null})}},{key:"registered",get:function(){return this._registered}}],n&&r(t.prototype,n),l&&r(t,l),e}()},344:function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},l=function(e,t,content){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var l=e.push?{}:n?t[e.name]:t;!function(e,t,n,l){if(l&&!n)t[l]=r(e[1]);else for(var i=0;i<n.length;i+=1)null!=e[i+1]&&(t[n[i]]=r(e[i+1]))}(content.match(e.reg),l,e.names,e.name),e.push&&t[e.push].push(l)},o=n(324),c=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(c).forEach((function(e){var t=e[0],content=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var c=0;c<(o[t]||[]).length;c+=1){var d=o[t][c];if(d.reg.test(content))return l(d,r,content)}})),t.media=n,t};var d=function(e,t){var s=t.split(/=(.+)/,2);return 2===s.length?e[s[0]]=r(s[1]):1===s.length&&t.length>1&&(e[s[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(d,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(d,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},345:function(e,t,n){var r=n(324),l=/%[sdv%]/g,o=function(e){var i=1,t=arguments,n=t.length;return e.replace(l,(function(e){if(i>=n)return e;var r=t[i];switch(i+=1,e){case"%%":return"%";case"%s":return String(r);case"%d":return Number(r);case"%v":return""}}))},c=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var l=t.names[i];t.name?r.push(n[t.name][l]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},d=["v","o","s","i","u","e","p","c","b","t","r","z","a"],h=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||d,l=t.innerOrder||h,o=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(c(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(c(t,n,e))}))}))})),e.media.forEach((function(e){o.push(c("m",r.m[0],e)),l.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(c(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(c(t,n,e))}))}))}))})),o.join("\r\n")+"\r\n"}},346:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=n(296),o=n(297),c=new l("DigestAuthentication");e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._credentials=t,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}var t,n,l;return t=e,n=[{key:"get",value:function(e){switch(e){case"realm":return this._realm;case"ha1":return this._ha1;default:return void c.warn('get() | cannot get "%s" parameter',e)}}},{key:"authenticate",value:function(e,t){var n=e.method,r=e.ruri,body=e.body,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._algorithm=t.algorithm,this._realm=t.realm,this._nonce=t.nonce,this._opaque=t.opaque,this._stale=t.stale,this._algorithm){if("MD5"!==this._algorithm)return c.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return c.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return c.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return c.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return c.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(t.qop)if(t.qop.indexOf("auth-int")>-1)this._qop="auth-int";else{if(!(t.qop.indexOf("auth")>-1))return c.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this._qop="auth"}else this._qop=null;this._method=n,this._uri=r,this._cnonce=l||o.createRandomToken(12),this._nc+=1;var d,h,f=Number(this._nc).toString(16);return this._ncHex="00000000".substr(0,8-f.length)+f,4294967296===this._nc&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=o.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1,"auth"===this._qop?(d="".concat(this._method,":").concat(this._uri),h=o.calculateMD5(d),c.debug('authenticate() | using qop=auth [a2:"%s"]',d),this._response=o.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(h))):"auth-int"===this._qop?(d="".concat(this._method,":").concat(this._uri,":").concat(o.calculateMD5(body||"")),h=o.calculateMD5(d),c.debug('authenticate() | using qop=auth-int [a2:"%s"]',d),this._response=o.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(h))):null===this._qop&&(d="".concat(this._method,":").concat(this._uri),h=o.calculateMD5(d),c.debug('authenticate() | using qop=null [a2:"%s"]',d),this._response=o.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(h))),c.debug("authenticate() | response generated"),!0}},{key:"toString",value:function(){var e=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm=".concat(this._algorithm)),e.push('username="'.concat(this._credentials.username,'"')),e.push('realm="'.concat(this._realm,'"')),e.push('nonce="'.concat(this._nonce,'"')),e.push('uri="'.concat(this._uri,'"')),e.push('response="'.concat(this._response,'"')),this._opaque&&e.push('opaque="'.concat(this._opaque,'"')),this._qop&&(e.push("qop=".concat(this._qop)),e.push('cnonce="'.concat(this._cnonce,'"')),e.push("nc=".concat(this._ncHex))),"Digest ".concat(e.join(", "))}}],n&&r(t.prototype,n),l&&r(t,l),e}()},347:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var c=n(296),d=n(302),h=n(295),f=n(310),_=n(348),m=n(297),v=new c("Dialog"),T={STATUS_EARLY:1,STATUS_CONFIRMED:2};e.exports=function(){function e(t,n,l){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T.STATUS_CONFIRMED;if(r(this,e),this._owner=t,this._ua=t._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};n instanceof d.IncomingResponse&&(o=n.status_code<200?T.STATUS_EARLY:T.STATUS_CONFIRMED);var c=n.parseHeader("contact");"UAS"===l?(this._id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._remote_seqnum=n.cseq,this._local_uri=n.parseHeader("to").uri,this._remote_uri=n.parseHeader("from").uri,this._remote_target=c.uri,this._route_set=n.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):"UAC"===l&&(this._id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._local_seqnum=n.cseq,this._local_uri=n.parseHeader("from").uri,this._remote_uri=n.parseHeader("to").uri,this._remote_target=c.uri,this._route_set=n.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),v.debug("new ".concat(l," dialog created with status ").concat(this._state===T.STATUS_EARLY?"EARLY":"CONFIRMED"))}return o(e,null,[{key:"C",get:function(){return T}}]),o(e,[{key:"update",value:function(e,t){this._state=T.STATUS_CONFIRMED,v.debug("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),"UAC"===t&&(this._route_set=e.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){v.debug("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this)}},{key:"sendRequest",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=m.cloneArray(n.extraHeaders),l=m.cloneObject(n.eventHandlers),body=n.body||null,o=this._createRequest(e,r,body);l.onAuthenticated=function(){t._local_seqnum+=1};var c=new _(this,o,l);return c.send(),o}},{key:"receiveRequest",value:function(e){this._checkInDialogRequest(e)&&(e.method===h.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:e.method===h.INVITE&&(this._ack_seqnum=e.cseq),this._owner.receiveRequest(e))}},{key:"_createRequest",value:function(e,t,body){t=m.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));var n=e===h.CANCEL||e===h.ACK?this._local_seqnum:this._local_seqnum+=1;return new d.OutgoingRequest(e,this._remote_target,this._ua,{cseq:n,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,body)}},{key:"_checkInDialogRequest",value:function(e){var t=this;if(this._remote_seqnum)if(e.cseq<this._remote_seqnum){if(e.method!==h.ACK)return e.reply(500),!1;if(null===this._ack_seqnum||e.cseq!==this._ack_seqnum)return!1}else e.cseq>this._remote_seqnum&&(this._remote_seqnum=e.cseq);else this._remote_seqnum=e.cseq;if(e.method===h.INVITE||e.method===h.UPDATE&&e.body){if(!0===this._uac_pending_reply)e.reply(491);else{if(!0===this._uas_pending_reply){var n=1+(10*Math.random()|0);return e.reply(500,null,["Retry-After:".concat(n)]),!1}this._uas_pending_reply=!0;e.server_transaction.on("stateChanged",(function n(){e.server_transaction.state!==f.C.STATUS_ACCEPTED&&e.server_transaction.state!==f.C.STATUS_COMPLETED&&e.server_transaction.state!==f.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",n),t._uas_pending_reply=!1)}))}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===f.C.STATUS_ACCEPTED&&(t._remote_target=e.parseHeader("contact").uri)}))}else e.method===h.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===f.C.STATUS_COMPLETED&&(t._remote_target=e.parseHeader("contact").uri)}));return!0}},{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(e){this._local_seqnum=e}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(e){this._uac_pending_reply=e}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}}]),e}()},348:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=n(295),o=n(310),c=n(326),d=n(309),h={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}};e.exports=function(){function e(dialog,t,n){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dialog=dialog,this._ua=dialog._ua,this._request=t,this._eventHandlers=n,this._reattempt=!1,this._reattemptTimer=null,h)Object.prototype.hasOwnProperty.call(h,r)&&(this._eventHandlers[r]||(this._eventHandlers[r]=h[r]))}var t,n,f;return t=e,(n=[{key:"send",value:function(){var e=this,t=new d(this._ua,this._request,{onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onAuthenticated:function(t){e._eventHandlers.onAuthenticated(t)},onReceiveResponse:function(t){e._receiveResponse(t)}});t.send(),(this._request.method===l.INVITE||this._request.method===l.UPDATE&&this._request.body)&&t.clientTransaction.state!==o.C.STATUS_TERMINATED&&(this._dialog.uac_pending_reply=!0,t.clientTransaction.on("stateChanged",(function n(){t.clientTransaction.state!==o.C.STATUS_ACCEPTED&&t.clientTransaction.state!==o.C.STATUS_COMPLETED&&t.clientTransaction.state!==o.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e._dialog.uac_pending_reply=!1)})))}},{key:"_receiveResponse",value:function(e){var t=this;408===e.status_code||481===e.status_code?this._eventHandlers.onDialogError(e):e.method===l.INVITE&&491===e.status_code?this._reattempt?e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout((function(){t._dialog.owner.status!==c.C.STATUS_TERMINATED&&(t._reattempt=!0,t._request_sender.send())}),1e3)):e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e)}},{key:"request",get:function(){return this._request}}])&&r(t.prototype,n),f&&r(t,f),e}()},349:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,p){return o=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},o(e,p)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var l=h(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var f=n(298).EventEmitter,_=n(296),m=n(295),v=n(304),T=n(297),$=new _("RTCSession:DTMF"),y={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,r,d=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this))._session=e,t._direction=null,t._tone=null,t._duration=null,t._request=null,t}return t=h,n=[{key:"send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new v.InvalidStateError(this._session.status);var r=T.cloneArray(n.extraHeaders);if(this.eventHandlers=T.cloneObject(n.eventHandlers),"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: ".concat(e));e=e.toString()}if(!e.match(/^[0-9A-DR#*]$/))throw new TypeError("Invalid tone: ".concat(e));this._tone=e,this._duration=n.duration,r.push("Content-Type: application/dtmf-relay");var body="Signal=".concat(this._tone,"\r\n");body+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(m.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){t.eventHandlers.onFailed&&t.eventHandlers.onFailed(),t.emit("failed",{originator:"remote",response:e})},onRequestTimeout:function(){t._session.onRequestTimeout()},onTransportError:function(){t._session.onTransportError()},onDialogError:function(){t._session.onDialogError()}},body:body})}},{key:"init_incoming",value:function(e){var t=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,n=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=e,e.reply(200),e.body){var body=e.body.split("\n");body.length>=1&&t.test(body[0])&&(this._tone=body[0].replace(t,"$2")),body.length>=2&&n.test(body[1])&&(this._duration=parseInt(body[1].replace(n,"$2"),10))}this._duration||(this._duration=y.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:e}):$.debug("invalid INFO DTMF received, discarded")}},{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}}],n&&l(t.prototype,n),r&&l(t,r),h}(f),e.exports.C=y},350:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,p){return o=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},o(e,p)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var l=h(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var f=n(298).EventEmitter,_=n(295),m=n(304),v=n(297);e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,r,d=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this))._session=e,t._direction=null,t._contentType=null,t._body=null,t}return t=h,n=[{key:"send",value:function(e,body){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._direction="outgoing",void 0===e)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new m.InvalidStateError(this._session.status);this._contentType=e,this._body=body;var r=v.cloneArray(n.extraHeaders);r.push("Content-Type: ".concat(e)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(_.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){t.emit("failed",{originator:"remote",response:e})},onTransportError:function(){t._session.onTransportError()},onRequestTimeout:function(){t._session.onRequestTimeout()},onDialogError:function(){t._session.onDialogError()}},body:body})}},{key:"init_incoming",value:function(e){this._direction="incoming",this.request=e,e.reply(200),this._contentType=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,this._body=e.body,this._session.newInfo({originator:"remote",info:this,request:e})}},{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}}],n&&l(t.prototype,n),r&&l(t,r),h}(f)},351:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=n(296),o=n(295),c=new l("RTCSession:ReferNotifier"),d="refer",h="message/sipfrag;version=2.0",f=300;e.exports=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._session=t,this._id=n,this._expires=r||f,this._active=!0,this.notify(100)}var t,n,l;return t=e,(n=[{key:"notify",value:function(code,e){var t;c.debug("notify()"),!1!==this._active&&(e=e||o.REASON_PHRASE[code]||"",t=code>=200?"terminated;reason=noresource":"active;expires=".concat(this._expires),this._session.sendRequest(o.NOTIFY,{extraHeaders:["Event: ".concat(d,";id=").concat(this._id),"Subscription-State: ".concat(t),"Content-Type: ".concat(h)],body:"SIP/2.0 ".concat(code," ").concat(e),eventHandlers:{onErrorResponse:function(){this._active=!1}}}))}}])&&r(t.prototype,n),l&&r(t,l),e}()},352:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,p){return o=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},o(e,p)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var l=h(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var f=n(298).EventEmitter,_=n(296),m=n(295),v=n(300),T=n(297),$=new _("RTCSession:ReferSubscriber");e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,r,d=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this))._id=null,t._session=e,t}return t=h,n=[{key:"sendRefer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$.debug("sendRefer()");var r=T.cloneArray(n.extraHeaders),l=T.cloneObject(n.eventHandlers);for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&this.on(o,l[o]);var c=null;n.replaces&&(c=n.replaces._request.call_id,c+=";to-tag=".concat(n.replaces._to_tag),c+=";from-tag=".concat(n.replaces._from_tag),c=encodeURIComponent(c));var d="Refer-To: <".concat(e).concat(c?"?Replaces=".concat(c):"",">");if(r.push(d),!r.some((function(header){return header.toLowerCase().startsWith("referred-by:")}))){var h="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">");r.push(h)}r.push("Contact: ".concat(this._session.contact));var f=this._session.sendRequest(m.REFER,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t._requestSucceeded(e)},onErrorResponse:function(e){t._requestFailed(e,m.causes.REJECTED)},onTransportError:function(){t._requestFailed(null,m.causes.CONNECTION_ERROR)},onRequestTimeout:function(){t._requestFailed(null,m.causes.REQUEST_TIMEOUT)},onDialogError:function(){t._requestFailed(null,m.causes.DIALOG_ERROR)}}});this._id=f.cseq}},{key:"receiveNotify",value:function(e){if($.debug("receiveNotify()"),e.body){var t=v.parse(e.body.trim(),"Status_Line");if(-1!==t)switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",{request:e,status_line:t});break;default:this.emit("failed",{request:e,status_line:t})}else $.debug('receiveNotify() | error parsing NOTIFY body: "'.concat(e.body,'"'))}}},{key:"_requestSucceeded",value:function(e){$.debug("REFER succeeded"),$.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:e})}},{key:"_requestFailed",value:function(e,t){$.debug("REFER failed"),$.debug('emit "requestFailed"'),this.emit("requestFailed",{response:e||null,cause:t})}},{key:"id",get:function(){return this._id}}],n&&l(t.prototype,n),r&&l(t,r),h}(f)},353:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,p){return o=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},o(e,p)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var l=h(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var f=n(298).EventEmitter,_=n(296),m=n(295),v=n(302),T=n(297),$=n(309),y=n(304),C=n(305),A=new _("Message");e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,r,d=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this))._ua=e,t._request=null,t._closed=!1,t._direction=null,t._local_identity=null,t._remote_identity=null,t._is_replied=!1,t._data={},t}return t=h,n=[{key:"send",value:function(e,body){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e;if(void 0===e||void 0===body)throw new TypeError("Not enough arguments");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(r));var l=T.cloneArray(n.extraHeaders),o=T.cloneObject(n.eventHandlers),c=n.contentType||"text/plain",d={};for(var h in n.fromUserName&&(d.from_uri=new C("sip",n.fromUserName,this._ua.configuration.uri.host),l.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),n.fromDisplayName&&(d.from_display_name=n.fromDisplayName),o)Object.prototype.hasOwnProperty.call(o,h)&&this.on(h,o[h]);l.push("Content-Type: ".concat(c)),this._request=new v.OutgoingRequest(m.MESSAGE,e,this._ua,d,l),body&&(this._request.body=body);var f=new $(this._ua,this._request,{onRequestTimeout:function(){t._onRequestTimeout()},onTransportError:function(){t._onTransportError()},onReceiveResponse:function(e){t._receiveResponse(e)}});this._newMessage("local",this._request),f.send()}},{key:"init_incoming",value:function(e){this._request=e,this._newMessage("remote",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:"accept",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=T.cloneArray(e.extraHeaders),body=e.body;if("incoming"!==this._direction)throw new y.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,t,body)}},{key:"reject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status_code||480,n=e.reason_phrase,r=T.cloneArray(e.extraHeaders),body=e.body;if("incoming"!==this._direction)throw new y.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(t<300||t>=700)throw new TypeError("Invalid status_code: ".concat(t));this._is_replied=!0,this._request.reply(t,n,r,body)}},{key:"_receiveResponse",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded("remote",e);break;default:var t=T.sipErrorCause(e.status_code);this._failed("remote",e,t)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,m.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,m.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(e,t){"remote"===e?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):"local"===e&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newMessage(this,{originator:e,message:this,request:t})}},{key:"_failed",value:function(e,t,n){A.debug("MESSAGE failed"),this._close(),A.debug('emit "failed"'),this.emit("failed",{originator:e,response:t||null,cause:n})}},{key:"_succeeded",value:function(e,t){A.debug("MESSAGE succeeded"),this._close(),A.debug('emit "succeeded"'),this.emit("succeeded",{originator:e,response:t})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}],n&&l(t.prototype,n),r&&l(t,r),h}(f)},354:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,p){return o=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},o(e,p)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var l=h(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var f=n(298).EventEmitter,_=n(296),m=n(295),v=n(302),T=n(297),$=n(309),y=n(304),C=new _("Options");e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,r,d=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this))._ua=e,t._request=null,t._closed=!1,t._direction=null,t._local_identity=null,t._remote_identity=null,t._is_replied=!1,t._data={},t}return t=h,n=[{key:"send",value:function(e,body){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e;if(void 0===e)throw new TypeError("A target is required for OPTIONS");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(r));var l=T.cloneArray(n.extraHeaders),o=T.cloneObject(n.eventHandlers),c=n.contentType||"application/sdp";for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&this.on(d,o[d]);l.push("Content-Type: ".concat(c)),this._request=new v.OutgoingRequest(m.OPTIONS,e,this._ua,null,l),body&&(this._request.body=body);var h=new $(this._ua,this._request,{onRequestTimeout:function(){t._onRequestTimeout()},onTransportError:function(){t._onTransportError()},onReceiveResponse:function(e){t._receiveResponse(e)}});this._newOptions("local",this._request),h.send()}},{key:"init_incoming",value:function(e){this._request=e,this._newOptions("remote",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:"accept",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=T.cloneArray(e.extraHeaders),body=e.body;if("incoming"!==this._direction)throw new y.NotSupportedError('"accept" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");this._is_replied=!0,this._request.reply(200,null,t,body)}},{key:"reject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status_code||480,n=e.reason_phrase,r=T.cloneArray(e.extraHeaders),body=e.body;if("incoming"!==this._direction)throw new y.NotSupportedError('"reject" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");if(t<300||t>=700)throw new TypeError("Invalid status_code: ".concat(t));this._is_replied=!0,this._request.reply(t,n,r,body)}},{key:"_receiveResponse",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded("remote",e);break;default:var t=T.sipErrorCause(e.status_code);this._failed("remote",e,t)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,m.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,m.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newOptions",value:function(e,t){"remote"===e?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):"local"===e&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newOptions(this,{originator:e,message:this,request:t})}},{key:"_failed",value:function(e,t,n){C.debug("OPTIONS failed"),this._close(),C.debug('emit "failed"'),this.emit("failed",{originator:e,response:t||null,cause:n})}},{key:"_succeeded",value:function(e,t){C.debug("OPTIONS succeeded"),this._close(),C.debug('emit "succeeded"'),this.emit("succeeded",{originator:e,response:t})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}],n&&l(t.prototype,n),r&&l(t,r),h}(f)},355:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=n(296),c=n(327),d=n(295),h=new o("Transport"),f={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:d.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:d.CONNECTION_RECOVERY_MAX_INTERVAL}};e.exports=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.recovery_options;r(this,e),h.debug("new()"),this.status=f.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=n,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(e){h.warn("cannot use TextDecoder: ".concat(e))}if(void 0===t)throw new TypeError("Invalid argument. undefined 'sockets' argument");t instanceof Array||(t=[t]),t.forEach((function(e){if(!c.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:f.SOCKET_STATUS_READY})}),this),this._getSocket()}var t,n,o;return t=e,(n=[{key:"connect",value:function(){h.debug("connect()"),this.isConnected()?h.debug("Transport is already connected"):this.isConnecting()?h.debug("Transport is connecting"):(this.close_requested=!1,this.status=f.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect()))}},{key:"disconnect",value:function(){h.debug("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=f.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(data){if(h.debug("send()"),!this.isConnected())return h.warn("unable to send message, transport is not connected"),!1;var e=data.toString();return h.debug("sending message:\n\n".concat(e,"\n")),this.socket.send(e)}},{key:"isConnected",value:function(){return this.status===f.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===f.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var e=this;this.recover_attempts+=1;var t=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);t<this.recovery_options.min_interval?t=this.recovery_options.min_interval:t>this.recovery_options.max_interval&&(t=this.recovery_options.max_interval),h.debug("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(t," seconds")),this.recovery_timer=setTimeout((function(){e.close_requested||e.isConnected()||e.isConnecting()||(e._getSocket(),e.connect())}),1e3*t)}},{key:"_getSocket",value:function(){var e=[];if(this.sockets.forEach((function(t){t.status!==f.SOCKET_STATUS_ERROR&&(0===e.length?e.push(t):t.weight>e[0].weight?e=[t]:t.weight===e[0].weight&&e.push(t))})),0===e.length)return this.sockets.forEach((function(e){e.status=f.SOCKET_STATUS_READY})),void this._getSocket();var t=Math.floor(Math.random()*e.length);this.socket=e[t].socket}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=f.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(e,code,t){this.status=f.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:code,reason:t}),this.close_requested||(this.sockets.forEach((function(e){this.socket===e.socket&&(e.status=f.SOCKET_STATUS_ERROR)}),this),this._reconnect(e))}},{key:"_onData",value:function(data){if("\r\n"!==data){if("string"!=typeof data){try{data=this.textDecoder?this.textDecoder.decode(data):String.fromCharCode.apply(null,new Uint8Array(data))}catch(e){return void h.debug("received binary message failed to be converted into string, message discarded")}h.debug("received binary message:\n\n".concat(data,"\n"))}else h.debug("received text message:\n\n".concat(data,"\n"));this.ondata({transport:this,message:data})}else h.debug("received message with CRLF Keep Alive response")}},{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}}])&&l(t.prototype,n),o&&l(t,o),e}()},356:function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var o=n(296),c=n(300),d=n(302),h=new o("Parser");function f(data,e){var t=e,n=0,r=0;if(data.substring(t,t+2).match(/(^\r\n)/))return-2;for(;0===n;){if(-1===(r=data.indexOf("\r\n",t)))return r;!data.substring(r+2,r+4).match(/(^\r\n)/)&&data.charAt(r+2).match(/(^\s+)/)?t=r+2:n=r}return n}function _(e,data,t,n){var l,o=data.indexOf(":",t),h=data.substring(t,o).trim(),f=data.substring(o+1,n).trim();switch(h.toLowerCase()){case"via":case"v":e.addHeader("via",f),1===e.getHeaders("via").length?(l=e.parseHeader("Via"))&&(e.via=l,e.via_branch=l.branch):l=0;break;case"from":case"f":e.setHeader("from",f),(l=e.parseHeader("from"))&&(e.from=l,e.from_tag=l.getParam("tag"));break;case"to":case"t":e.setHeader("to",f),(l=e.parseHeader("to"))&&(e.to=l,e.to_tag=l.getParam("tag"));break;case"record-route":if(-1===(l=c.parse(f,"Record_Route")))l=void 0;else{var _,m=r(l);try{for(m.s();!(_=m.n()).done;){var header=_.value;e.addHeader("record-route",f.substring(header.possition,header.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=header.parsed}}catch(e){m.e(e)}finally{m.f()}}break;case"call-id":case"i":e.setHeader("call-id",f),(l=e.parseHeader("call-id"))&&(e.call_id=f);break;case"contact":case"m":if(-1===(l=c.parse(f,"Contact")))l=void 0;else{var v,T=r(l);try{for(T.s();!(v=T.n()).done;){var $=v.value;e.addHeader("contact",f.substring($.possition,$.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=$.parsed}}catch(e){T.e(e)}finally{T.f()}}break;case"content-length":case"l":e.setHeader("content-length",f),l=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",f),l=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",f),(l=e.parseHeader("cseq"))&&(e.cseq=l.value),e instanceof d.IncomingResponse&&(e.method=l.method);break;case"max-forwards":e.setHeader("max-forwards",f),l=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",f),l=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",f),l=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",f),(l=e.parseHeader("session-expires"))&&(e.session_expires=l.expires,e.session_expires_refresher=l.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",f),(l=e.parseHeader("refer-to"))&&(e.refer_to=l);break;case"replaces":e.setHeader("replaces",f),(l=e.parseHeader("replaces"))&&(e.replaces=l);break;case"event":case"o":e.setHeader("event",f),(l=e.parseHeader("event"))&&(e.event=l);break;default:e.addHeader(h,f),l=0}return void 0!==l||{error:'error parsing header "'.concat(h,'"')}}t.parseMessage=function(data,e){var t,n,r=data.indexOf("\r\n");if(-1!==r){var l=data.substring(0,r),o=c.parse(l,"Request_Response");if(-1!==o){o.status_code?((t=new d.IncomingResponse).status_code=o.status_code,t.reason_phrase=o.reason_phrase):((t=new d.IncomingRequest(e)).method=o.method,t.ruri=o.uri),t.data=data;for(var m=r+2;;){if(-2===(r=f(data,m))){n=m+2;break}if(-1===r)return void h.warn("parseMessage() | malformed message");if(!0!==(o=_(t,data,m,r)))return void h.warn("parseMessage() |",o.error);m=r+2}if(t.hasHeader("content-length")){var v=t.getHeader("content-length");t.body=data.substr(n,v)}else t.body=data.substring(n);return t}h.warn('parseMessage() | error parsing first line of SIP message: "'.concat(l,'"'))}else h.warn("parseMessage() | no CRLF found, not a SIP message")}},357:function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var o,c,d,h=n(296),f=n(295),_=n(302),m=n(297),v=new h("sanityCheck"),T=[function(){for(var e=0,t=["from","to","call_id","cseq","via"];e<t.length;e++){var header=t[e];if(!o.hasHeader(header))return v.debug("missing mandatory header field : ".concat(header,", dropping the response")),!1}}],$=[function(){if("sip"!==o.s("to").uri.scheme)return C(416),!1},function(){if(!o.to_tag&&o.call_id.substr(0,5)===c.configuration.jssip_id)return C(482),!1},function(){var e=m.str_utf8_length(o.body),t=o.getHeader("content-length");if(e<t)return C(400),!1},function(){var tr,e=o.from_tag,t=o.call_id,n=o.cseq;if(o.to_tag)return;if(o.method===f.INVITE){if(c._transactions.ist[o.via_branch])return!1;for(var r in c._transactions.ist)if(Object.prototype.hasOwnProperty.call(c._transactions.ist,r)&&(tr=c._transactions.ist[r]).request.from_tag===e&&tr.request.call_id===t&&tr.request.cseq===n)return C(482),!1}else{if(c._transactions.nist[o.via_branch])return!1;for(var l in c._transactions.nist)if(Object.prototype.hasOwnProperty.call(c._transactions.nist,l)&&(tr=c._transactions.nist[l]).request.from_tag===e&&tr.request.call_id===t&&tr.request.cseq===n)return C(482),!1}}],y=[function(){if(o.getHeaders("via").length>1)return v.debug("more than one Via header field present in the response, dropping the response"),!1},function(){var e=m.str_utf8_length(o.body),t=o.getHeader("content-length");if(e<t)return v.debug("message body length is lower than the value in Content-Length header field, dropping the response"),!1}];function C(e){var t,n,l=o.getHeaders("via"),c="SIP/2.0 ".concat(e," ").concat(f.REASON_PHRASE[e],"\r\n"),h=r(l);try{for(h.s();!(n=h.n()).done;){var _=n.value;c+="Via: ".concat(_,"\r\n")}}catch(e){h.e(e)}finally{h.f()}t=o.getHeader("To"),o.to_tag||(t+=";tag=".concat(m.newTag())),c+="To: ".concat(t,"\r\n"),c+="From: ".concat(o.getHeader("From"),"\r\n"),c+="Call-ID: ".concat(o.call_id,"\r\n"),c+="CSeq: ".concat(o.cseq," ").concat(o.method,"\r\n"),c+="\r\n",d.send(c)}e.exports=function(e,u,t){o=e,c=u,d=t;var n,l=r(T);try{for(l.s();!(n=l.n()).done;){if(!1===(0,n.value)())return!1}}catch(e){l.e(e)}finally{l.f()}if(o instanceof _.IncomingRequest){var h,f=r($);try{for(f.s();!(h=f.n()).done;){if(!1===(0,h.value)())return!1}}catch(e){f.e(e)}finally{f.f()}}else if(o instanceof _.IncomingResponse){var m,v=r(y);try{for(v.s();!(m=v.n()).done;){if(!1===(0,m.value)())return!1}}catch(e){v.e(e)}finally{v.f()}}return!0}},358:function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var o=n(297),c=n(295),d=n(300),h=n(305),f=n(327),_=n(304);t.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:c.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:c.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:c.CONNECTION_RECOVERY_MIN_INTERVAL,via_host:"".concat(o.createRandomToken(12),".invalid")};var m={mandatory:{sockets:function(e){var t=[];if(f.isSocket(e))t.push({socket:e});else{if(!Array.isArray(e)||!e.length)return;var n,l=r(e);try{for(l.s();!(n=l.n()).done;){var o=n.value;Object.prototype.hasOwnProperty.call(o,"socket")&&f.isSocket(o.socket)?t.push(o):f.isSocket(o)&&t.push({socket:o})}}catch(e){l.e(e)}finally{l.f()}}return t},uri:function(e){/^sip:/i.test(e)||(e="".concat(c.SIP,":").concat(e));var t=h.parse(e);return t&&t.user?t:void 0}},optional:{authorization_user:function(e){return-1===d.parse('"'.concat(e,'"'),"quoted_string")?void 0:e},authorization_jwt:function(e){if("string"==typeof e)return e},user_agent:function(e){if("string"==typeof e)return e},connection_recovery_max_interval:function(e){if(o.isDecimal(e)){var t=Number(e);if(t>0)return t}},connection_recovery_min_interval:function(e){if(o.isDecimal(e)){var t=Number(e);if(t>0)return t}},contact_uri:function(e){if("string"==typeof e){var t=d.parse(e,"SIP_URI");if(-1!==t)return t}},display_name:function(e){return e},instance_id:function(e){return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===d.parse(e,"uuid")?void 0:e},no_answer_timeout:function(e){if(o.isDecimal(e)){var t=Number(e);if(t>0)return t}},session_timers:function(e){if("boolean"==typeof e)return e},session_timers_refresh_method:function(e){if("string"==typeof e&&((e=e.toUpperCase())===c.INVITE||e===c.UPDATE))return e},session_timers_force_refresher:function(e){if("boolean"==typeof e)return e},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){if("boolean"==typeof e)return e},register_expires:function(e){if(o.isDecimal(e)){var t=Number(e);if(t>0)return t}},registrar_server:function(e){/^sip:/i.test(e)||(e="".concat(c.SIP,":").concat(e));var t=h.parse(e);return t?t.user?void 0:t:void 0},use_preloaded_route:function(e){if("boolean"==typeof e)return e}}};t.load=function(e,t){for(var n in m.mandatory){if(!t.hasOwnProperty(n))throw new _.ConfigurationError(n);var r=t[n],l=m.mandatory[n](r);if(void 0===l)throw new _.ConfigurationError(n,r);e[n]=l}for(var c in m.optional)if(t.hasOwnProperty(c)){var d=t[c];if(o.isEmpty(d))continue;var h=m.optional[c](d);if(void 0===h)throw new _.ConfigurationError(c,d);e[c]=h}}},359:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=n(296),o=n(300),c=new l("WebSocketInterface");e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c.debug('new() [url:"%s"]',t),this._url=t,this._sip_uri=null,this._via_transport=null,this._ws=null;var n=o.parse(t,"absoluteURI");if(-1===n)throw c.warn("invalid WebSocket URI: ".concat(t)),new TypeError("Invalid argument: ".concat(t));if("wss"!==n.scheme&&"ws"!==n.scheme)throw c.warn("invalid WebSocket URI scheme: ".concat(n.scheme)),new TypeError("Invalid argument: ".concat(t));this._sip_uri="sip:".concat(n.host).concat(n.port?":".concat(n.port):"",";transport=ws"),this._via_transport=n.scheme.toUpperCase()}var t,n,l;return t=e,(n=[{key:"connect",value:function(){if(c.debug("connect()"),this.isConnected())c.debug("WebSocket ".concat(this._url," is already connected"));else if(this.isConnecting())c.debug("WebSocket ".concat(this._url," is connecting"));else{this._ws&&this.disconnect(),c.debug("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(e){this._onError(e)}}}},{key:"disconnect",value:function(){c.debug("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:"send",value:function(e){return c.debug("send()"),this.isConnected()?(this._ws.send(e),!0):(c.warn("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){c.debug("WebSocket ".concat(this._url," connected")),this.onconnect()}},{key:"_onClose",value:function(e){var t=e.wasClean,code=e.code,n=e.reason;c.debug("WebSocket ".concat(this._url," closed")),!1===t&&c.debug("WebSocket abrupt disconnection"),this.ondisconnect(!t,code,n)}},{key:"_onMessage",value:function(e){var data=e.data;c.debug("received WebSocket message"),this.ondata(data)}},{key:"_onError",value:function(e){c.warn("WebSocket ".concat(this._url," error: "),e)}},{key:"via_transport",get:function(){return this._via_transport},set:function(e){this._via_transport=e.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}}])&&r(t.prototype,n),l&&r(t,l),e}()},360:function(e,t,n){const r=n(303),l=n(322),o=n(299),c=n(316),d=n(361),h=n(306),f=new r("Dialog"),_={STATUS_EARLY:1,STATUS_CONFIRMED:2};e.exports=class{static get C(){return _}constructor(e,t,n,r=_.STATUS_CONFIRMED){if(this._owner=e,this._ua=e._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!t.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};t instanceof l.IncomingResponse&&(r=t.status_code<200?_.STATUS_EARLY:_.STATUS_CONFIRMED);const o=t.parseHeader("contact");"UAS"===n?(this._id={call_id:t.call_id,local_tag:t.to_tag,remote_tag:t.from_tag,toString(){return this.call_id+this.local_tag+this.remote_tag}},this._state=r,this._remote_seqnum=t.cseq,this._local_uri=t.parseHeader("to").uri,this._remote_uri=t.parseHeader("from").uri,this._remote_target=o.uri,this._route_set=t.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):"UAC"===n&&(this._id={call_id:t.call_id,local_tag:t.from_tag,remote_tag:t.to_tag,toString(){return this.call_id+this.local_tag+this.remote_tag}},this._state=r,this._local_seqnum=t.cseq,this._local_uri=t.parseHeader("from").uri,this._remote_uri=t.parseHeader("to").uri,this._remote_target=o.uri,this._route_set=t.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),f.debug(`new ${n} dialog created with status ${this._state===_.STATUS_EARLY?"EARLY":"CONFIRMED"}`)}get id(){return this._id}get local_seqnum(){return this._local_seqnum}set local_seqnum(e){this._local_seqnum=e}get owner(){return this._owner}get uac_pending_reply(){return this._uac_pending_reply}set uac_pending_reply(e){this._uac_pending_reply=e}get uas_pending_reply(){return this._uas_pending_reply}update(e,t){this._state=_.STATUS_CONFIRMED,f.debug(`dialog ${this._id.toString()}  changed to CONFIRMED state`),"UAC"===t&&(this._route_set=e.getHeaders("record-route").reverse())}terminate(){f.debug(`dialog ${this._id.toString()} deleted`),this._ua.destroyDialog(this)}sendRequest(e,t={}){const n=h.cloneArray(t.extraHeaders),r=h.cloneObject(t.eventHandlers),body=t.body||null,l=this._createRequest(e,n,body);r.onAuthenticated=()=>{this._local_seqnum+=1};return new d(this,l,r).send(),l}receiveRequest(e){this._checkInDialogRequest(e)&&(e.method===o.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:e.method===o.INVITE&&(this._ack_seqnum=e.cseq),this._owner.receiveRequest(e))}_createRequest(e,t,body){t=h.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));const n=e===o.CANCEL||e===o.ACK?this._local_seqnum:this._local_seqnum+=1;return new l.OutgoingRequest(e,this._remote_target,this._ua,{cseq:n,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,body)}_checkInDialogRequest(e){if(this._remote_seqnum)if(e.cseq<this._remote_seqnum){if(e.method!==o.ACK)return e.reply(500),!1;if(null===this._ack_seqnum||e.cseq!==this._ack_seqnum)return!1}else e.cseq>this._remote_seqnum&&(this._remote_seqnum=e.cseq);else this._remote_seqnum=e.cseq;if(e.method===o.INVITE||e.method===o.UPDATE&&e.body){if(!0===this._uac_pending_reply)e.reply(491);else{if(!0===this._uas_pending_reply){const t=1+(10*Math.random()|0);return e.reply(500,null,[`Retry-After:${t}`]),!1}{this._uas_pending_reply=!0;const t=()=>{e.server_transaction.state!==c.C.STATUS_ACCEPTED&&e.server_transaction.state!==c.C.STATUS_COMPLETED&&e.server_transaction.state!==c.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",t),this._uas_pending_reply=!1)};e.server_transaction.on("stateChanged",t)}}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(()=>{e.server_transaction.state===c.C.STATUS_ACCEPTED&&(this._remote_target=e.parseHeader("contact").uri)}))}else e.method===o.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(()=>{e.server_transaction.state===c.C.STATUS_COMPLETED&&(this._remote_target=e.parseHeader("contact").uri)}));return!0}}},361:function(e,t,n){const r=n(299),l=n(316),o=n(320),c=n(330),d={onRequestTimeout:()=>{},onTransportError:()=>{},onSuccessResponse:()=>{},onErrorResponse:()=>{},onAuthenticated:()=>{},onDialogError:()=>{}};e.exports=class{constructor(dialog,e,t){this._dialog=dialog,this._ua=dialog._ua,this._request=e,this._eventHandlers=t,this._reattempt=!1,this._reattemptTimer=null;for(const e in d)Object.prototype.hasOwnProperty.call(d,e)&&(this._eventHandlers[e]||(this._eventHandlers[e]=d[e]))}get request(){return this._request}send(){const e=new c(this._ua,this._request,{onRequestTimeout:()=>{this._eventHandlers.onRequestTimeout()},onTransportError:()=>{this._eventHandlers.onTransportError()},onAuthenticated:e=>{this._eventHandlers.onAuthenticated(e)},onReceiveResponse:e=>{this._receiveResponse(e)}});if(e.send(),(this._request.method===r.INVITE||this._request.method===r.UPDATE&&this._request.body)&&e.clientTransaction.state!==l.C.STATUS_TERMINATED){this._dialog.uac_pending_reply=!0;const t=()=>{e.clientTransaction.state!==l.C.STATUS_ACCEPTED&&e.clientTransaction.state!==l.C.STATUS_COMPLETED&&e.clientTransaction.state!==l.C.STATUS_TERMINATED||(e.clientTransaction.removeListener("stateChanged",t),this._dialog.uac_pending_reply=!1)};e.clientTransaction.on("stateChanged",t)}}_receiveResponse(e){408===e.status_code||481===e.status_code?this._eventHandlers.onDialogError(e):e.method===r.INVITE&&491===e.status_code?this._reattempt?e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout((()=>{this._dialog.owner.status!==o.C.STATUS_TERMINATED&&(this._reattempt=!0,this._request_sender.send())}),1e3)):e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e)}}},362:function(e,t,n){const r=n(303),l=n(306),o=new r("DigestAuthentication");e.exports=class{constructor(e){this._credentials=e,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}get(e){switch(e){case"realm":return this._realm;case"ha1":return this._ha1;default:return void o.warn('get() | cannot get "%s" parameter',e)}}authenticate({method:e,ruri:t,body:body},n,r=null){if(this._algorithm=n.algorithm,this._realm=n.realm,this._nonce=n.nonce,this._opaque=n.opaque,this._stale=n.stale,this._algorithm){if("MD5"!==this._algorithm)return o.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return o.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return o.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return o.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return o.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(n.qop)if(n.qop.indexOf("auth-int")>-1)this._qop="auth-int";else{if(!(n.qop.indexOf("auth")>-1))return o.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this._qop="auth"}else this._qop=null;this._method=e,this._uri=t,this._cnonce=r||l.createRandomToken(12),this._nc+=1;const c=Number(this._nc).toString(16);let d,h;return this._ncHex="00000000".substr(0,8-c.length)+c,4294967296===this._nc&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=l.calculateMD5(`${this._credentials.username}:${this._realm}:${this._credentials.password}`):this._ha1=this._credentials.ha1,"auth"===this._qop?(d=`${this._method}:${this._uri}`,h=l.calculateMD5(d),o.debug('authenticate() | using qop=auth [a2:"%s"]',d),this._response=l.calculateMD5(`${this._ha1}:${this._nonce}:${this._ncHex}:${this._cnonce}:auth:${h}`)):"auth-int"===this._qop?(d=`${this._method}:${this._uri}:${l.calculateMD5(body||"")}`,h=l.calculateMD5(d),o.debug('authenticate() | using qop=auth-int [a2:"%s"]',d),this._response=l.calculateMD5(`${this._ha1}:${this._nonce}:${this._ncHex}:${this._cnonce}:auth-int:${h}`)):null===this._qop&&(d=`${this._method}:${this._uri}`,h=l.calculateMD5(d),o.debug('authenticate() | using qop=null [a2:"%s"]',d),this._response=l.calculateMD5(`${this._ha1}:${this._nonce}:${h}`)),o.debug("authenticate() | response generated"),!0}toString(){const e=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push(`algorithm=${this._algorithm}`),e.push(`username="${this._credentials.username}"`),e.push(`realm="${this._realm}"`),e.push(`nonce="${this._nonce}"`),e.push(`uri="${this._uri}"`),e.push(`response="${this._response}"`),this._opaque&&e.push(`opaque="${this._opaque}"`),this._qop&&(e.push(`qop=${this._qop}`),e.push(`cnonce="${this._cnonce}"`),e.push(`nc=${this._ncHex}`)),`Digest ${e.join(", ")}`}}},363:function(e,t,n){const r=n(298).EventEmitter,l=n(303),o=n(299),c=n(321),d=n(306),h=new l("RTCSession:DTMF"),f={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};e.exports=class extends r{constructor(e){super(),this._session=e,this._direction=null,this._tone=null,this._duration=null,this._request=null}get tone(){return this._tone}get duration(){return this._duration}send(e,t={}){if(void 0===e)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new c.InvalidStateError(this._session.status);const n=d.cloneArray(t.extraHeaders);if(this.eventHandlers=d.cloneObject(t.eventHandlers),"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError(`Invalid tone: ${e}`);e=e.toString()}if(!e.match(/^[0-9A-DR#*]$/))throw new TypeError(`Invalid tone: ${e}`);this._tone=e,this._duration=t.duration,n.push("Content-Type: application/dtmf-relay");let body=`Signal=${this._tone}\r\n`;body+=`Duration=${this._duration}`,this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(o.INFO,{extraHeaders:n,eventHandlers:{onSuccessResponse:e=>{this.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:e=>{this.eventHandlers.onFailed&&this.eventHandlers.onFailed(),this.emit("failed",{originator:"remote",response:e})},onRequestTimeout:()=>{this._session.onRequestTimeout()},onTransportError:()=>{this._session.onTransportError()},onDialogError:()=>{this._session.onDialogError()}},body:body})}init_incoming(e){const t=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,n=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=e,e.reply(200),e.body){const body=e.body.split("\n");body.length>=1&&t.test(body[0])&&(this._tone=body[0].replace(t,"$2")),body.length>=2&&n.test(body[1])&&(this._duration=parseInt(body[1].replace(n,"$2"),10))}this._duration||(this._duration=f.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:e}):h.debug("invalid INFO DTMF received, discarded")}},e.exports.C=f},364:function(e,t,n){const r=n(298).EventEmitter,l=n(299),o=n(321),c=n(306);e.exports=class extends r{constructor(e){super(),this._session=e,this._direction=null,this._contentType=null,this._body=null}get contentType(){return this._contentType}get body(){return this._body}send(e,body,t={}){if(this._direction="outgoing",void 0===e)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new o.InvalidStateError(this._session.status);this._contentType=e,this._body=body;const n=c.cloneArray(t.extraHeaders);n.push(`Content-Type: ${e}`),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(l.INFO,{extraHeaders:n,eventHandlers:{onSuccessResponse:e=>{this.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:e=>{this.emit("failed",{originator:"remote",response:e})},onTransportError:()=>{this._session.onTransportError()},onRequestTimeout:()=>{this._session.onRequestTimeout()},onDialogError:()=>{this._session.onDialogError()}},body:body})}init_incoming(e){this._direction="incoming",this.request=e,e.reply(200),this._contentType=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,this._body=e.body,this._session.newInfo({originator:"remote",info:this,request:e})}}},365:function(e,t,n){const r=n(303),l=n(299),o=new r("RTCSession:ReferNotifier"),c="refer",d="message/sipfrag;version=2.0",h=300;e.exports=class{constructor(e,t,n){this._session=e,this._id=t,this._expires=n||h,this._active=!0,this.notify(100)}notify(code,e){if(o.debug("notify()"),!1===this._active)return;let t;e=e||l.REASON_PHRASE[code]||"",t=code>=200?"terminated;reason=noresource":`active;expires=${this._expires}`,this._session.sendRequest(l.NOTIFY,{extraHeaders:[`Event: ${c};id=${this._id}`,`Subscription-State: ${t}`,`Content-Type: ${d}`],body:`SIP/2.0 ${code} ${e}`,eventHandlers:{onErrorResponse(){this._active=!1}}})}}},366:function(e,t,n){const r=n(298).EventEmitter,l=n(303),o=n(299),c=n(311),d=n(306),h=new l("RTCSession:ReferSubscriber");e.exports=class extends r{constructor(e){super(),this._id=null,this._session=e}get id(){return this._id}sendRefer(e,t={}){h.debug("sendRefer()");const n=d.cloneArray(t.extraHeaders),r=d.cloneObject(t.eventHandlers);for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&this.on(e,r[e]);let l=null;t.replaces&&(l=t.replaces._request.call_id,l+=`;to-tag=${t.replaces._to_tag}`,l+=`;from-tag=${t.replaces._from_tag}`,l=encodeURIComponent(l));const c=`Refer-To: <${e}${l?`?Replaces=${l}`:""}>`;if(n.push(c),!n.some((header=>header.toLowerCase().startsWith("referred-by:")))){const e=`Referred-By: <${this._session._ua._configuration.uri._scheme}:${this._session._ua._configuration.uri._user}@${this._session._ua._configuration.uri._host}>`;n.push(e)}n.push(`Contact: ${this._session.contact}`);const f=this._session.sendRequest(o.REFER,{extraHeaders:n,eventHandlers:{onSuccessResponse:e=>{this._requestSucceeded(e)},onErrorResponse:e=>{this._requestFailed(e,o.causes.REJECTED)},onTransportError:()=>{this._requestFailed(null,o.causes.CONNECTION_ERROR)},onRequestTimeout:()=>{this._requestFailed(null,o.causes.REQUEST_TIMEOUT)},onDialogError:()=>{this._requestFailed(null,o.causes.DIALOG_ERROR)}}});this._id=f.cseq}receiveNotify(e){if(h.debug("receiveNotify()"),!e.body)return;const t=c.parse(e.body.trim(),"Status_Line");if(-1!==t)switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",{request:e,status_line:t});break;default:this.emit("failed",{request:e,status_line:t})}else h.debug(`receiveNotify() | error parsing NOTIFY body: "${e.body}"`)}_requestSucceeded(e){h.debug("REFER succeeded"),h.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:e})}_requestFailed(e,t){h.debug("REFER failed"),h.debug('emit "requestFailed"'),this.emit("requestFailed",{response:e||null,cause:t})}}},374:function(e,t,n){"use strict";n.d(t,"a",(function(){return nt}));var r={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:[25689]\\d|40)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|68|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|13|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-7]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79)\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0(4(?:[14]4|56)|[579])?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[013579])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-246-9])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|80\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d\\d|606)\\d{5}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1289]|5[3-579]|6[0-289]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","9008\\d{3}|(?:[2-467]\\d\\d|862)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-489]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([25-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29[89]|389)","5(?:29[89]|389)0"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:29(?:[189][05]|2[29]|3[01])|389[05])\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[08]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|2[0-2]|6[0-8]|8[0-3]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","(?:69|80)\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"1|([34]\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:5|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["5"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[017]\\d|[235][1-9]|4[0-35-9]|6[0-46-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","(?:[45]|80\\d\\d)\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","[2-7]\\d{7}|800\\d{4}(?:\\d{2})?|2\\d{6}",[7,8,9],[["(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]]],RE:["262","00","976\\d{6}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-5]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|[1-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["505(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","4\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|55|[679]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["4"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}"]]],883:["883",0,"(?:210|370\\d\\d)\\d{7}|51\\d{7}(?:\\d{3})?",[9,10,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[35]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:210|(?:370[1-9]|51[013]0)\\d)\\d{7}|5100\\d{5}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function l(e,t){var n=Array.prototype.slice.call(t);return n.push(r),e.apply(this,n)}var o="0-9---",c="".concat("--").concat("/").concat(".").concat(" ").concat("()\\[\\]").concat("~");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),$(r,e)},m(e)}function v(e,t,n){return v=T()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&$(r,n.prototype),r},v.apply(null,arguments)}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function $(e,p){return $=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},$(e,p)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(d,e);var t,n,r,l,o,c=(t=d,n=T(),function(){var e,r=y(t);if(n){var l=y(this).constructor;e=Reflect.construct(r,arguments,l)}else e=r.apply(this,arguments);return f(this,e)});function d(code){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),e=c.call(this,code),Object.setPrototypeOf(_(e),d.prototype),e.name=e.constructor.name,e}return r=d,l&&h(r.prototype,l),o&&h(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}(m(Error)),A=function(a,b){a=a.split("-"),b=b.split("-");for(var e=a[0].split("."),t=b[0].split("."),i=0;i<3;i++){var n=Number(e[i]),r=Number(t[i]);if(n>r)return 1;if(r>n)return-1;if(!isNaN(n)&&isNaN(r))return 1;if(isNaN(n)&&!isNaN(r))return-1}return a[1]&&b[1]?a[1]>b[1]?1:a[1]<b[1]?-1:0:!a[1]&&b[1]?1:a[1]&&!b[1]?-1:0};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var w=" ext. ",O=/^\d+$/,N=function(){function e(t){S(this,e),function(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!k(e)||!k(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(k(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+L(e)+": "+e,"."))}(t),this.metadata=t,F.call(this,t)}return I(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter((function(e){return"001"!==e}))}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&O.test(e)&&(t=e,e=null),e&&"001"!==e){if(!this.hasCountry(e))throw new Error("Unknown country: ".concat(e));this.numberingPlan=new D(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw new Error("Unknown calling code: ".concat(t));this.numberingPlan=new D(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var n=this.nonGeographic()[e];if(n)return n}else{var r=this.countryCallingCodes()[e];if(r&&1===r.length&&"001"===r[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){return this.selectNumberingPlan(e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),e}(),D=function(){function e(t,n){S(this,e),this.globalMetadataObject=n,this.metadata=t,F.call(this,n.metadata)}return I(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this,t=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return t.map((function(t){return new P(t,e)}))}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return(!this.types()||0!==this.types().length)&&!!this.types()}},{key:"type",value:function(e){if(this.hasTypes()&&M(this.types(),e))return new U(M(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?w:this.metadata[13]||w}}]),e}(),P=function(){function e(t,n){S(this,e),this._format=t,this.metadata=n}return I(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||x.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),x=/^\(?\$1\)?$/,U=function(){function e(t,n){S(this,e),this.type=t,this.metadata=n}return I(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function M(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}var k=function(e){return"object"===E(e)},L=function(e){return E(e)};function H(e,t){if((t=new N(t)).hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function F(e){var t=e.version;"number"==typeof t?(this.v1=1===t,this.v2=2===t,this.v3=3===t,this.v4=4===t):t?-1===A(t,"1.2.0")?this.v2=!0:-1===A(t,"1.7.35")?this.v3=!0:this.v4=!0:this.v1=!0}var j=function(e){return"([".concat(o,"]{1,").concat(e,"})")};function G(e){var t="#?";return";ext="+j("20")+"|"+("[ \\t,]*(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)[:\\.]?[ \\t,-]*"+j("20")+t)+"|"+("[ \\t,]*(?:[x#~]|int|)[:\\.]?[ \\t,-]*"+j("9")+t)+"|"+("[- ]+"+j("6")+"#")+"|"+("[ \\t]*(?:,{2}|;)[:\\.]?[ \\t,-]*"+j("15")+t)+"|"+("[ \\t]*(?:,)+[:\\.]?[ \\t,-]*"+j("9")+t)}var B="[+]{0,1}(?:["+c+"]*["+"0-9---]){3,}["+c+"0-9---]*",V=new RegExp("^[+]{0,1}(?:["+c+"]*["+"0-9---]){1,2}$","i"),W=B+"(?:"+G()+")?",K=new RegExp("^[0-9---]{2}$|^"+W+"$","i");function Y(e){return e.length>=2&&K.test(e)}var z=new RegExp("(?:"+G()+")$","i");var X={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function J(e){return X[e]}function Q(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ee(e){for(var t,n="",r=Q(e.split(""));!(t=r()).done;){n+=te(t.value,n)||""}return n}function te(e,t){if("+"===e){if(t)return;return"+"}return J(e)}function ne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function le(e,t){return se(e,void 0,t)}function se(e,t,n){var r=n.type(t),l=r&&r.possibleLengths()||n.possibleLengths();if(!l)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===t){if(!n.type("FIXED_LINE"))return se(e,"MOBILE",n);var o=n.type("MOBILE");o&&(l=function(a,b){for(var e,t=a.slice(),n=ne(b);!(e=n()).done;){var element=e.value;a.indexOf(element)<0&&t.push(element)}return t.sort((function(a,b){return a-b}))}(l,o.possibleLengths()))}else if(t&&!r)return"INVALID_LENGTH";var c=e.length,d=l[0];return d===c?"IS_POSSIBLE":d>c?"TOO_SHORT":l[l.length-1]<c?"TOO_LONG":l.indexOf(c,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function ie(e,t){return"IS_POSSIBLE"===le(e,t)}function oe(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,r,l=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(l.push(n.value),!i||l.length!==i);o=!0);}catch(e){c=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(c)throw r}}return l}(e,i)||ue(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ce(text){for(var e,t,n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=ue(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}((text=text.replace(/^tel:/,"tel=")).split(";"));!(n=r()).done;){var l=oe(n.value.split("="),2),o=l[0],c=l[1];switch(o){case"tel":e=c;break;case"ext":t=c;break;case"phone-context":"+"===c[0]&&(e=c+e)}}if(!Y(e))return{};var d={number:e};return t&&(d.ext=t),d}function de(text,e){return text=text||"",new RegExp("^(?:"+e+")$").test(text)}function he(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var _e=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function pe(input,e,t){if(e=e||{},input.country){(t=new N(t)).selectNumberingPlan(input.country,input.countryCallingCode);var n=e.v2?input.nationalNumber:input.phone;if(de(n,t.nationalNumberPattern())){if(me(n,"FIXED_LINE",t))return t.type("MOBILE")&&""===t.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":t.type("MOBILE")?me(n,"MOBILE",t)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var r,l=he(_e);!(r=l()).done;){var o=r.value;if(me(n,o,t))return o}}}}function me(e,t,n){return!(!(t=n.type(t))||!t.pattern())&&(!(t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0)&&de(e,t.pattern()))}var ge=/(\$\d)/;function ve(e,t,n){var r=n.useInternationalFormat,l=n.withNationalPrefix,o=(n.carrierCode,n.metadata,e.replace(new RegExp(t.pattern()),r?t.internationalFormat():l&&t.nationalPrefixFormattingRule()?t.format().replace(ge,t.nationalPrefixFormattingRule()):t.format()));return r?function(e){return e.replace(new RegExp("[".concat(c,"]+"),"g")," ").trim()}(o):o}var Te=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function $e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ce(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Ae(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ce(Object(source),!0).forEach((function(t){Ee(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Ce(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se={formatExtension:function(e,t,n){return"".concat(e).concat(n.ext()).concat(t)}};function be(input,e,t,n){if(t=t?Ae(Ae({},Se),t):Se,n=new N(n),input.country&&"001"!==input.country){if(!n.hasCountry(input.country))throw new Error("Unknown country: ".concat(input.country));n.country(input.country)}else{if(!input.countryCallingCode)return input.phone||"";n.selectNumberingPlan(input.countryCallingCode)}var r,l=n.countryCallingCode(),o=t.v2?input.nationalNumber:input.phone;switch(e){case"NATIONAL":return o?Ie(r=Re(o,input.carrierCode,"NATIONAL",n,t),input.ext,n,t.formatExtension):"";case"INTERNATIONAL":return o?(r=Re(o,null,"INTERNATIONAL",n,t),Ie(r="+".concat(l," ").concat(r),input.ext,n,t.formatExtension)):"+".concat(l);case"E.164":return"+".concat(l).concat(o);case"RFC3966":return function(e){var t=e.number,n=e.ext;if(!t)return"";if("+"!==t[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}({number:"+".concat(l).concat(o),ext:input.ext});case"IDD":if(!t.fromCountry)return;var c=function(e,t,n,r,l){if(H(r,l.metadata)===n){var o=Re(e,t,"NATIONAL",l);return"1"===n?n+" "+o:o}var c=function(e,t,n){var r=new N(n);return r.selectNumberingPlan(e,t),r.defaultIDDPrefix()?r.defaultIDDPrefix():Te.test(r.IDDPrefix())?r.IDDPrefix():void 0}(r,void 0,l.metadata);if(c)return"".concat(c," ").concat(n," ").concat(Re(e,null,"INTERNATIONAL",l))}(o,input.carrierCode,l,t.fromCountry,n);return Ie(c,input.ext,n,t.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(e,'"'))}}function Re(e,t,n,r,l){var o=function(e,t){for(var n,r=$e(e);!(n=r()).done;){var l=n.value;if(l.leadingDigitsPatterns().length>0){var o=l.leadingDigitsPatterns()[l.leadingDigitsPatterns().length-1];if(0!==t.search(o))continue}if(de(t,l.pattern()))return l}}(r.formats(),e);return o?ve(e,o,{useInternationalFormat:"INTERNATIONAL"===n,withNationalPrefix:!o.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!l||!1!==l.nationalPrefix,carrierCode:t,metadata:r}):e}function Ie(e,t,n,r){return t?r(e,t,n):e}function we(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Oe(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?we(Object(source),!0).forEach((function(t){Ne(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):we(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pe=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");if(!r)throw new TypeError("`metadata` not passed");var l=new N(r);xe(t)&&(this.country=t,l.country(t),t=l.countryCallingCode()),this.countryCallingCode=t,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=r}var t,n,r;return t=e,(n=[{key:"setExt",value:function(e){this.ext=e}},{key:"isPossible",value:function(){return function(input,e,t){if(void 0===e&&(e={}),t=new N(t),e.v2){if(!input.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(input.countryCallingCode)}else{if(!input.phone)return!1;if(input.country){if(!t.hasCountry(input.country))throw new Error("Unknown country: ".concat(input.country));t.country(input.country)}else{if(!input.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(input.countryCallingCode)}}if(t.possibleLengths())return ie(input.phone||input.nationalNumber,t);if(input.countryCallingCode&&t.isNonGeographicCallingCode(input.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return input=this,e={v2:!0},t=this.metadata,e=e||{},t=new N(t),!!input.country&&(t.selectNumberingPlan(input.country,input.countryCallingCode),t.hasTypes()?void 0!==pe(input,e,t.metadata):de(e.v2?input.nationalNumber:input.phone,t.nationalNumberPattern()));var input,e,t}},{key:"isNonGeographic",value:function(){return new N(this.metadata).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return pe(this,{v2:!0},this.metadata)}},{key:"format",value:function(e,t){return be(this,e,t?Oe(Oe({},t),{},{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}])&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xe=function(e){return/^[A-Z]{2}$/.test(e)},Ue=new RegExp("([0-9---])");function Me(e,t){var n=function(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),r=n.exec(e);if(r){var l,o,c,d=r.length-1,h=d>0&&r[d];if(t.nationalPrefixTransformRule()&&h)l=e.replace(n,t.nationalPrefixTransformRule()),d>1&&(o=r[1]);else{var f=r[0];l=e.slice(f.length),h&&(o=r[1])}if(h){var _=e.indexOf(r[1]);e.slice(0,_)===t.numberingPlan.nationalPrefix()&&(c=t.numberingPlan.nationalPrefix())}else c=r[0];return{nationalNumber:l,nationalPrefix:c,carrierCode:o}}}return{nationalNumber:e}}(e,t),r=n.carrierCode,l=n.nationalNumber;if(l!==e){if(!function(e,t,n){if(de(e,n.nationalNumberPattern())&&!de(t,n.nationalNumberPattern()))return!1;return!0}(e,l,t))return{nationalNumber:e};if(t.possibleLengths()&&!function(e,t){switch(le(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}(l,t))return{nationalNumber:e}}return{nationalNumber:l,carrierCode:r}}function ke(e,t,n,r){if(!e)return{};if("+"!==e[0]){var l=function(e,t,n,r){if(t){var l=new N(r);l.selectNumberingPlan(t,n);var o=new RegExp(l.IDDPrefix());if(0===e.search(o)){var c=(e=e.slice(e.match(o)[0].length)).match(Ue);if(!(c&&null!=c[1]&&c[1].length>0&&"0"===c[1]))return e}}}(e,t,n,r);if(!l||l===e){if(t||n){var o=function(e,t,n,r){var l=t?H(t,r):n;if(0===e.indexOf(l)){(r=new N(r)).selectNumberingPlan(t,n);var o=e.slice(l.length),c=Me(o,r).nationalNumber,d=Me(e,r).nationalNumber;if(!de(d,r.nationalNumberPattern())&&de(c,r.nationalNumberPattern())||"TOO_LONG"===le(d,r))return{countryCallingCode:l,number:o}}return{number:e}}(e,t,n,r),c=o.countryCallingCode,d=o.number;if(c)return{countryCallingCode:c,number:d}}return{number:e}}e="+"+l}if("0"===e[1])return{};r=new N(r);for(var i=2;i-1<=3&&i<=e.length;){var h=e.slice(1,i);if(r.hasCallingCode(h))return r.selectNumberingPlan(h),{countryCallingCode:h,number:e.slice(i)};i++}return{}}function Le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function He(e,t,n){var r=n.getCountryCodesForCallingCode(e);if(r)return 1===r.length?r[0]:function(e,t,n){n=new N(n);for(var r,l=Le(e);!(r=l()).done;){var o=r.value;if(n.country(o),n.leadingDigits()){if(t&&0===t.search(n.leadingDigits()))return o}else if(pe({phone:t,country:o},void 0,n.metadata))return o}}(r,t,n.metadata)}var Fe=new RegExp("[+0-9---]"),je=new RegExp("[^0-9---#]+$");function Ge(text,e,t){if(e=e||{},t=new N(t),e.defaultCountry&&!t.hasCountry(e.defaultCountry)){if(e.v2)throw new C("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(e.defaultCountry))}var n=function(text,e,t){if(text&&0===text.indexOf("tel:"))return ce(text);var n=function(text,e,t){if(!text)return;if(text.length>250){if(t)throw new C("TOO_LONG");return}if(!1===e)return text;var n=text.search(Fe);if(n<0)return;return text.slice(n).replace(je,"")}(text,t,e);if(!n)return{};if(!Y(n))return function(e){return V.test(e)}(n)?{error:"TOO_SHORT"}:{};var r=function(e){var t=e.search(z);if(t<0)return{};for(var n=e.slice(0,t),r=e.match(z),i=1;i<r.length;){if(r[i])return{number:n,ext:r[i]};i++}}(n);if(r.ext)return r;return{number:n}}(text,e.v2,e.extract),r=n.number,l=n.ext,o=n.error;if(!r){if(e.v2){if("TOO_SHORT"===o)throw new C("TOO_SHORT");throw new C("NOT_A_NUMBER")}return{}}var c=function(e,t,n,r){var l,o=ke(ee(e),t,n,r.metadata),c=o.countryCallingCode,d=o.number;if(c)r.selectNumberingPlan(c);else{if(!d||!t&&!n)return{};r.selectNumberingPlan(t,n),t&&(l=t),c=n||H(t,r.metadata)}if(!d)return{countryCallingCode:c};var h=Me(ee(d),r),f=h.nationalNumber,_=h.carrierCode,m=He(c,f,r);m&&(l=m,"001"===m||r.country(l));return{country:l,countryCallingCode:c,nationalNumber:f,carrierCode:_}}(r,e.defaultCountry,e.defaultCallingCode,t),d=c.country,h=c.nationalNumber,f=c.countryCallingCode,_=c.carrierCode;if(!t.hasSelectedNumberingPlan()){if(e.v2)throw new C("INVALID_COUNTRY");return{}}if(!h||h.length<2){if(e.v2)throw new C("TOO_SHORT");return{}}if(h.length>17){if(e.v2)throw new C("TOO_LONG");return{}}if(e.v2){var m=new Pe(f,h,t.metadata);return d&&(m.country=d),_&&(m.carrierCode=_),l&&(m.ext=l),m}var v=!!(e.extended?t.hasSelectedNumberingPlan():d)&&de(h,t.nationalNumberPattern());return e.extended?{country:d,countryCallingCode:f,carrierCode:_,valid:v,possible:!!v||!(!0!==e.extended||!t.possibleLengths()||!ie(h,t)),phone:h,ext:l}:v?function(e,t,n){var r={country:e,phone:t};n&&(r.ext=n);return r}(d,h,l):{}}function Be(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Ve(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Be(Object(source),!0).forEach((function(t){We(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Be(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(text,e,t){return Ge(text,Ve(Ve({},e),{},{v2:!0}),t)}function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function ze(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,r,l=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(l.push(n.value),!i||l.length!==i);o=!0);}catch(e){c=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(c)throw r}}return l}(e,i)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qe(e,t)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ze(){var e=et(arguments),text=e.text,t=e.options,n=e.metadata;return Ke(text,t,n)}function et(e){var text,t,n,r=Je(Array.prototype.slice.call(e),4),l=r[0],o=r[1],c=r[2],d=r[3];if("string"!=typeof l)throw new TypeError("A text for parsing must be a string.");if(text=l,o&&"string"!=typeof o){if(!tt(o))throw new Error("Invalid second argument: ".concat(o));c?(t=o,n=c):n=o}else d?(t=c,n=d):(t=void 0,n=c),o&&(t=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ze(Object(source),!0).forEach((function(t){Xe(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ze(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({defaultCountry:o},t));return{text:text,options:t,metadata:n}}var tt=function(e){return"object"===Ye(e)};function nt(){return l(Ze,arguments)}}}]);